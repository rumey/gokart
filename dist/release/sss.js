!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={default:require("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":2}],2:[function(require,module,exports){var core=require("../../modules/_core"),$JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function(it){return $JSON.stringify.apply($JSON,arguments)}},{"../../modules/_core":3}],3:[function(require,module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},{}],4:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],5:[function(require,module,exports){function patchView(View){var unbuild=View.unbuild;View.unbuild=function(defer){if(!this.hotUpdating){var prevComponent=this.childVM&&this.childVM.constructor;removeView(prevComponent,this),defer&&addView(this.Component,this)}return unbuild.call(this,defer)}}function addView(Component,view){var id=Component&&Component.options.hotID;id&&(map[id]||(map[id]={Component:Component,views:[],instances:[]}),map[id].views.push(view))}function removeView(Component,view){var id=Component&&Component.options.hotID;id&&map[id].views.$remove(view)}function makeOptionsHot(id,options){options.hotID=id,injectHook(options,"created",function(){var record=map[id];record.Component||(record.Component=this.constructor),record.instances.push(this)}),injectHook(options,"beforeDestroy",function(){map[id].instances.$remove(this)})}function injectHook(options,name,hook){var existing=options[name];options[name]=existing?Array.isArray(existing)?existing.concat(hook):[existing,hook]:[hook]}function updateView(view,Component){if(view._bound){view.Component=Component,view.hotUpdating=!0,view.vm._isCompiled=!1;var state=extractState(view.childVM),keepAlive=view.keepAlive;view.keepAlive=!1,view.mountComponent(),view.keepAlive=keepAlive,restoreState(view.childVM,state,!0),view.vm._isCompiled=!0,view.hotUpdating=!1}}function extractState(vm){return{cid:vm.constructor.cid,data:vm.$data,children:vm.$children.map(extractState)}}function restoreState(vm,state,isRoot){var oldAsyncConfig;isRoot&&(oldAsyncConfig=Vue.config.async,Vue.config.async=!1),isRoot||!vm._props?vm.$data=state.data:Object.keys(state.data).forEach(function(key){vm._props[key]||(vm.$data[key]=state.data[key])});var hasSameChildren=vm.$children.every(function(c,i){return state.children[i]&&state.children[i].cid===c.constructor.cid});hasSameChildren&&vm.$children.forEach(function(c,i){restoreState(c,state.children[i])}),isRoot&&(Vue.config.async=oldAsyncConfig)}function format(id){var match=id.match(/[^\/]+\.vue$/);return match?match[0]:id}var Vue,map=Object.create(null),shimmed=!1,isBrowserify=!1;exports.install=function(vue,browserify){if(!shimmed){if(shimmed=!0,Vue=vue,isBrowserify=browserify,exports.compatible=!!Vue.internalDirectives,!exports.compatible)return void console.warn("[HMR] vue-loader hot reload is only compatible with Vue.js 1.0.0+.");patchView(Vue.internalDirectives.component),console.log("[HMR] Vue component hot reload shim applied.");var routerView=Vue.elementDirective("router-view");routerView&&(patchView(routerView),console.log("[HMR] vue-router <router-view> hot reload shim applied."))}},exports.createRecord=function(id,options){"function"==typeof options&&(options=options.options),"string"!=typeof options.el&&"object"!=typeof options.data&&(makeOptionsHot(id,options),map[id]={Component:null,views:[],instances:[]})},exports.update=function(id,newOptions,newTemplate){var record=map[id];if(!record||record.instances.length&&!record.views.length){if(console.log("[HMR] Root or manually-mounted instance modified. Full reload may be required."),isBrowserify)return;window.location.reload()}isBrowserify||console.log("[HMR] Updating component: "+format(id));var Component=record.Component;newOptions&&(Component=record.Component="function"==typeof newOptions?newOptions:Vue.extend(newOptions),makeOptionsHot(id,Component.options)),newTemplate&&(Component.options.template=newTemplate),Component.options.name&&(Component.options.components[Component.options.name]=Component),Component.linker=null,record.views.forEach(function(view){updateView(view,Component)}),window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__.emit("flush")}},{}],6:[function(require,module,exports){(function(process){"use strict";function set(obj,key,val){if(hasOwn(obj,key))return void(obj[key]=val);if(obj._isVue)return void set(obj._data,key,val);var ob=obj.__ob__;if(!ob)return void(obj[key]=val);if(ob.convert(key,val),ob.dep.notify(),ob.vms)for(var i=ob.vms.length;i--;){var vm=ob.vms[i];vm._proxy(key),vm._digest()}return val}function del(obj,key){if(hasOwn(obj,key)){delete obj[key];var ob=obj.__ob__;if(!ob)return void(obj._isVue&&(delete obj._data[key],obj._digest()));if(ob.dep.notify(),ob.vms)for(var i=ob.vms.length;i--;){var vm=ob.vms[i];vm._unproxy(key),vm._digest()}}}function hasOwn(obj,key){return hasOwnProperty.call(obj,key)}function isLiteral(exp){return literalValueRE.test(exp)}function isReserved(str){var c=(str+"").charCodeAt(0);return 36===c||95===c}function _toString(value){return null==value?"":value.toString()}function toNumber(value){if("string"!=typeof value)return value;var parsed=Number(value);return isNaN(parsed)?value:parsed}function toBoolean(value){return"true"===value||"false"!==value&&value}function stripQuotes(str){var a=str.charCodeAt(0),b=str.charCodeAt(str.length-1);return a!==b||34!==a&&39!==a?str:str.slice(1,-1)}function camelize(str){return str.replace(camelizeRE,toUpper)}function toUpper(_,c){return c?c.toUpperCase():""}function hyphenate(str){return str.replace(hyphenateRE,"$1-$2").replace(hyphenateRE,"$1-$2").toLowerCase()}function classify(str){return str.replace(classifyRE,toUpper)}function bind(fn,ctx){return function(a){var l=arguments.length;return l?l>1?fn.apply(ctx,arguments):fn.call(ctx,a):fn.call(ctx)}}function toArray(list,start){start=start||0;for(var i=list.length-start,ret=new Array(i);i--;)ret[i]=list[i+start];return ret}function extend(to,from){for(var keys=Object.keys(from),i=keys.length;i--;)to[keys[i]]=from[keys[i]];return to}function isObject(obj){return null!==obj&&"object"==typeof obj}function isPlainObject(obj){return toString.call(obj)===OBJECT_STRING}function def(obj,key,val,enumerable){Object.defineProperty(obj,key,{value:val,enumerable:!!enumerable,writable:!0,configurable:!0})}function _debounce(func,wait){var timeout,args,context,timestamp,result,later=function later(){var last=Date.now()-timestamp;last<wait&&last>=0?timeout=setTimeout(later,wait-last):(timeout=null,result=func.apply(context,args),timeout||(context=args=null))};return function(){return context=this,args=arguments,timestamp=Date.now(),timeout||(timeout=setTimeout(later,wait)),result}}function indexOf(arr,obj){for(var i=arr.length;i--;)if(arr[i]===obj)return i;return-1}function cancellable(fn){var cb=function cb(){if(!cb.cancelled)return fn.apply(this,arguments)};return cb.cancel=function(){cb.cancelled=!0},cb}function looseEqual(a,b){return a==b||!(!isObject(a)||!isObject(b))&&JSON.stringify(a)===JSON.stringify(b)}function isNative(Ctor){return/native code/.test(Ctor.toString())}function Cache(limit){this.size=0,this.limit=limit,this.head=this.tail=void 0,this._keymap=Object.create(null)}function peek(){return str.charCodeAt(index+1)}function next(){return str.charCodeAt(++index)}function eof(){return index>=len}function eatSpace(){for(;peek()===spaceChr;)next()}function isStringStart(chr){return chr===doubleChr||chr===singleChr}function isExpStart(chr){return expStartChr[chr]}function isExpEnd(start,chr){return expChrPair[start]===chr}function parseString(){for(var chr,stringQuote=next();!eof();)if(chr=next(),chr===escapeChr)next();else if(chr===stringQuote)break}function parseSpecialExp(chr){for(var inExp=0,startChr=chr;!eof();)if(chr=peek(),isStringStart(chr))parseString();else if(startChr===chr&&inExp++,isExpEnd(startChr,chr)&&inExp--,next(),0===inExp)break}function parseExpression(){for(var start=index;!eof();)if(chr=peek(),isStringStart(chr))parseString();else if(isExpStart(chr))parseSpecialExp(chr);else if(chr===pipeChr){if(next(),chr=peek(),chr!==pipeChr){state!==startState&&state!==filterArgState||(state=filterState);break}next()}else{if(chr===spaceChr&&(state===filterNameState||state===filterArgState)){eatSpace();break}state===filterState&&(state=filterNameState),next()}return str.slice(start+1,index)||null}function parseFilterList(){for(var filters=[];!eof();)filters.push(parseFilter());return filters}function parseFilter(){var args,filter={};return state=filterState,filter.name=parseExpression().trim(),state=filterArgState,args=parseFilterArguments(),args.length&&(filter.args=args),filter}function parseFilterArguments(){for(var args=[];!eof()&&state!==filterState;){var arg=parseExpression();if(!arg)break;args.push(processFilterArg(arg))}return args}function processFilterArg(arg){if(reservedArgRE.test(arg))return{value:toNumber(arg),dynamic:!1};var stripped=stripQuotes(arg),dynamic=stripped===arg;return{value:dynamic?arg:stripped,dynamic:dynamic}}function parseDirective(s){var hit=cache$1.get(s);if(hit)return hit;str=s,dir={},len=str.length,index=-1,chr="",state=startState;var filters;return str.indexOf("|")<0?dir.expression=str.trim():(dir.expression=parseExpression().trim(),filters=parseFilterList(),filters.length&&(dir.filters=filters)),cache$1.put(s,dir),dir}function escapeRegex(str){return str.replace(regexEscapeRE,"\\$&")}function compileRegex(){var open=escapeRegex(config.delimiters[0]),close=escapeRegex(config.delimiters[1]),unsafeOpen=escapeRegex(config.unsafeDelimiters[0]),unsafeClose=escapeRegex(config.unsafeDelimiters[1]);tagRE=new RegExp(unsafeOpen+"((?:.|\\n)+?)"+unsafeClose+"|"+open+"((?:.|\\n)+?)"+close,"g"),htmlRE=new RegExp("^"+unsafeOpen+"((?:.|\\n)+?)"+unsafeClose+"$"),cache=new Cache(1e3)}function parseText(text){cache||compileRegex();var hit=cache.get(text);if(hit)return hit;if(!tagRE.test(text))return null;for(var match,index,html,value,first,oneTime,tokens=[],lastIndex=tagRE.lastIndex=0;match=tagRE.exec(text);)index=match.index,index>lastIndex&&tokens.push({value:text.slice(lastIndex,index)}),html=htmlRE.test(match[0]),value=html?match[1]:match[2],first=value.charCodeAt(0),oneTime=42===first,value=oneTime?value.slice(1):value,tokens.push({tag:!0,value:value.trim(),html:html,oneTime:oneTime}),lastIndex=index+match[0].length;return lastIndex<text.length&&tokens.push({value:text.slice(lastIndex)}),cache.put(text,tokens),tokens}function tokensToExp(tokens,vm){return tokens.length>1?tokens.map(function(token){return formatToken(token,vm)}).join("+"):formatToken(tokens[0],vm,!0)}function formatToken(token,vm,single){return token.tag?token.oneTime&&vm?'"'+vm.$eval(token.value)+'"':inlineFilters(token.value,single):'"'+token.value+'"'}function inlineFilters(exp,single){if(filterRE.test(exp)){var dir=parseDirective(exp);return dir.filters?"this._applyFilters("+dir.expression+",null,"+JSON.stringify(dir.filters)+",false)":"("+exp+")"}return single?exp:"("+exp+")"}function appendWithTransition(el,target,vm,cb){applyTransition(el,1,function(){target.appendChild(el)},vm,cb)}function beforeWithTransition(el,target,vm,cb){applyTransition(el,1,function(){before(el,target)},vm,cb)}function removeWithTransition(el,vm,cb){applyTransition(el,-1,function(){remove(el)},vm,cb)}function applyTransition(el,direction,op,vm,cb){var transition=el.__v_trans;if(!transition||!transition.hooks&&!transitionEndEvent||!vm._isCompiled||vm.$parent&&!vm.$parent._isCompiled)return op(),void(cb&&cb());var action=direction>0?"enter":"leave";transition[action](op,cb)}function query(el){if("string"==typeof el){var selector=el;el=document.querySelector(el),el||"production"!==process.env.NODE_ENV&&warn("Cannot find element: "+selector)}return el}function inDoc(node){if(!node)return!1;var doc=node.ownerDocument.documentElement,parent=node.parentNode;return doc===node||doc===parent||!(!parent||1!==parent.nodeType||!doc.contains(parent))}function getAttr(node,_attr){var val=node.getAttribute(_attr);return null!==val&&node.removeAttribute(_attr),val}function getBindAttr(node,name){var val=getAttr(node,":"+name);return null===val&&(val=getAttr(node,"v-bind:"+name)),val}function hasBindAttr(node,name){return node.hasAttribute(name)||node.hasAttribute(":"+name)||node.hasAttribute("v-bind:"+name)}function before(el,target){target.parentNode.insertBefore(el,target)}function after(el,target){target.nextSibling?before(el,target.nextSibling):target.parentNode.appendChild(el)}function remove(el){el.parentNode.removeChild(el)}function prepend(el,target){target.firstChild?before(el,target.firstChild):target.appendChild(el)}function replace(target,el){var parent=target.parentNode;parent&&parent.replaceChild(el,target)}function on(el,event,cb,useCapture){el.addEventListener(event,cb,useCapture)}function off(el,event,cb){el.removeEventListener(event,cb)}function getClass(el){var classname=el.className;return"object"==typeof classname&&(classname=classname.baseVal||""),classname}function setClass(el,cls){isIE9&&!/svg$/.test(el.namespaceURI)?el.className=cls:el.setAttribute("class",cls)}function addClass(el,cls){if(el.classList)el.classList.add(cls);else{var cur=" "+getClass(el)+" ";cur.indexOf(" "+cls+" ")<0&&setClass(el,(cur+cls).trim())}}function removeClass(el,cls){if(el.classList)el.classList.remove(cls);else{for(var cur=" "+getClass(el)+" ",tar=" "+cls+" ";cur.indexOf(tar)>=0;)cur=cur.replace(tar," ");setClass(el,cur.trim())}el.className||el.removeAttribute("class")}function extractContent(el,asFragment){var child,rawContent;if(isTemplate(el)&&isFragment(el.content)&&(el=el.content),el.hasChildNodes())for(trimNode(el),rawContent=asFragment?document.createDocumentFragment():document.createElement("div");child=el.firstChild;)rawContent.appendChild(child);return rawContent}function trimNode(node){for(var child;child=node.firstChild,isTrimmable(child);)node.removeChild(child);for(;child=node.lastChild,isTrimmable(child);)node.removeChild(child)}function isTrimmable(node){return node&&(3===node.nodeType&&!node.data.trim()||8===node.nodeType)}function isTemplate(el){return el.tagName&&"template"===el.tagName.toLowerCase()}function createAnchor(content,persist){var anchor=config.debug?document.createComment(content):document.createTextNode(persist?" ":"");return anchor.__v_anchor=!0,anchor}function findRef(node){if(node.hasAttributes())for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var name=attrs[i].name;if(refRE.test(name))return camelize(name.replace(refRE,""))}}function mapNodeRange(node,end,op){for(var next;node!==end;)next=node.nextSibling,op(node),node=next;op(end)}function removeNodeRange(start,end,vm,frag,cb){function onRemoved(){if(removed++,done&&removed>=nodes.length){for(var i=0;i<nodes.length;i++)frag.appendChild(nodes[i]);cb&&cb()}}var done=!1,removed=0,nodes=[];mapNodeRange(start,end,function(node){node===end&&(done=!0),nodes.push(node),removeWithTransition(node,vm,onRemoved)})}function isFragment(node){return node&&11===node.nodeType}function getOuterHTML(el){if(el.outerHTML)return el.outerHTML;var container=document.createElement("div");return container.appendChild(el.cloneNode(!0)),container.innerHTML}function checkComponentAttr(el,options){var tag=el.tagName.toLowerCase(),hasAttrs=el.hasAttributes();if(commonTagRE.test(tag)||reservedTagRE.test(tag)){if(hasAttrs)return getIsBinding(el,options)}else{if(resolveAsset(options,"components",tag))return{id:tag};var is=hasAttrs&&getIsBinding(el,options);if(is)return is;if("production"!==process.env.NODE_ENV){var expectedTag=options._componentNameMap&&options._componentNameMap[tag];expectedTag?warn("Unknown custom element: <"+tag+"> - did you mean <"+expectedTag+">? HTML is case-insensitive, remember to use kebab-case in templates."):isUnknownElement(el,tag)&&warn("Unknown custom element: <"+tag+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function getIsBinding(el,options){var exp=el.getAttribute("is");if(null!=exp){if(resolveAsset(options,"components",exp))return el.removeAttribute("is"),{id:exp}}else if(exp=getBindAttr(el,"is"),null!=exp)return{id:exp,dynamic:!0}}function mergeData(to,from){var key,toVal,fromVal;for(key in from)toVal=to[key],fromVal=from[key],hasOwn(to,key)?isObject(toVal)&&isObject(fromVal)&&mergeData(toVal,fromVal):set(to,key,fromVal);return to}function mergeAssets(parentVal,childVal){var res=Object.create(parentVal||null);return childVal?extend(res,guardArrayAssets(childVal)):res}function guardComponents(options){if(options.components){var def,components=options.components=guardArrayAssets(options.components),ids=Object.keys(components);if("production"!==process.env.NODE_ENV)var map=options._componentNameMap={};for(var i=0,l=ids.length;i<l;i++){var key=ids[i];commonTagRE.test(key)||reservedTagRE.test(key)?"production"!==process.env.NODE_ENV&&warn("Do not use built-in or reserved HTML elements as component id: "+key):("production"!==process.env.NODE_ENV&&(map[key.replace(/-/g,"").toLowerCase()]=hyphenate(key)),def=components[key],isPlainObject(def)&&(components[key]=Vue.extend(def)))}}}function guardProps(options){var i,val,props=options.props;if(isArray(props))for(options.props={},i=props.length;i--;)val=props[i],"string"==typeof val?options.props[val]=null:val.name&&(options.props[val.name]=val);else if(isPlainObject(props)){var keys=Object.keys(props);for(i=keys.length;i--;)val=props[keys[i]],"function"==typeof val&&(props[keys[i]]={type:val})}}function guardArrayAssets(assets){if(isArray(assets)){for(var asset,res={},i=assets.length;i--;){asset=assets[i];var id="function"==typeof asset?asset.options&&asset.options.name||asset.id:asset.name||asset.id;id?res[id]=asset:"production"!==process.env.NODE_ENV&&warn('Array-syntax assets must provide a "name" or "id" field.')}return res}return assets}function mergeOptions(parent,child,vm){function mergeField(key){var strat=strats[key]||defaultStrat;options[key]=strat(parent[key],child[key],vm,key)}guardComponents(child),guardProps(child),"production"!==process.env.NODE_ENV&&child.propsData&&!vm&&warn("propsData can only be used as an instantiation option.");var key,options={};if(child.extends&&(parent="function"==typeof child.extends?mergeOptions(parent,child.extends.options,vm):mergeOptions(parent,child.extends,vm)),child.mixins)for(var i=0,l=child.mixins.length;i<l;i++){var mixin=child.mixins[i],mixinOptions=mixin.prototype instanceof Vue?mixin.options:mixin;parent=mergeOptions(parent,mixinOptions,vm)}for(key in parent)mergeField(key);for(key in child)hasOwn(parent,key)||mergeField(key);return options}function resolveAsset(options,type,id,warnMissing){if("string"==typeof id){var camelizedId,assets=options[type],res=assets[id]||assets[camelizedId=camelize(id)]||assets[camelizedId.charAt(0).toUpperCase()+camelizedId.slice(1)];return"production"!==process.env.NODE_ENV&&warnMissing&&!res&&warn("Failed to resolve "+type.slice(0,-1)+": "+id,options),res}}function Dep(){this.id=uid$1++,this.subs=[]}function withoutConversion(fn){shouldConvert=!1,fn(),shouldConvert=!0}function Observer(value){if(this.value=value,this.dep=new Dep,def(value,"__ob__",this),isArray(value)){var augment=hasProto?protoAugment:copyAugment;augment(value,arrayMethods,arrayKeys),this.observeArray(value)}else this.walk(value)}function protoAugment(target,src){target.__proto__=src}function copyAugment(target,src,keys){for(var i=0,l=keys.length;i<l;i++){var key=keys[i];def(target,key,src[key])}}function observe(value,vm){if(value&&"object"==typeof value){var ob;return hasOwn(value,"__ob__")&&value.__ob__ instanceof Observer?ob=value.__ob__:shouldConvert&&(isArray(value)||isPlainObject(value))&&Object.isExtensible(value)&&!value._isVue&&(ob=new Observer(value)),ob&&vm&&ob.addVm(vm),ob}}function defineReactive(obj,key,val){var dep=new Dep,property=Object.getOwnPropertyDescriptor(obj,key);if(!property||property.configurable!==!1){var getter=property&&property.get,setter=property&&property.set,childOb=observe(val);Object.defineProperty(obj,key,{enumerable:!0,configurable:!0,get:function(){var value=getter?getter.call(obj):val;if(Dep.target&&(dep.depend(),childOb&&childOb.dep.depend(),isArray(value)))for(var e,i=0,l=value.length;i<l;i++)e=value[i],e&&e.__ob__&&e.__ob__.dep.depend();return value},set:function(newVal){var value=getter?getter.call(obj):val;newVal!==value&&(setter?setter.call(obj,newVal):val=newVal,childOb=observe(newVal),dep.notify())}})}}function initMixin(Vue){Vue.prototype._init=function(options){options=options||{},this.$el=null,this.$parent=options.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=uid++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=options._context||this.$parent,this._scope=options._scope,this._frag=options._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),options=this.$options=mergeOptions(this.constructor.options,options,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),options.el&&this.$mount(options.el)}}function getPathCharType(ch){if(void 0===ch)return"eof";var code=ch.charCodeAt(0);switch(code){case 91:case 93:case 46:case 34:case 39:case 48:return ch;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return code>=97&&code<=122||code>=65&&code<=90?"ident":code>=49&&code<=57?"number":"else"}function formatSubPath(path){var trimmed=path.trim();return("0"!==path.charAt(0)||!isNaN(path))&&(isLiteral(trimmed)?stripQuotes(trimmed):"*"+trimmed)}function parse(path){function maybeUnescapeQuote(){var nextChar=path[index+1];if(mode===IN_SINGLE_QUOTE&&"'"===nextChar||mode===IN_DOUBLE_QUOTE&&'"'===nextChar)return index++,newChar="\\"+nextChar,actions[APPEND](),!0}var c,newChar,key,type,transition,action,typeMap,keys=[],index=-1,mode=BEFORE_PATH,subPathDepth=0,actions=[];for(actions[PUSH]=function(){void 0!==key&&(keys.push(key),key=void 0)},actions[APPEND]=function(){void 0===key?key=newChar:key+=newChar},actions[INC_SUB_PATH_DEPTH]=function(){actions[APPEND](),subPathDepth++},actions[PUSH_SUB_PATH]=function(){if(subPathDepth>0)subPathDepth--,mode=IN_SUB_PATH,actions[APPEND]();else{if(subPathDepth=0,key=formatSubPath(key),key===!1)return!1;actions[PUSH]()}};null!=mode;)if(index++,c=path[index],"\\"!==c||!maybeUnescapeQuote()){if(type=getPathCharType(c),typeMap=pathStateMachine[mode],transition=typeMap[type]||typeMap.else||ERROR,transition===ERROR)return;if(mode=transition[0],action=actions[transition[1]],action&&(newChar=transition[2],newChar=void 0===newChar?c:newChar,action()===!1))return;if(mode===AFTER_PATH)return keys.raw=path,keys}}function parsePath(path){var hit=pathCache.get(path);return hit||(hit=parse(path),hit&&pathCache.put(path,hit)),hit}function getPath(obj,path){return parseExpression$1(path).get(obj)}function setPath(obj,path,val){var original=obj;if("string"==typeof path&&(path=parse(path)),!path||!isObject(obj))return!1;for(var last,key,i=0,l=path.length;i<l;i++)last=obj,key=path[i],"*"===key.charAt(0)&&(key=parseExpression$1(key.slice(1)).get.call(original,original)),i<l-1?(obj=obj[key],isObject(obj)||(obj={},"production"!==process.env.NODE_ENV&&last._isVue&&warnNonExistent(path,last),set(last,key,obj))):isArray(obj)?obj.$set(key,val):key in obj?obj[key]=val:("production"!==process.env.NODE_ENV&&obj._isVue&&warnNonExistent(path,obj),set(obj,key,val));return!0}function noop(){}function save(str,isString){var i=saved.length;return saved[i]=isString?str.replace(newlineRE,"\\n"):str,'"'+i+'"'}function rewrite(raw){var c=raw.charAt(0),path=raw.slice(1);return allowedKeywordsRE.test(path)?raw:(path=path.indexOf('"')>-1?path.replace(restoreRE,restore):path,c+"scope."+path)}function restore(str,i){return saved[i]}function compileGetter(exp){improperKeywordsRE.test(exp)&&"production"!==process.env.NODE_ENV&&warn("Avoid using reserved keywords in expression: "+exp),saved.length=0;var body=exp.replace(saveRE,save).replace(wsRE,"");return body=(" "+body).replace(identRE,rewrite).replace(restoreRE,restore),makeGetterFn(body)}function makeGetterFn(body){try{return new Function("scope","return "+body+";")}catch(e){return"production"!==process.env.NODE_ENV&&warn(e.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+body),noop}}function compileSetter(exp){var path=parsePath(exp);return path?function(scope,val){setPath(scope,path,val)}:void("production"!==process.env.NODE_ENV&&warn("Invalid setter expression: "+exp))}function parseExpression$1(exp,needSet){exp=exp.trim();var hit=expressionCache.get(exp);if(hit)return needSet&&!hit.set&&(hit.set=compileSetter(hit.exp)),hit;var res={exp:exp};return res.get=isSimplePath(exp)&&exp.indexOf("[")<0?makeGetterFn("scope."+exp):compileGetter(exp),needSet&&(res.set=compileSetter(exp)),expressionCache.put(exp,res),res}function isSimplePath(exp){return pathTestRE.test(exp)&&!literalValueRE$1.test(exp)&&"Math."!==exp.slice(0,5)}function resetBatcherState(){queue.length=0,userQueue.length=0,has={},circular={},waiting=!1}function flushBatcherQueue(){for(var _again=!0;_again;)_again=!1,runBatcherQueue(queue),runBatcherQueue(userQueue),queue.length?_again=!0:(devtools&&config.devtools&&devtools.emit("flush"),resetBatcherState())}function runBatcherQueue(queue){for(var i=0;i<queue.length;i++){var watcher=queue[i],id=watcher.id;if(has[id]=null,watcher.run(),"production"!==process.env.NODE_ENV&&null!=has[id]&&(circular[id]=(circular[id]||0)+1,circular[id]>config._maxUpdateCount)){warn('You may have an infinite update loop for watcher with expression "'+watcher.expression+'"',watcher.vm);break}}queue.length=0}function pushWatcher(watcher){var id=watcher.id;if(null==has[id]){var q=watcher.user?userQueue:queue;has[id]=q.length,q.push(watcher),waiting||(waiting=!0,nextTick(flushBatcherQueue))}}function Watcher(vm,expOrFn,cb,options){options&&extend(this,options);var isFn="function"==typeof expOrFn;if(this.vm=vm,vm._watchers.push(this),this.expression=expOrFn,this.cb=cb,this.id=++uid$2,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new _Set,this.newDepIds=new _Set,this.prevError=null,isFn)this.getter=expOrFn,this.setter=void 0;else{var res=parseExpression$1(expOrFn,this.twoWay);this.getter=res.get,this.setter=res.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function traverse(val,seen){var i=void 0,keys=void 0;seen||(seen=seenObjects,seen.clear());var isA=isArray(val),isO=isObject(val);if((isA||isO)&&Object.isExtensible(val)){if(val.__ob__){var depId=val.__ob__.dep.id;if(seen.has(depId))return;seen.add(depId)}if(isA)for(i=val.length;i--;)traverse(val[i],seen);else if(isO)for(keys=Object.keys(val),i=keys.length;i--;)traverse(val[keys[i]],seen)}}function isRealTemplate(node){return isTemplate(node)&&isFragment(node.content)}function stringToFragment(templateString,raw){var cacheKey=raw?templateString:templateString.trim(),hit=templateCache.get(cacheKey);if(hit)return hit;var frag=document.createDocumentFragment(),tagMatch=templateString.match(tagRE$1),entityMatch=entityRE.test(templateString),commentMatch=commentRE.test(templateString);if(tagMatch||entityMatch||commentMatch){var tag=tagMatch&&tagMatch[1],wrap=map[tag]||map.efault,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],node=document.createElement("div");for(node.innerHTML=prefix+templateString+suffix;depth--;)node=node.lastChild;for(var child;child=node.firstChild;)frag.appendChild(child)}else frag.appendChild(document.createTextNode(templateString));return raw||trimNode(frag),templateCache.put(cacheKey,frag),frag}function nodeToFragment(node){if(isRealTemplate(node))return stringToFragment(node.innerHTML);if("SCRIPT"===node.tagName)return stringToFragment(node.textContent);for(var child,clonedNode=cloneNode(node),frag=document.createDocumentFragment();child=clonedNode.firstChild;)frag.appendChild(child);return trimNode(frag),frag}function cloneNode(node){if(!node.querySelectorAll)return node.cloneNode();var i,original,cloned,res=node.cloneNode(!0);if(hasBrokenTemplate){var tempClone=res;if(isRealTemplate(node)&&(node=node.content,tempClone=res.content),original=node.querySelectorAll("template"),original.length)for(cloned=tempClone.querySelectorAll("template"),i=cloned.length;i--;)cloned[i].parentNode.replaceChild(cloneNode(original[i]),cloned[i]);
}if(hasTextareaCloneBug)if("TEXTAREA"===node.tagName)res.value=node.value;else if(original=node.querySelectorAll("textarea"),original.length)for(cloned=res.querySelectorAll("textarea"),i=cloned.length;i--;)cloned[i].value=original[i].value;return res}function parseTemplate(template,shouldClone,raw){var node,frag;return isFragment(template)?(trimNode(template),shouldClone?cloneNode(template):template):("string"==typeof template?raw||"#"!==template.charAt(0)?frag=stringToFragment(template,raw):(frag=idSelectorCache.get(template),frag||(node=document.getElementById(template.slice(1)),node&&(frag=nodeToFragment(node),idSelectorCache.put(template,frag)))):template.nodeType&&(frag=nodeToFragment(template)),frag&&shouldClone?cloneNode(frag):frag)}function Fragment(linker,vm,frag,host,scope,parentFrag){this.children=[],this.childFrags=[],this.vm=vm,this.scope=scope,this.inserted=!1,this.parentFrag=parentFrag,parentFrag&&parentFrag.childFrags.push(this),this.unlink=linker(vm,frag,host,scope,this);var single=this.single=1===frag.childNodes.length&&!frag.childNodes[0].__v_anchor;single?(this.node=frag.childNodes[0],this.before=singleBefore,this.remove=singleRemove):(this.node=createAnchor("fragment-start"),this.end=createAnchor("fragment-end"),this.frag=frag,prepend(this.node,frag),frag.appendChild(this.end),this.before=multiBefore,this.remove=multiRemove),this.node.__v_frag=this}function singleBefore(target,withTransition){this.inserted=!0;var method=withTransition!==!1?beforeWithTransition:before;method(this.node,target,this.vm),inDoc(this.node)&&this.callHook(attach)}function singleRemove(){this.inserted=!1;var shouldCallRemove=inDoc(this.node),self=this;this.beforeRemove(),removeWithTransition(this.node,this.vm,function(){shouldCallRemove&&self.callHook(detach),self.destroy()})}function multiBefore(target,withTransition){this.inserted=!0;var vm=this.vm,method=withTransition!==!1?beforeWithTransition:before;mapNodeRange(this.node,this.end,function(node){method(node,target,vm)}),inDoc(this.node)&&this.callHook(attach)}function multiRemove(){this.inserted=!1;var self=this,shouldCallRemove=inDoc(this.node);this.beforeRemove(),removeNodeRange(this.node,this.end,this.vm,this.frag,function(){shouldCallRemove&&self.callHook(detach),self.destroy()})}function attach(child){!child._isAttached&&inDoc(child.$el)&&child._callHook("attached")}function detach(child){child._isAttached&&!inDoc(child.$el)&&child._callHook("detached")}function FragmentFactory(vm,el){this.vm=vm;var template,isString="string"==typeof el;isString||isTemplate(el)&&!el.hasAttribute("v-if")?template=parseTemplate(el,!0):(template=document.createDocumentFragment(),template.appendChild(el)),this.template=template;var linker,cid=vm.constructor.cid;if(cid>0){var cacheId=cid+(isString?el:getOuterHTML(el));linker=linkerCache.get(cacheId),linker||(linker=compile(template,vm.$options,!0),linkerCache.put(cacheId,linker))}else linker=compile(template,vm.$options,!0);this.linker=linker}function findPrevFrag(frag,anchor,id){var el=frag.node.previousSibling;if(el){for(frag=el.__v_frag;!(frag&&frag.forId===id&&frag.inserted||el===anchor);){if(el=el.previousSibling,!el)return;frag=el.__v_frag}return frag}}function range(n){for(var i=-1,ret=new Array(Math.floor(n));++i<n;)ret[i]=i;return ret}function getTrackByKey(index,key,value,trackByKey){return trackByKey?"$index"===trackByKey?index:trackByKey.charAt(0).match(/\w/)?getPath(value,trackByKey):value[trackByKey]:key||value}function findVmFromFrag(frag){var node=frag.node;if(frag.end)for(;!node.__vue__&&node!==frag.end&&node.nextSibling;)node=node.nextSibling;return node.__vue__}function getValue(el,multi,init){for(var op,val,selected,res=multi?[]:null,i=0,l=el.options.length;i<l;i++)if(op=el.options[i],selected=init?op.hasAttribute("selected"):op.selected){if(val=op.hasOwnProperty("_value")?op._value:op.value,!multi)return val;res.push(val)}return res}function indexOf$1(arr,val){for(var i=arr.length;i--;)if(looseEqual(arr[i],val))return i;return-1}function keyFilter(handler,keys){var codes=keys.map(function(key){var charCode=key.charCodeAt(0);return charCode>47&&charCode<58?parseInt(key,10):1===key.length&&(charCode=key.toUpperCase().charCodeAt(0),charCode>64&&charCode<91)?charCode:keyCodes[key]});return codes=[].concat.apply([],codes),function(e){if(codes.indexOf(e.keyCode)>-1)return handler.call(this,e)}}function stopFilter(handler){return function(e){return e.stopPropagation(),handler.call(this,e)}}function preventFilter(handler){return function(e){return e.preventDefault(),handler.call(this,e)}}function selfFilter(handler){return function(e){if(e.target===e.currentTarget)return handler.call(this,e)}}function normalize(prop){if(propCache[prop])return propCache[prop];var res=prefix(prop);return propCache[prop]=propCache[res]=res,res}function prefix(prop){prop=hyphenate(prop);var camel=camelize(prop),upper=camel.charAt(0).toUpperCase()+camel.slice(1);testEl||(testEl=document.createElement("div"));var prefixed,i=prefixes.length;if("filter"!==camel&&camel in testEl.style)return{kebab:prop,camel:camel};for(;i--;)if(prefixed=camelPrefixes[i]+upper,prefixed in testEl.style)return{kebab:prefixes[i]+prop,camel:prefixed}}function normalize$1(value){var res=[];if(isArray(value))for(var i=0,l=value.length;i<l;i++){var _key=value[i];if(_key)if("string"==typeof _key)res.push(_key);else for(var k in _key)_key[k]&&res.push(k)}else if(isObject(value))for(var key in value)value[key]&&res.push(key);return res}function apply(el,key,fn){if(key=key.trim(),key.indexOf(" ")===-1)return void fn(el,key);for(var keys=key.split(/\s+/),i=0,l=keys.length;i<l;i++)fn(el,keys[i])}function callActivateHooks(hooks,vm,cb){function next(){++called>=total?cb():hooks[called].call(vm,next)}var total=hooks.length,called=0;hooks[0].call(vm,next)}function compileProps(el,propOptions,vm){for(var options,name,attr,value,path,parsed,prop,props=[],propsData=vm.$options.propsData,names=Object.keys(propOptions),i=names.length;i--;)if(name=names[i],options=propOptions[name]||empty,"production"===process.env.NODE_ENV||"$data"!==name)if(path=camelize(name),identRE$1.test(path)){if(prop={name:name,path:path,options:options,mode:propBindingModes.ONE_WAY,raw:null},attr=hyphenate(name),null===(value=getBindAttr(el,attr))&&(null!==(value=getBindAttr(el,attr+".sync"))?prop.mode=propBindingModes.TWO_WAY:null!==(value=getBindAttr(el,attr+".once"))&&(prop.mode=propBindingModes.ONE_TIME)),null!==value)prop.raw=value,parsed=parseDirective(value),value=parsed.expression,prop.filters=parsed.filters,isLiteral(value)&&!parsed.filters?prop.optimizedLiteral=!0:(prop.dynamic=!0,"production"===process.env.NODE_ENV||prop.mode!==propBindingModes.TWO_WAY||settablePathRE.test(value)||(prop.mode=propBindingModes.ONE_WAY,warn("Cannot bind two-way prop with non-settable parent path: "+value,vm))),prop.parentPath=value,"production"!==process.env.NODE_ENV&&options.twoWay&&prop.mode!==propBindingModes.TWO_WAY&&warn('Prop "'+name+'" expects a two-way binding type.',vm);else if(null!==(value=getAttr(el,attr)))prop.raw=value;else if(propsData&&null!==(value=propsData[name]||propsData[path]))prop.raw=value;else if("production"!==process.env.NODE_ENV){var lowerCaseName=path.toLowerCase();value=/[A-Z\-]/.test(name)&&(el.getAttribute(lowerCaseName)||el.getAttribute(":"+lowerCaseName)||el.getAttribute("v-bind:"+lowerCaseName)||el.getAttribute(":"+lowerCaseName+".once")||el.getAttribute("v-bind:"+lowerCaseName+".once")||el.getAttribute(":"+lowerCaseName+".sync")||el.getAttribute("v-bind:"+lowerCaseName+".sync")),value?warn("Possible usage error for prop `"+lowerCaseName+"` - did you mean `"+attr+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",vm):!options.required||propsData&&(name in propsData||path in propsData)||warn("Missing required prop: "+name,vm)}props.push(prop)}else"production"!==process.env.NODE_ENV&&warn('Invalid prop key: "'+name+'". Prop keys must be valid identifiers.',vm);else warn("Do not use $data as prop.",vm);return makePropsLinkFn(props)}function makePropsLinkFn(props){return function(vm,scope){vm._props={};for(var prop,path,options,value,raw,inlineProps=vm.$options.propsData,i=props.length;i--;)if(prop=props[i],raw=prop.raw,path=prop.path,options=prop.options,vm._props[path]=prop,inlineProps&&hasOwn(inlineProps,path)&&initProp(vm,prop,inlineProps[path]),null===raw)initProp(vm,prop,void 0);else if(prop.dynamic)prop.mode===propBindingModes.ONE_TIME?(value=(scope||vm._context||vm).$get(prop.parentPath),initProp(vm,prop,value)):vm._context?vm._bindDir({name:"prop",def:propDef,prop:prop},null,null,scope):initProp(vm,prop,vm.$get(prop.parentPath));else if(prop.optimizedLiteral){var stripped=stripQuotes(raw);value=stripped===raw?toBoolean(toNumber(raw)):stripped,initProp(vm,prop,value)}else value=options.type===Boolean&&(""===raw||raw===hyphenate(prop.name))||raw,initProp(vm,prop,value)}}function processPropValue(vm,prop,rawValue,fn){var isSimple=prop.dynamic&&isSimplePath(prop.parentPath),value=rawValue;void 0===value&&(value=getPropDefaultValue(vm,prop)),value=coerceProp(prop,value,vm);var coerced=value!==rawValue;assertProp(prop,value,vm)||(value=void 0),isSimple&&!coerced?withoutConversion(function(){fn(value)}):fn(value)}function initProp(vm,prop,value){processPropValue(vm,prop,value,function(value){defineReactive(vm,prop.path,value)})}function updateProp(vm,prop,value){processPropValue(vm,prop,value,function(value){vm[prop.path]=value})}function getPropDefaultValue(vm,prop){var options=prop.options;if(!hasOwn(options,"default"))return options.type!==Boolean&&void 0;var def=options.default;return isObject(def)&&"production"!==process.env.NODE_ENV&&warn('Invalid default value for prop "'+prop.name+'": Props with type Object/Array must use a factory function to return the default value.',vm),"function"==typeof def&&options.type!==Function?def.call(vm):def}function assertProp(prop,value,vm){if(!prop.options.required&&(null===prop.raw||null==value))return!0;var options=prop.options,type=options.type,valid=!type,expectedTypes=[];if(type){isArray(type)||(type=[type]);for(var i=0;i<type.length&&!valid;i++){var assertedType=assertType(value,type[i]);expectedTypes.push(assertedType.expectedType),valid=assertedType.valid}}if(!valid)return"production"!==process.env.NODE_ENV&&warn('Invalid prop: type check failed for prop "'+prop.name+'". Expected '+expectedTypes.map(formatType).join(", ")+", got "+formatValue(value)+".",vm),!1;var validator=options.validator;return!(validator&&!validator(value))||("production"!==process.env.NODE_ENV&&warn('Invalid prop: custom validator check failed for prop "'+prop.name+'".',vm),!1)}function coerceProp(prop,value,vm){var coerce=prop.options.coerce;return coerce?"function"==typeof coerce?coerce(value):("production"!==process.env.NODE_ENV&&warn('Invalid coerce for prop "'+prop.name+'": expected function, got '+typeof coerce+".",vm),value):value}function assertType(value,type){var valid,expectedType;return type===String?(expectedType="string",valid=typeof value===expectedType):type===Number?(expectedType="number",valid=typeof value===expectedType):type===Boolean?(expectedType="boolean",valid=typeof value===expectedType):type===Function?(expectedType="function",valid=typeof value===expectedType):type===Object?(expectedType="object",valid=isPlainObject(value)):type===Array?(expectedType="array",valid=isArray(value)):valid=value instanceof type,{valid:valid,expectedType:expectedType}}function formatType(type){return type?type.charAt(0).toUpperCase()+type.slice(1):"custom type"}function formatValue(val){return Object.prototype.toString.call(val).slice(8,-1)}function pushJob(job){queue$1.push(job),queued||(queued=!0,nextTick(flush))}function flush(){for(var f=document.documentElement.offsetHeight,i=0;i<queue$1.length;i++)queue$1[i]();return queue$1=[],queued=!1,f}function Transition(el,id,hooks,vm){this.id=id,this.el=el,this.enterClass=hooks&&hooks.enterClass||id+"-enter",this.leaveClass=hooks&&hooks.leaveClass||id+"-leave",this.hooks=hooks,this.vm=vm,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=hooks&&hooks.type,"production"!==process.env.NODE_ENV&&this.type&&this.type!==TYPE_TRANSITION&&this.type!==TYPE_ANIMATION&&warn('invalid CSS transition type for transition="'+this.id+'": '+this.type,vm);var self=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(m){self[m]=bind(self[m],self)})}function isHidden(el){if(/svg$/.test(el.namespaceURI)){var rect=el.getBoundingClientRect();return!(rect.width||rect.height)}return!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}function compile(el,options,partial){var nodeLinkFn=partial||!options._asComponent?compileNode(el,options):null,childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||isScript(el)||!el.hasChildNodes()?null:compileNodeList(el.childNodes,options);return function(vm,el,host,scope,frag){var childNodes=toArray(el.childNodes),dirs=linkAndCapture(function(){nodeLinkFn&&nodeLinkFn(vm,el,host,scope,frag),childLinkFn&&childLinkFn(vm,childNodes,host,scope,frag)},vm);return makeUnlinkFn(vm,dirs)}}function linkAndCapture(linker,vm){"production"===process.env.NODE_ENV&&(vm._directives=[]);var originalDirCount=vm._directives.length;linker();var dirs=vm._directives.slice(originalDirCount);sortDirectives(dirs);for(var i=0,l=dirs.length;i<l;i++)dirs[i]._bind();return dirs}function sortDirectives(dirs){if(0!==dirs.length){var i,j,k,l,groupedMap={},index=0,priorities=[];for(i=0,j=dirs.length;i<j;i++){var dir=dirs[i],priority=dir.descriptor.def.priority||DEFAULT_PRIORITY,array=groupedMap[priority];array||(array=groupedMap[priority]=[],priorities.push(priority)),array.push(dir)}for(priorities.sort(function(a,b){return a>b?-1:a===b?0:1}),i=0,j=priorities.length;i<j;i++){var group=groupedMap[priorities[i]];for(k=0,l=group.length;k<l;k++)dirs[index++]=group[k]}}}function makeUnlinkFn(vm,dirs,context,contextDirs){function unlink(destroying){teardownDirs(vm,dirs,destroying),context&&contextDirs&&teardownDirs(context,contextDirs)}return unlink.dirs=dirs,unlink}function teardownDirs(vm,dirs,destroying){for(var i=dirs.length;i--;)dirs[i]._teardown(),"production"===process.env.NODE_ENV||destroying||vm._directives.$remove(dirs[i])}function compileAndLinkProps(vm,el,props,scope){var propsLinkFn=compileProps(el,props,vm),propDirs=linkAndCapture(function(){propsLinkFn(vm,scope)},vm);return makeUnlinkFn(vm,propDirs)}function compileRoot(el,options,contextOptions){var contextLinkFn,replacerLinkFn,containerAttrs=options._containerAttrs,replacerAttrs=options._replacerAttrs;if(11!==el.nodeType)options._asComponent?(containerAttrs&&contextOptions&&(contextLinkFn=compileDirectives(containerAttrs,contextOptions)),replacerAttrs&&(replacerLinkFn=compileDirectives(replacerAttrs,options))):replacerLinkFn=compileDirectives(el.attributes,options);else if("production"!==process.env.NODE_ENV&&containerAttrs){var names=containerAttrs.filter(function(attr){return attr.name.indexOf("_v-")<0&&!onRE.test(attr.name)&&"slot"!==attr.name}).map(function(attr){return'"'+attr.name+'"'});if(names.length){var plural=names.length>1,componentName=options.el.tagName.toLowerCase();"component"===componentName&&options.name&&(componentName+=":"+options.name),warn("Attribute"+(plural?"s ":" ")+names.join(", ")+(plural?" are":" is")+" ignored on component <"+componentName+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return options._containerAttrs=options._replacerAttrs=null,function(vm,el,scope){var contextDirs,context=vm._context;context&&contextLinkFn&&(contextDirs=linkAndCapture(function(){contextLinkFn(context,el,null,scope)},context));var selfDirs=linkAndCapture(function(){replacerLinkFn&&replacerLinkFn(vm,el)},vm);return makeUnlinkFn(vm,selfDirs,context,contextDirs)}}function compileNode(node,options){var type=node.nodeType;return 1!==type||isScript(node)?3===type&&node.data.trim()?compileTextNode(node,options):null:compileElement(node,options)}function compileElement(el,options){if("TEXTAREA"===el.tagName){if(null!==getAttr(el,"v-pre"))return skip;var tokens=parseText(el.value);tokens&&(el.setAttribute(":value",tokensToExp(tokens)),el.value="")}var linkFn,hasAttrs=el.hasAttributes(),attrs=hasAttrs&&toArray(el.attributes);return hasAttrs&&(linkFn=checkTerminalDirectives(el,attrs,options)),linkFn||(linkFn=checkElementDirectives(el,options)),linkFn||(linkFn=checkComponent(el,options)),!linkFn&&hasAttrs&&(linkFn=compileDirectives(attrs,options)),linkFn}function compileTextNode(node,options){if(node._skip)return removeText;var tokens=parseText(node.wholeText);if(!tokens)return null;for(var next=node.nextSibling;next&&3===next.nodeType;)next._skip=!0,next=next.nextSibling;for(var el,token,frag=document.createDocumentFragment(),i=0,l=tokens.length;i<l;i++)token=tokens[i],el=token.tag?processTextToken(token,options):document.createTextNode(token.value),frag.appendChild(el);return makeTextNodeLinkFn(tokens,frag,options)}function removeText(vm,node){remove(node)}function processTextToken(token,options){function setTokenType(type){if(!token.descriptor){var parsed=parseDirective(token.value);token.descriptor={name:type,def:directives[type],expression:parsed.expression,filters:parsed.filters}}}var el;return token.oneTime?el=document.createTextNode(token.value):token.html?(el=document.createComment("v-html"),setTokenType("html")):(el=document.createTextNode(" "),setTokenType("text")),el}function makeTextNodeLinkFn(tokens,frag){return function(vm,el,host,scope){for(var token,value,node,fragClone=frag.cloneNode(!0),childNodes=toArray(fragClone.childNodes),i=0,l=tokens.length;i<l;i++)token=tokens[i],value=token.value,token.tag&&(node=childNodes[i],token.oneTime?(value=(scope||vm).$eval(value),token.html?replace(node,parseTemplate(value,!0)):node.data=_toString(value)):vm._bindDir(token.descriptor,node,host,scope));replace(el,fragClone)}}function compileNodeList(nodeList,options){for(var nodeLinkFn,childLinkFn,node,linkFns=[],i=0,l=nodeList.length;i<l;i++)node=nodeList[i],nodeLinkFn=compileNode(node,options),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||"SCRIPT"===node.tagName||!node.hasChildNodes()?null:compileNodeList(node.childNodes,options),linkFns.push(nodeLinkFn,childLinkFn);return linkFns.length?makeChildLinkFn(linkFns):null}function makeChildLinkFn(linkFns){return function(vm,nodes,host,scope,frag){for(var node,nodeLinkFn,childrenLinkFn,i=0,n=0,l=linkFns.length;i<l;n++){node=nodes[n],nodeLinkFn=linkFns[i++],childrenLinkFn=linkFns[i++];var childNodes=toArray(node.childNodes);nodeLinkFn&&nodeLinkFn(vm,node,host,scope,frag),childrenLinkFn&&childrenLinkFn(vm,childNodes,host,scope,frag)}}}function checkElementDirectives(el,options){var tag=el.tagName.toLowerCase();if(!commonTagRE.test(tag)){var def=resolveAsset(options,"elementDirectives",tag);return def?makeTerminalNodeLinkFn(el,tag,"",options,def):void 0}}function checkComponent(el,options){var component=checkComponentAttr(el,options);if(component){var ref=findRef(el),descriptor={name:"component",ref:ref,expression:component.id,def:internalDirectives.component,modifiers:{literal:!component.dynamic}},componentLinkFn=function(vm,el,host,scope,frag){ref&&defineReactive((scope||vm).$refs,ref,null),vm._bindDir(descriptor,el,host,scope,frag)};return componentLinkFn.terminal=!0,componentLinkFn}}function checkTerminalDirectives(el,attrs,options){if(null!==getAttr(el,"v-pre"))return skip;if(el.hasAttribute("v-else")){var prev=el.previousElementSibling;if(prev&&prev.hasAttribute("v-if"))return skip}for(var attr,name,value,modifiers,matched,dirName,rawName,arg,def,termDef,i=0,j=attrs.length;i<j;i++)attr=attrs[i],name=attr.name.replace(modifierRE,""),(matched=name.match(dirAttrRE))&&(def=resolveAsset(options,"directives",matched[1]),def&&def.terminal&&(!termDef||(def.priority||DEFAULT_TERMINAL_PRIORITY)>termDef.priority)&&(termDef=def,rawName=attr.name,modifiers=parseModifiers(attr.name),value=attr.value,dirName=matched[1],arg=matched[2]));return termDef?makeTerminalNodeLinkFn(el,dirName,value,options,termDef,rawName,arg,modifiers):void 0}function skip(){}function makeTerminalNodeLinkFn(el,dirName,value,options,def,rawName,arg,modifiers){var parsed=parseDirective(value),descriptor={name:dirName,arg:arg,expression:parsed.expression,filters:parsed.filters,raw:value,attr:rawName,modifiers:modifiers,def:def};"for"!==dirName&&"router-view"!==dirName||(descriptor.ref=findRef(el));var fn=function(vm,el,host,scope,frag){descriptor.ref&&defineReactive((scope||vm).$refs,descriptor.ref,null),vm._bindDir(descriptor,el,host,scope,frag)};return fn.terminal=!0,fn}function compileDirectives(attrs,options){function pushDir(dirName,def,interpTokens){var hasOneTimeToken=interpTokens&&hasOneTime(interpTokens),parsed=!hasOneTimeToken&&parseDirective(value);dirs.push({name:dirName,attr:rawName,raw:rawValue,def:def,arg:arg,modifiers:modifiers,expression:parsed&&parsed.expression,filters:parsed&&parsed.filters,interp:interpTokens,hasOneTime:hasOneTimeToken})}for(var attr,name,value,rawName,rawValue,dirName,arg,modifiers,dirDef,tokens,matched,i=attrs.length,dirs=[];i--;)if(attr=attrs[i],name=rawName=attr.name,value=rawValue=attr.value,tokens=parseText(value),arg=null,modifiers=parseModifiers(name),name=name.replace(modifierRE,""),tokens)value=tokensToExp(tokens),arg=name,pushDir("bind",directives.bind,tokens),"production"!==process.env.NODE_ENV&&"class"===name&&Array.prototype.some.call(attrs,function(attr){return":class"===attr.name||"v-bind:class"===attr.name})&&warn('class="'+rawValue+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',options);else if(transitionRE.test(name))modifiers.literal=!bindRE.test(name),pushDir("transition",internalDirectives.transition);else if(onRE.test(name))arg=name.replace(onRE,""),pushDir("on",directives.on);else if(bindRE.test(name))dirName=name.replace(bindRE,""),"style"===dirName||"class"===dirName?pushDir(dirName,internalDirectives[dirName]):(arg=dirName,pushDir("bind",directives.bind));else if(matched=name.match(dirAttrRE)){if(dirName=matched[1],arg=matched[2],"else"===dirName)continue;dirDef=resolveAsset(options,"directives",dirName,!0),dirDef&&pushDir(dirName,dirDef)}if(dirs.length)return makeNodeLinkFn(dirs)}function parseModifiers(name){var res=Object.create(null),match=name.match(modifierRE);if(match)for(var i=match.length;i--;)res[match[i].slice(1)]=!0;return res}function makeNodeLinkFn(directives){return function(vm,el,host,scope,frag){for(var i=directives.length;i--;)vm._bindDir(directives[i],el,host,scope,frag)}}function hasOneTime(tokens){for(var i=tokens.length;i--;)if(tokens[i].oneTime)return!0}function isScript(el){return"SCRIPT"===el.tagName&&(!el.hasAttribute("type")||"text/javascript"===el.getAttribute("type"))}function transclude(el,options){return options&&(options._containerAttrs=extractAttrs(el)),isTemplate(el)&&(el=parseTemplate(el)),options&&(options._asComponent&&!options.template&&(options.template="<slot></slot>"),options.template&&(options._content=extractContent(el),el=transcludeTemplate(el,options))),isFragment(el)&&(prepend(createAnchor("v-start",!0),el),el.appendChild(createAnchor("v-end",!0))),el}function transcludeTemplate(el,options){var template=options.template,frag=parseTemplate(template,!0);if(frag){var replacer=frag.firstChild;if(!replacer)return frag;var tag=replacer.tagName&&replacer.tagName.toLowerCase();return options.replace?(el===document.body&&"production"!==process.env.NODE_ENV&&warn("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),frag.childNodes.length>1||1!==replacer.nodeType||"component"===tag||resolveAsset(options,"components",tag)||hasBindAttr(replacer,"is")||resolveAsset(options,"elementDirectives",tag)||replacer.hasAttribute("v-for")||replacer.hasAttribute("v-if")?frag:(options._replacerAttrs=extractAttrs(replacer),mergeAttrs(el,replacer),replacer)):(el.appendChild(frag),el)}"production"!==process.env.NODE_ENV&&warn("Invalid template option: "+template)}function extractAttrs(el){if(1===el.nodeType&&el.hasAttributes())return toArray(el.attributes)}function mergeAttrs(from,to){for(var name,value,attrs=from.attributes,i=attrs.length;i--;)name=attrs[i].name,value=attrs[i].value,to.hasAttribute(name)||specialCharRE.test(name)?"class"===name&&!parseText(value)&&(value=value.trim())&&value.split(/\s+/).forEach(function(cls){addClass(to,cls)}):to.setAttribute(name,value)}function resolveSlots(vm,content){if(content){for(var el,name,contents=vm._slotContents=Object.create(null),i=0,l=content.children.length;i<l;i++)el=content.children[i],(name=el.getAttribute("slot"))&&(contents[name]||(contents[name]=[])).push(el),"production"!==process.env.NODE_ENV&&getBindAttr(el,"slot")&&warn('The "slot" attribute must be static.',vm.$parent);for(name in contents)contents[name]=extractFragment(contents[name],content);if(content.hasChildNodes()){var nodes=content.childNodes;if(1===nodes.length&&3===nodes[0].nodeType&&!nodes[0].data.trim())return;contents.default=extractFragment(content.childNodes,content)}}}function extractFragment(nodes,parent){var frag=document.createDocumentFragment();nodes=toArray(nodes);for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];!isTemplate(node)||node.hasAttribute("v-if")||node.hasAttribute("v-for")||(parent.removeChild(node),node=parseTemplate(node,!0)),frag.appendChild(node)}return frag}function stateMixin(Vue){function noop(){}function makeComputedGetter(getter,owner){var watcher=new Watcher(owner,getter,null,{lazy:!0});return function(){return watcher.dirty&&watcher.evaluate(),Dep.target&&watcher.depend(),watcher.value}}Object.defineProperty(Vue.prototype,"$data",{get:function(){return this._data},set:function(newData){newData!==this._data&&this._setData(newData)}}),Vue.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},Vue.prototype._initProps=function(){var options=this.$options,el=options.el,props=options.props;props&&!el&&"production"!==process.env.NODE_ENV&&warn("Props will not be compiled if no `el` option is provided at instantiation.",this),el=options.el=query(el),this._propsUnlinkFn=el&&1===el.nodeType&&props?compileAndLinkProps(this,el,props,this._scope):null},Vue.prototype._initData=function(){var dataFn=this.$options.data,data=this._data=dataFn?dataFn():{};isPlainObject(data)||(data={},"production"!==process.env.NODE_ENV&&warn("data functions should return an object.",this));var i,key,props=this._props,keys=Object.keys(data);for(i=keys.length;i--;)key=keys[i],props&&hasOwn(props,key)?"production"!==process.env.NODE_ENV&&warn('Data field "'+key+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(key);observe(data,this)},Vue.prototype._setData=function(newData){newData=newData||{};var oldData=this._data;this._data=newData;var keys,key,i;for(keys=Object.keys(oldData),i=keys.length;i--;)key=keys[i],key in newData||this._unproxy(key);for(keys=Object.keys(newData),i=keys.length;i--;)key=keys[i],hasOwn(this,key)||this._proxy(key);oldData.__ob__.removeVm(this),observe(newData,this),this._digest()},Vue.prototype._proxy=function(key){if(!isReserved(key)){var self=this;Object.defineProperty(self,key,{configurable:!0,enumerable:!0,get:function(){return self._data[key]},set:function(val){self._data[key]=val}})}},Vue.prototype._unproxy=function(key){isReserved(key)||delete this[key]},Vue.prototype._digest=function(){for(var i=0,l=this._watchers.length;i<l;i++)this._watchers[i].update(!0)},Vue.prototype._initComputed=function(){var computed=this.$options.computed;if(computed)for(var key in computed){var userDef=computed[key],def={enumerable:!0,configurable:!0};"function"==typeof userDef?(def.get=makeComputedGetter(userDef,this),def.set=noop):(def.get=userDef.get?userDef.cache!==!1?makeComputedGetter(userDef.get,this):bind(userDef.get,this):noop,def.set=userDef.set?bind(userDef.set,this):noop),Object.defineProperty(this,key,def)}},Vue.prototype._initMethods=function(){var methods=this.$options.methods;if(methods)for(var key in methods)this[key]=bind(methods[key],this)},Vue.prototype._initMeta=function(){var metas=this.$options._meta;if(metas)for(var key in metas)defineReactive(this,key,metas[key])}}function eventsMixin(Vue){function registerComponentEvents(vm,el){for(var name,value,handler,attrs=el.attributes,i=0,l=attrs.length;i<l;i++)name=attrs[i].name,eventRE.test(name)&&(name=name.replace(eventRE,""),value=attrs[i].value,isSimplePath(value)&&(value+=".apply(this, $arguments)"),handler=(vm._scope||vm._context).$eval(value,!0),handler._fromParent=!0,vm.$on(name.replace(eventRE),handler))}function registerCallbacks(vm,action,hash){if(hash){var handlers,key,i,j;for(key in hash)if(handlers=hash[key],isArray(handlers))for(i=0,j=handlers.length;i<j;i++)register(vm,action,key,handlers[i]);else register(vm,action,key,handlers)}}function register(vm,action,key,handler,options){var type=typeof handler;if("function"===type)vm[action](key,handler,options);else if("string"===type){var methods=vm.$options.methods,method=methods&&methods[handler];method?vm[action](key,method,options):"production"!==process.env.NODE_ENV&&warn('Unknown method: "'+handler+'" when registering callback for '+action+': "'+key+'".',vm)}else handler&&"object"===type&&register(vm,action,key,handler.handler,handler)}function onAttached(){this._isAttached||(this._isAttached=!0,this.$children.forEach(callAttach))}function callAttach(child){!child._isAttached&&inDoc(child.$el)&&child._callHook("attached")}function onDetached(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(callDetach))}function callDetach(child){child._isAttached&&!inDoc(child.$el)&&child._callHook("detached")}Vue.prototype._initEvents=function(){var options=this.$options;options._asComponent&&registerComponentEvents(this,options.el),registerCallbacks(this,"$on",options.events),registerCallbacks(this,"$watch",options.watch)},Vue.prototype._initDOMHooks=function(){this.$on("hook:attached",onAttached),this.$on("hook:detached",onDetached)},Vue.prototype._callHook=function(hook){this.$emit("pre-hook:"+hook);var handlers=this.$options[hook];if(handlers)for(var i=0,j=handlers.length;i<j;i++)handlers[i].call(this);this.$emit("hook:"+hook)}}function noop$1(){}function Directive(descriptor,vm,el,host,scope,frag){this.vm=vm,this.el=el,this.descriptor=descriptor,this.name=descriptor.name,this.expression=descriptor.expression,this.arg=descriptor.arg,this.modifiers=descriptor.modifiers,this.filters=descriptor.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=host,this._scope=scope,this._frag=frag,"production"!==process.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function lifecycleMixin(Vue){Vue.prototype._updateRef=function(remove){var ref=this.$options._ref;if(ref){var refs=(this._scope||this._context).$refs;remove?refs[ref]===this&&(refs[ref]=null):refs[ref]=this}},Vue.prototype._compile=function(el){var options=this.$options,original=el;if(el=transclude(el,options),this._initElement(el),1!==el.nodeType||null===getAttr(el,"v-pre")){var contextOptions=this._context&&this._context.$options,rootLinker=compileRoot(el,options,contextOptions);resolveSlots(this,options._content);var contentLinkFn,ctor=this.constructor;options._linkerCachable&&(contentLinkFn=ctor.linker,contentLinkFn||(contentLinkFn=ctor.linker=compile(el,options)));var rootUnlinkFn=rootLinker(this,el,this._scope),contentUnlinkFn=contentLinkFn?contentLinkFn(this,el):compile(el,options)(this,el);this._unlinkFn=function(){
rootUnlinkFn(),contentUnlinkFn(!0)},options.replace&&replace(original,el),this._isCompiled=!0,this._callHook("compiled")}},Vue.prototype._initElement=function(el){isFragment(el)?(this._isFragment=!0,this.$el=this._fragmentStart=el.firstChild,this._fragmentEnd=el.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=el):this.$el=el,this.$el.__vue__=this,this._callHook("beforeCompile")},Vue.prototype._bindDir=function(descriptor,node,host,scope,frag){this._directives.push(new Directive(descriptor,this,node,host,scope,frag))},Vue.prototype._destroy=function(remove,deferCleanup){if(this._isBeingDestroyed)return void(deferCleanup||this._cleanup());var destroyReady,pendingRemoval,self=this,cleanupIfPossible=function(){!destroyReady||pendingRemoval||deferCleanup||self._cleanup()};remove&&this.$el&&(pendingRemoval=!0,this.$remove(function(){pendingRemoval=!1,cleanupIfPossible()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var i,parent=this.$parent;for(parent&&!parent._isBeingDestroyed&&(parent.$children.$remove(this),this._updateRef(!0)),i=this.$children.length;i--;)this.$children[i].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),i=this._watchers.length;i--;)this._watchers[i].teardown();this.$el&&(this.$el.__vue__=null),destroyReady=!0,cleanupIfPossible()},Vue.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function miscMixin(Vue){Vue.prototype._applyFilters=function(value,oldValue,filters,write){var filter,fn,args,arg,offset,i,l,j,k;for(i=0,l=filters.length;i<l;i++)if(filter=filters[write?l-i-1:i],fn=resolveAsset(this.$options,"filters",filter.name,!0),fn&&(fn=write?fn.write:fn.read||fn,"function"==typeof fn)){if(args=write?[value,oldValue]:[value],offset=write?2:1,filter.args)for(j=0,k=filter.args.length;j<k;j++)arg=filter.args[j],args[j+offset]=arg.dynamic?this.$get(arg.value):arg.value;value=fn.apply(this,args)}return value},Vue.prototype._resolveComponent=function(value,cb){var factory;if(factory="function"==typeof value?value:resolveAsset(this.$options,"components",value,!0))if(factory.options)cb(factory);else if(factory.resolved)cb(factory.resolved);else if(factory.requested)factory.pendingCallbacks.push(cb);else{factory.requested=!0;var cbs=factory.pendingCallbacks=[cb];factory.call(this,function(res){isPlainObject(res)&&(res=Vue.extend(res)),factory.resolved=res;for(var i=0,l=cbs.length;i<l;i++)cbs[i](res)},function(reason){"production"!==process.env.NODE_ENV&&warn("Failed to resolve async component"+("string"==typeof value?": "+value:"")+". "+(reason?"\nReason: "+reason:""))})}}}function dataAPI(Vue){function clean(obj){return JSON.parse(JSON.stringify(obj))}Vue.prototype.$get=function(exp,asStatement){var res=parseExpression$1(exp);if(res){if(asStatement){var self=this;return function(){self.$arguments=toArray(arguments);var result=res.get.call(self,self);return self.$arguments=null,result}}try{return res.get.call(this,this)}catch(e){}}},Vue.prototype.$set=function(exp,val){var res=parseExpression$1(exp,!0);res&&res.set&&res.set.call(this,this,val)},Vue.prototype.$delete=function(key){del(this._data,key)},Vue.prototype.$watch=function(expOrFn,cb,options){var parsed,vm=this;"string"==typeof expOrFn&&(parsed=parseDirective(expOrFn),expOrFn=parsed.expression);var watcher=new Watcher(vm,expOrFn,cb,{deep:options&&options.deep,sync:options&&options.sync,filters:parsed&&parsed.filters,user:!options||options.user!==!1});return options&&options.immediate&&cb.call(vm,watcher.value),function(){watcher.teardown()}},Vue.prototype.$eval=function(text,asStatement){if(filterRE$1.test(text)){var dir=parseDirective(text),val=this.$get(dir.expression,asStatement);return dir.filters?this._applyFilters(val,null,dir.filters):val}return this.$get(text,asStatement)},Vue.prototype.$interpolate=function(text){var tokens=parseText(text),vm=this;return tokens?1===tokens.length?vm.$eval(tokens[0].value)+"":tokens.map(function(token){return token.tag?vm.$eval(token.value):token.value}).join(""):text},Vue.prototype.$log=function(path){var data=path?getPath(this._data,path):this._data;if(data&&(data=clean(data)),!path){var key;for(key in this.$options.computed)data[key]=clean(this[key]);if(this._props)for(key in this._props)data[key]=clean(this[key])}console.log(data)}}function domAPI(Vue){function insert(vm,target,cb,withTransition,op1,op2){target=query(target);var targetIsDetached=!inDoc(target),op=withTransition===!1||targetIsDetached?op1:op2,shouldCallHook=!targetIsDetached&&!vm._isAttached&&!inDoc(vm.$el);return vm._isFragment?(mapNodeRange(vm._fragmentStart,vm._fragmentEnd,function(node){op(node,target,vm)}),cb&&cb()):op(vm.$el,target,vm,cb),shouldCallHook&&vm._callHook("attached"),vm}function query(el){return"string"==typeof el?document.querySelector(el):el}function append(el,target,vm,cb){target.appendChild(el),cb&&cb()}function beforeWithCb(el,target,vm,cb){before(el,target),cb&&cb()}function removeWithCb(el,vm,cb){remove(el),cb&&cb()}Vue.prototype.$nextTick=function(fn){nextTick(fn,this)},Vue.prototype.$appendTo=function(target,cb,withTransition){return insert(this,target,cb,withTransition,append,appendWithTransition)},Vue.prototype.$prependTo=function(target,cb,withTransition){return target=query(target),target.hasChildNodes()?this.$before(target.firstChild,cb,withTransition):this.$appendTo(target,cb,withTransition),this},Vue.prototype.$before=function(target,cb,withTransition){return insert(this,target,cb,withTransition,beforeWithCb,beforeWithTransition)},Vue.prototype.$after=function(target,cb,withTransition){return target=query(target),target.nextSibling?this.$before(target.nextSibling,cb,withTransition):this.$appendTo(target.parentNode,cb,withTransition),this},Vue.prototype.$remove=function(cb,withTransition){if(!this.$el.parentNode)return cb&&cb();var inDocument=this._isAttached&&inDoc(this.$el);inDocument||(withTransition=!1);var self=this,realCb=function(){inDocument&&self._callHook("detached"),cb&&cb()};if(this._isFragment)removeNodeRange(this._fragmentStart,this._fragmentEnd,this,this._fragment,realCb);else{var op=withTransition===!1?removeWithCb:removeWithTransition;op(this.$el,this,realCb)}return this}}function eventsAPI(Vue){function modifyListenerCount(vm,event,count){var parent=vm.$parent;if(parent&&count&&!hookRE.test(event))for(;parent;)parent._eventsCount[event]=(parent._eventsCount[event]||0)+count,parent=parent.$parent}Vue.prototype.$on=function(event,fn){return(this._events[event]||(this._events[event]=[])).push(fn),modifyListenerCount(this,event,1),this},Vue.prototype.$once=function(event,fn){function on(){self.$off(event,on),fn.apply(this,arguments)}var self=this;return on.fn=fn,this.$on(event,on),this},Vue.prototype.$off=function(event,fn){var cbs;if(!arguments.length){if(this.$parent)for(event in this._events)cbs=this._events[event],cbs&&modifyListenerCount(this,event,-cbs.length);return this._events={},this}if(cbs=this._events[event],!cbs)return this;if(1===arguments.length)return modifyListenerCount(this,event,-cbs.length),this._events[event]=null,this;for(var cb,i=cbs.length;i--;)if(cb=cbs[i],cb===fn||cb.fn===fn){modifyListenerCount(this,event,-1),cbs.splice(i,1);break}return this},Vue.prototype.$emit=function(event){var isSource="string"==typeof event;event=isSource?event:event.name;var cbs=this._events[event],shouldPropagate=isSource||!cbs;if(cbs){cbs=cbs.length>1?toArray(cbs):cbs;var hasParentCbs=isSource&&cbs.some(function(cb){return cb._fromParent});hasParentCbs&&(shouldPropagate=!1);for(var args=toArray(arguments,1),i=0,l=cbs.length;i<l;i++){var cb=cbs[i],res=cb.apply(this,args);res!==!0||hasParentCbs&&!cb._fromParent||(shouldPropagate=!0)}}return shouldPropagate},Vue.prototype.$broadcast=function(event){var isSource="string"==typeof event;if(event=isSource?event:event.name,this._eventsCount[event]){var children=this.$children,args=toArray(arguments);isSource&&(args[0]={name:event,source:this});for(var i=0,l=children.length;i<l;i++){var child=children[i],shouldPropagate=child.$emit.apply(child,args);shouldPropagate&&child.$broadcast.apply(child,args)}return this}},Vue.prototype.$dispatch=function(event){var shouldPropagate=this.$emit.apply(this,arguments);if(shouldPropagate){var parent=this.$parent,args=toArray(arguments);for(args[0]={name:event,source:this};parent;)shouldPropagate=parent.$emit.apply(parent,args),parent=shouldPropagate?parent.$parent:null;return this}};var hookRE=/^hook:/}function lifecycleAPI(Vue){function ready(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}Vue.prototype.$mount=function(el){return this._isCompiled?void("production"!==process.env.NODE_ENV&&warn("$mount() should be called only once.",this)):(el=query(el),el||(el=document.createElement("div")),this._compile(el),this._initDOMHooks(),inDoc(this.$el)?(this._callHook("attached"),ready.call(this)):this.$once("hook:attached",ready),this)},Vue.prototype.$destroy=function(remove,deferCleanup){this._destroy(remove,deferCleanup)},Vue.prototype.$compile=function(el,host,scope,frag){return compile(el,this.$options,!0)(this,el,host,scope,frag)}}function Vue(options){this._init(options)}function limitBy(arr,n,offset){return offset=offset?parseInt(offset,10):0,n=toNumber(n),"number"==typeof n?arr.slice(offset,offset+n):arr}function filterBy(arr,search,delimiter){if(arr=convertArray(arr),null==search)return arr;if("function"==typeof search)return arr.filter(search);search=(""+search).toLowerCase();for(var item,key,val,j,n="in"===delimiter?3:2,keys=Array.prototype.concat.apply([],toArray(arguments,n)),res=[],i=0,l=arr.length;i<l;i++)if(item=arr[i],val=item&&item.$value||item,j=keys.length){for(;j--;)if(key=keys[j],"$key"===key&&contains(item.$key,search)||contains(getPath(val,key),search)){res.push(item);break}}else contains(item,search)&&res.push(item);return res}function orderBy(arr){function baseCompare(a,b,sortKeyIndex){var sortKey=sortKeys[sortKeyIndex];return sortKey&&("$key"!==sortKey&&(isObject(a)&&"$value"in a&&(a=a.$value),isObject(b)&&"$value"in b&&(b=b.$value)),a=isObject(a)?getPath(a,sortKey):a,b=isObject(b)?getPath(b,sortKey):b),a===b?0:a>b?order:-order}var comparator=null,sortKeys=void 0;arr=convertArray(arr);var args=toArray(arguments,1),order=args[args.length-1];"number"==typeof order?(order=order<0?-1:1,args=args.length>1?args.slice(0,-1):args):order=1;var firstArg=args[0];return firstArg?("function"==typeof firstArg?comparator=function(a,b){return firstArg(a,b)*order}:(sortKeys=Array.prototype.concat.apply([],args),comparator=function(a,b,i){return i=i||0,i>=sortKeys.length-1?baseCompare(a,b,i):baseCompare(a,b,i)||comparator(a,b,i+1)}),arr.slice().sort(comparator)):arr}function contains(val,search){var i;if(isPlainObject(val)){var keys=Object.keys(val);for(i=keys.length;i--;)if(contains(val[keys[i]],search))return!0}else if(isArray(val)){for(i=val.length;i--;)if(contains(val[i],search))return!0}else if(null!=val)return val.toString().toLowerCase().indexOf(search)>-1}function installGlobalAPI(Vue){function createClass(name){return new Function("return function "+classify(name)+" (options) { this._init(options) }")()}Vue.options={directives:directives,elementDirectives:elementDirectives,filters:filters,transitions:{},components:{},partials:{},replace:!0},Vue.util=util,Vue.config=config,Vue.set=set,Vue.delete=del,Vue.nextTick=nextTick,Vue.compiler=compiler,Vue.FragmentFactory=FragmentFactory,Vue.internalDirectives=internalDirectives,Vue.parsers={path:path,text:text,template:template,directive:directive,expression:expression},Vue.cid=0;var cid=1;Vue.extend=function(extendOptions){extendOptions=extendOptions||{};var Super=this,isFirstExtend=0===Super.cid;if(isFirstExtend&&extendOptions._Ctor)return extendOptions._Ctor;var name=extendOptions.name||Super.options.name;"production"!==process.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(name)||(warn('Invalid component name: "'+name+'". Component names can only contain alphanumeric characaters and the hyphen.'),name=null));var Sub=createClass(name||"VueComponent");return Sub.prototype=Object.create(Super.prototype),Sub.prototype.constructor=Sub,Sub.cid=cid++,Sub.options=mergeOptions(Super.options,extendOptions),Sub.super=Super,Sub.extend=Super.extend,config._assetTypes.forEach(function(type){Sub[type]=Super[type]}),name&&(Sub.options.components[name]=Sub),isFirstExtend&&(extendOptions._Ctor=Sub),Sub},Vue.use=function(plugin){if(!plugin.installed){var args=toArray(arguments,1);return args.unshift(this),"function"==typeof plugin.install?plugin.install.apply(plugin,args):plugin.apply(null,args),plugin.installed=!0,this}},Vue.mixin=function(mixin){Vue.options=mergeOptions(Vue.options,mixin)},config._assetTypes.forEach(function(type){Vue[type]=function(id,definition){return definition?("production"!==process.env.NODE_ENV&&"component"===type&&(commonTagRE.test(id)||reservedTagRE.test(id))&&warn("Do not use built-in or reserved HTML elements as component id: "+id),"component"===type&&isPlainObject(definition)&&(definition.name||(definition.name=id),definition=Vue.extend(definition)),this.options[type+"s"][id]=definition,definition):this.options[type+"s"][id]}}),extend(Vue.transition,transition)}var hasOwnProperty=Object.prototype.hasOwnProperty,literalValueRE=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,camelizeRE=/-(\w)/g,hyphenateRE=/([^-])([A-Z])/g,classifyRE=/(?:^|[-_\/])(\w)/g,toString=Object.prototype.toString,OBJECT_STRING="[object Object]",isArray=Array.isArray,hasProto="__proto__"in{},inBrowser="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),devtools=inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,UA=inBrowser&&window.navigator.userAgent.toLowerCase(),isIE=UA&&UA.indexOf("trident")>0,isIE9=UA&&UA.indexOf("msie 9.0")>0,isAndroid=UA&&UA.indexOf("android")>0,isIOS=UA&&/iphone|ipad|ipod|ios/.test(UA),transitionProp=void 0,transitionEndEvent=void 0,animationProp=void 0,animationEndEvent=void 0;if(inBrowser&&!isIE9){var isWebkitTrans=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,isWebkitAnim=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;transitionProp=isWebkitTrans?"WebkitTransition":"transition",transitionEndEvent=isWebkitTrans?"webkitTransitionEnd":"transitionend",animationProp=isWebkitAnim?"WebkitAnimation":"animation",animationEndEvent=isWebkitAnim?"webkitAnimationEnd":"animationend"}var nextTick=function(){function nextTickHandler(){pending=!1;var copies=callbacks.slice(0);callbacks.length=0;for(var i=0;i<copies.length;i++)copies[i]()}var callbacks=[],pending=!1,timerFunc=void 0;if("undefined"!=typeof Promise&&isNative(Promise)){var p=Promise.resolve(),noop=function(){};timerFunc=function(){p.then(nextTickHandler),isIOS&&setTimeout(noop)}}else if("undefined"!=typeof MutationObserver){var counter=1,observer=new MutationObserver(nextTickHandler),textNode=document.createTextNode(String(counter));observer.observe(textNode,{characterData:!0}),timerFunc=function(){counter=(counter+1)%2,textNode.data=String(counter)}}else timerFunc=setTimeout;return function(cb,ctx){var func=ctx?function(){cb.call(ctx)}:cb;callbacks.push(func),pending||(pending=!0,timerFunc(nextTickHandler,0))}}(),_Set=void 0;"undefined"!=typeof Set&&isNative(Set)?_Set=Set:(_Set=function(){this.set=Object.create(null)},_Set.prototype.has=function(key){return void 0!==this.set[key]},_Set.prototype.add=function(key){this.set[key]=1},_Set.prototype.clear=function(){this.set=Object.create(null)});var p=Cache.prototype;p.put=function(key,value){var removed,entry=this.get(key,!0);return entry||(this.size===this.limit&&(removed=this.shift()),entry={key:key},this._keymap[key]=entry,this.tail?(this.tail.newer=entry,entry.older=this.tail):this.head=entry,this.tail=entry,this.size++),entry.value=value,removed},p.shift=function(){var entry=this.head;return entry&&(this.head=this.head.newer,this.head.older=void 0,entry.newer=entry.older=void 0,this._keymap[entry.key]=void 0,this.size--),entry},p.get=function(key,returnEntry){var entry=this._keymap[key];if(void 0!==entry)return entry===this.tail?returnEntry?entry:entry.value:(entry.newer&&(entry===this.head&&(this.head=entry.newer),entry.newer.older=entry.older),entry.older&&(entry.older.newer=entry.newer),entry.newer=void 0,entry.older=this.tail,this.tail&&(this.tail.newer=entry),this.tail=entry,returnEntry?entry:entry.value)};var str,dir,len,index,chr,state,cache$1=new Cache(1e3),reservedArgRE=/^in$|^-?\d+/,startState=0,filterState=1,filterNameState=2,filterArgState=3,doubleChr=34,singleChr=39,pipeChr=124,escapeChr=92,spaceChr=32,expStartChr={91:1,123:1,40:1},expChrPair={91:93,123:125,40:41},directive=Object.freeze({parseDirective:parseDirective}),regexEscapeRE=/[-.*+?^${}()|[\]\/\\]/g,cache=void 0,tagRE=void 0,htmlRE=void 0,filterRE=/[^|]\|[^|]/,text=Object.freeze({compileRegex:compileRegex,parseText:parseText,tokensToExp:tokensToExp}),delimiters=["{{","}}"],unsafeDelimiters=["{{{","}}}"],config=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==process.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return delimiters},set:function(val){delimiters=val,compileRegex()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return unsafeDelimiters},set:function(val){unsafeDelimiters=val,compileRegex()},configurable:!0,enumerable:!0}}),warn=void 0,formatComponentName=void 0;"production"!==process.env.NODE_ENV&&!function(){var hasConsole="undefined"!=typeof console;warn=function(msg,vm){hasConsole&&!config.silent&&console.error("[Vue warn]: "+msg+(vm?formatComponentName(vm):""))},formatComponentName=function(vm){var name=vm._isVue?vm.$options.name:vm.name;return name?" (found in component: <"+hyphenate(name)+">)":""}}();var transition=Object.freeze({appendWithTransition:appendWithTransition,beforeWithTransition:beforeWithTransition,removeWithTransition:removeWithTransition,applyTransition:applyTransition}),refRE=/^v-ref:/,commonTagRE=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,reservedTagRE=/^(slot|partial|component)$/i,isUnknownElement=void 0;"production"!==process.env.NODE_ENV&&(isUnknownElement=function(el,tag){return tag.indexOf("-")>-1?el.constructor===window.HTMLUnknownElement||el.constructor===window.HTMLElement:/HTMLUnknownElement/.test(el.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(tag)});var strats=config.optionMergeStrategies=Object.create(null);strats.data=function(parentVal,childVal,vm){return vm?parentVal||childVal?function(){var instanceData="function"==typeof childVal?childVal.call(vm):childVal,defaultData="function"==typeof parentVal?parentVal.call(vm):void 0;return instanceData?mergeData(instanceData,defaultData):defaultData}:void 0:childVal?"function"!=typeof childVal?("production"!==process.env.NODE_ENV&&warn('The "data" option should be a function that returns a per-instance value in component definitions.',vm),parentVal):parentVal?function(){return mergeData(childVal.call(this),parentVal.call(this))}:childVal:parentVal},strats.el=function(parentVal,childVal,vm){if(!vm&&childVal&&"function"!=typeof childVal)return void("production"!==process.env.NODE_ENV&&warn('The "el" option should be a function that returns a per-instance value in component definitions.',vm));var ret=childVal||parentVal;return vm&&"function"==typeof ret?ret.call(vm):ret},strats.init=strats.created=strats.ready=strats.attached=strats.detached=strats.beforeCompile=strats.compiled=strats.beforeDestroy=strats.destroyed=strats.activate=function(parentVal,childVal){return childVal?parentVal?parentVal.concat(childVal):isArray(childVal)?childVal:[childVal]:parentVal},config._assetTypes.forEach(function(type){strats[type+"s"]=mergeAssets}),strats.watch=strats.events=function(parentVal,childVal){if(!childVal)return parentVal;if(!parentVal)return childVal;var ret={};extend(ret,parentVal);for(var key in childVal){var parent=ret[key],child=childVal[key];parent&&!isArray(parent)&&(parent=[parent]),ret[key]=parent?parent.concat(child):[child]}return ret},strats.props=strats.methods=strats.computed=function(parentVal,childVal){if(!childVal)return parentVal;if(!parentVal)return childVal;var ret=Object.create(null);return extend(ret,parentVal),extend(ret,childVal),ret};var defaultStrat=function(parentVal,childVal){return void 0===childVal?parentVal:childVal},uid$1=0;Dep.target=null,Dep.prototype.addSub=function(sub){this.subs.push(sub)},Dep.prototype.removeSub=function(sub){this.subs.$remove(sub)},Dep.prototype.depend=function(){Dep.target.addDep(this)},Dep.prototype.notify=function(){for(var subs=toArray(this.subs),i=0,l=subs.length;i<l;i++)subs[i].update()};var arrayProto=Array.prototype,arrayMethods=Object.create(arrayProto);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(method){var original=arrayProto[method];def(arrayMethods,method,function(){for(var i=arguments.length,args=new Array(i);i--;)args[i]=arguments[i];var inserted,result=original.apply(this,args),ob=this.__ob__;switch(method){case"push":inserted=args;break;case"unshift":inserted=args;break;case"splice":inserted=args.slice(2)}return inserted&&ob.observeArray(inserted),ob.dep.notify(),result})}),def(arrayProto,"$set",function(index,val){return index>=this.length&&(this.length=Number(index)+1),this.splice(index,1,val)[0]}),def(arrayProto,"$remove",function(item){if(this.length){var index=indexOf(this,item);return index>-1?this.splice(index,1):void 0}});var arrayKeys=Object.getOwnPropertyNames(arrayMethods),shouldConvert=!0;Observer.prototype.walk=function(obj){for(var keys=Object.keys(obj),i=0,l=keys.length;i<l;i++)this.convert(keys[i],obj[keys[i]])},Observer.prototype.observeArray=function(items){for(var i=0,l=items.length;i<l;i++)observe(items[i])},Observer.prototype.convert=function(key,val){defineReactive(this.value,key,val)},Observer.prototype.addVm=function(vm){(this.vms||(this.vms=[])).push(vm)},Observer.prototype.removeVm=function(vm){this.vms.$remove(vm)};var util=Object.freeze({defineReactive:defineReactive,set:set,del:del,hasOwn:hasOwn,isLiteral:isLiteral,isReserved:isReserved,_toString:_toString,toNumber:toNumber,toBoolean:toBoolean,stripQuotes:stripQuotes,camelize:camelize,hyphenate:hyphenate,classify:classify,bind:bind,toArray:toArray,extend:extend,isObject:isObject,isPlainObject:isPlainObject,def:def,debounce:_debounce,indexOf:indexOf,cancellable:cancellable,looseEqual:looseEqual,isArray:isArray,hasProto:hasProto,inBrowser:inBrowser,devtools:devtools,isIE:isIE,isIE9:isIE9,isAndroid:isAndroid,isIOS:isIOS,get transitionProp(){return transitionProp},get transitionEndEvent(){return transitionEndEvent},get animationProp(){return animationProp},get animationEndEvent(){return animationEndEvent},nextTick:nextTick,get _Set(){return _Set},query:query,inDoc:inDoc,getAttr:getAttr,getBindAttr:getBindAttr,hasBindAttr:hasBindAttr,before:before,after:after,remove:remove,prepend:prepend,replace:replace,on:on,off:off,setClass:setClass,addClass:addClass,removeClass:removeClass,extractContent:extractContent,trimNode:trimNode,isTemplate:isTemplate,createAnchor:createAnchor,findRef:findRef,mapNodeRange:mapNodeRange,removeNodeRange:removeNodeRange,isFragment:isFragment,getOuterHTML:getOuterHTML,mergeOptions:mergeOptions,resolveAsset:resolveAsset,checkComponentAttr:checkComponentAttr,commonTagRE:commonTagRE,reservedTagRE:reservedTagRE,get warn(){return warn}}),uid=0,pathCache=new Cache(1e3),APPEND=0,PUSH=1,INC_SUB_PATH_DEPTH=2,PUSH_SUB_PATH=3,BEFORE_PATH=0,IN_PATH=1,BEFORE_IDENT=2,IN_IDENT=3,IN_SUB_PATH=4,IN_SINGLE_QUOTE=5,IN_DOUBLE_QUOTE=6,AFTER_PATH=7,ERROR=8,pathStateMachine=[];pathStateMachine[BEFORE_PATH]={ws:[BEFORE_PATH],ident:[IN_IDENT,APPEND],"[":[IN_SUB_PATH],eof:[AFTER_PATH]},pathStateMachine[IN_PATH]={ws:[IN_PATH],".":[BEFORE_IDENT],"[":[IN_SUB_PATH],eof:[AFTER_PATH]},pathStateMachine[BEFORE_IDENT]={ws:[BEFORE_IDENT],ident:[IN_IDENT,APPEND]},pathStateMachine[IN_IDENT]={ident:[IN_IDENT,APPEND],0:[IN_IDENT,APPEND],number:[IN_IDENT,APPEND],ws:[IN_PATH,PUSH],".":[BEFORE_IDENT,PUSH],"[":[IN_SUB_PATH,PUSH],eof:[AFTER_PATH,PUSH]},pathStateMachine[IN_SUB_PATH]={"'":[IN_SINGLE_QUOTE,APPEND],'"':[IN_DOUBLE_QUOTE,APPEND],"[":[IN_SUB_PATH,INC_SUB_PATH_DEPTH],"]":[IN_PATH,PUSH_SUB_PATH],eof:ERROR,else:[IN_SUB_PATH,APPEND]},pathStateMachine[IN_SINGLE_QUOTE]={"'":[IN_SUB_PATH,APPEND],eof:ERROR,else:[IN_SINGLE_QUOTE,APPEND]},pathStateMachine[IN_DOUBLE_QUOTE]={'"':[IN_SUB_PATH,APPEND],eof:ERROR,else:[IN_DOUBLE_QUOTE,APPEND]};var warnNonExistent;"production"!==process.env.NODE_ENV&&(warnNonExistent=function(path,vm){warn('You are setting a non-existent path "'+path.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',vm)});var path=Object.freeze({parsePath:parsePath,getPath:getPath,setPath:setPath}),expressionCache=new Cache(1e3),allowedKeywords="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",allowedKeywordsRE=new RegExp("^("+allowedKeywords.replace(/,/g,"\\b|")+"\\b)"),improperKeywords="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",improperKeywordsRE=new RegExp("^("+improperKeywords.replace(/,/g,"\\b|")+"\\b)"),wsRE=/\s/g,newlineRE=/\n/g,saveRE=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,restoreRE=/"(\d+)"/g,pathTestRE=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,identRE=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,literalValueRE$1=/^(?:true|false|null|undefined|Infinity|NaN)$/,saved=[],expression=Object.freeze({parseExpression:parseExpression$1,isSimplePath:isSimplePath}),queue=[],userQueue=[],has={},circular={},waiting=!1,uid$2=0;Watcher.prototype.get=function(){this.beforeGet();var value,scope=this.scope||this.vm;try{value=this.getter.call(scope,scope)}catch(e){"production"!==process.env.NODE_ENV&&config.warnExpressionErrors&&warn('Error when evaluating expression "'+this.expression+'": '+e.toString(),this.vm)}return this.deep&&traverse(value),this.preProcess&&(value=this.preProcess(value)),this.filters&&(value=scope._applyFilters(value,null,this.filters,!1)),this.postProcess&&(value=this.postProcess(value)),this.afterGet(),value},Watcher.prototype.set=function(value){var scope=this.scope||this.vm;this.filters&&(value=scope._applyFilters(value,this.value,this.filters,!0));try{this.setter.call(scope,scope,value)}catch(e){"production"!==process.env.NODE_ENV&&config.warnExpressionErrors&&warn('Error when evaluating setter "'+this.expression+'": '+e.toString(),this.vm)}var forContext=scope.$forContext;if(forContext&&forContext.alias===this.expression){if(forContext.filters)return void("production"!==process.env.NODE_ENV&&warn("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));forContext._withLock(function(){scope.$key?forContext.rawValue[scope.$key]=value:forContext.rawValue.$set(scope.$index,value)})}},Watcher.prototype.beforeGet=function(){Dep.target=this},Watcher.prototype.addDep=function(dep){var id=dep.id;this.newDepIds.has(id)||(this.newDepIds.add(id),this.newDeps.push(dep),this.depIds.has(id)||dep.addSub(this))},Watcher.prototype.afterGet=function(){Dep.target=null;for(var i=this.deps.length;i--;){var dep=this.deps[i];this.newDepIds.has(dep.id)||dep.removeSub(this)}var tmp=this.depIds;this.depIds=this.newDepIds,this.newDepIds=tmp,this.newDepIds.clear(),tmp=this.deps,this.deps=this.newDeps,this.newDeps=tmp,this.newDeps.length=0},Watcher.prototype.update=function(shallow){this.lazy?this.dirty=!0:this.sync||!config.async?this.run():(this.shallow=this.queued?!!shallow&&this.shallow:!!shallow,this.queued=!0,"production"!==process.env.NODE_ENV&&config.debug&&(this.prevError=new Error("[vue] async stack trace")),pushWatcher(this))},Watcher.prototype.run=function(){if(this.active){var value=this.get();if(value!==this.value||(isObject(value)||this.deep)&&!this.shallow){var oldValue=this.value;this.value=value;var prevError=this.prevError;if("production"!==process.env.NODE_ENV&&config.debug&&prevError){this.prevError=null;try{this.cb.call(this.vm,value,oldValue)}catch(e){throw nextTick(function(){throw prevError},0),e}}else this.cb.call(this.vm,value,oldValue)}this.queued=this.shallow=!1}},Watcher.prototype.evaluate=function(){var current=Dep.target;this.value=this.get(),this.dirty=!1,Dep.target=current},Watcher.prototype.depend=function(){for(var i=this.deps.length;i--;)this.deps[i].depend()},Watcher.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var i=this.deps.length;i--;)this.deps[i].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var seenObjects=new _Set,text$1={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(value){this.el[this.attr]=_toString(value)}},templateCache=new Cache(1e3),idSelectorCache=new Cache(1e3),map={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.g=map.defs=map.symbol=map.use=map.image=map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var tagRE$1=/<([\w:-]+)/,entityRE=/&#?\w+?;/,commentRE=/<!--/,hasBrokenTemplate=function(){if(inBrowser){var a=document.createElement("div");return a.innerHTML="<template>1</template>",!a.cloneNode(!0).firstChild.innerHTML}return!1}(),hasTextareaCloneBug=function(){if(inBrowser){var t=document.createElement("textarea");return t.placeholder="t","t"===t.cloneNode(!0).value}return!1}(),template=Object.freeze({cloneNode:cloneNode,parseTemplate:parseTemplate}),html={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=createAnchor("v-html"),replace(this.el,this.anchor))},update:function(value){value=_toString(value),this.nodes?this.swap(value):this.el.innerHTML=value},swap:function(value){for(var i=this.nodes.length;i--;)remove(this.nodes[i]);var frag=parseTemplate(value,!0,!0);this.nodes=toArray(frag.childNodes),before(frag,this.anchor)}};Fragment.prototype.callHook=function(hook){var i,l;for(i=0,l=this.childFrags.length;i<l;i++)this.childFrags[i].callHook(hook);for(i=0,l=this.children.length;i<l;i++)hook(this.children[i])},Fragment.prototype.beforeRemove=function(){var i,l;for(i=0,l=this.childFrags.length;i<l;i++)this.childFrags[i].beforeRemove(!1);for(i=0,l=this.children.length;i<l;i++)this.children[i].$destroy(!1,!0);var dirs=this.unlink.dirs;for(i=0,l=dirs.length;i<l;i++)dirs[i]._watcher&&dirs[i]._watcher.teardown()},Fragment.prototype.destroy=function(){
this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var linkerCache=new Cache(5e3);FragmentFactory.prototype.create=function(host,scope,parentFrag){var frag=cloneNode(this.template);return new Fragment(this.linker,this.vm,frag,host,scope,parentFrag)};var ON=700,MODEL=800,BIND=850,TRANSITION=1100,EL=1500,COMPONENT=1500,PARTIAL=1750,IF=2100,FOR=2200,SLOT=2300,uid$3=0,vFor={priority:FOR,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){"production"!==process.env.NODE_ENV&&this.el.hasAttribute("v-if")&&warn("<"+this.el.tagName.toLowerCase()+' v-for="'+this.expression+'" v-if="'+this.el.getAttribute("v-if")+'">: Using v-if and v-for on the same element is not recommended - consider filtering the source Array instead.',this.vm);var inMatch=this.expression.match(/(.*) (?:in|of) (.*)/);if(inMatch){var itMatch=inMatch[1].match(/\((.*),(.*)\)/);itMatch?(this.iterator=itMatch[1].trim(),this.alias=itMatch[2].trim()):this.alias=inMatch[1].trim(),this.expression=inMatch[2]}if(!this.alias)return void("production"!==process.env.NODE_ENV&&warn('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++uid$3;var tag=this.el.tagName;this.isOption=("OPTION"===tag||"OPTGROUP"===tag)&&"SELECT"===this.el.parentNode.tagName,this.start=createAnchor("v-for-start"),this.end=createAnchor("v-for-end"),replace(this.el,this.end),before(this.start,this.end),this.cache=Object.create(null),this.factory=new FragmentFactory(this.vm,this.el)},update:function(data){this.diff(data),this.updateRef(),this.updateModel()},diff:function(data){var i,l,frag,key,value,primitive,item=data[0],convertedFromObject=this.fromObject=isObject(item)&&hasOwn(item,"$key")&&hasOwn(item,"$value"),trackByKey=this.params.trackBy,oldFrags=this.frags,frags=this.frags=new Array(data.length),alias=this.alias,iterator=this.iterator,start=this.start,end=this.end,inDocument=inDoc(start),init=!oldFrags;for(i=0,l=data.length;i<l;i++)item=data[i],key=convertedFromObject?item.$key:null,value=convertedFromObject?item.$value:item,primitive=!isObject(value),frag=!init&&this.getCachedFrag(value,i,key),frag?(frag.reused=!0,frag.scope.$index=i,key&&(frag.scope.$key=key),iterator&&(frag.scope[iterator]=null!==key?key:i),(trackByKey||convertedFromObject||primitive)&&withoutConversion(function(){frag.scope[alias]=value})):(frag=this.create(value,alias,i,key),frag.fresh=!init),frags[i]=frag,init&&frag.before(end);if(!init){var removalIndex=0,totalRemoved=oldFrags.length-frags.length;for(this.vm._vForRemoving=!0,i=0,l=oldFrags.length;i<l;i++)frag=oldFrags[i],frag.reused||(this.deleteCachedFrag(frag),this.remove(frag,removalIndex++,totalRemoved,inDocument));this.vm._vForRemoving=!1,removalIndex&&(this.vm._watchers=this.vm._watchers.filter(function(w){return w.active}));var targetPrev,prevEl,currentPrev,insertionIndex=0;for(i=0,l=frags.length;i<l;i++)frag=frags[i],targetPrev=frags[i-1],prevEl=targetPrev?targetPrev.staggerCb?targetPrev.staggerAnchor:targetPrev.end||targetPrev.node:start,frag.reused&&!frag.staggerCb?(currentPrev=findPrevFrag(frag,start,this.id),currentPrev===targetPrev||currentPrev&&findPrevFrag(currentPrev,start,this.id)===targetPrev||this.move(frag,prevEl)):this.insert(frag,insertionIndex++,prevEl,inDocument),frag.reused=frag.fresh=!1}},create:function(value,alias,index,key){var host=this._host,parentScope=this._scope||this.vm,scope=Object.create(parentScope);scope.$refs=Object.create(parentScope.$refs),scope.$els=Object.create(parentScope.$els),scope.$parent=parentScope,scope.$forContext=this,withoutConversion(function(){defineReactive(scope,alias,value)}),defineReactive(scope,"$index",index),key?defineReactive(scope,"$key",key):scope.$key&&def(scope,"$key",null),this.iterator&&defineReactive(scope,this.iterator,null!==key?key:index);var frag=this.factory.create(host,scope,this._frag);return frag.forId=this.id,this.cacheFrag(value,frag,index,key),frag},updateRef:function(){var ref=this.descriptor.ref;if(ref){var refs,hash=(this._scope||this.vm).$refs;this.fromObject?(refs={},this.frags.forEach(function(frag){refs[frag.scope.$key]=findVmFromFrag(frag)})):refs=this.frags.map(findVmFromFrag),hash[ref]=refs}},updateModel:function(){if(this.isOption){var parent=this.start.parentNode,model=parent&&parent.__v_model;model&&model.forceUpdate()}},insert:function(frag,index,prevEl,inDocument){frag.staggerCb&&(frag.staggerCb.cancel(),frag.staggerCb=null);var staggerAmount=this.getStagger(frag,index,null,"enter");if(inDocument&&staggerAmount){var anchor=frag.staggerAnchor;anchor||(anchor=frag.staggerAnchor=createAnchor("stagger-anchor"),anchor.__v_frag=frag),after(anchor,prevEl);var op=frag.staggerCb=cancellable(function(){frag.staggerCb=null,frag.before(anchor),remove(anchor)});setTimeout(op,staggerAmount)}else{var target=prevEl.nextSibling;target||(after(this.end,prevEl),target=this.end),frag.before(target)}},remove:function(frag,index,total,inDocument){if(frag.staggerCb)return frag.staggerCb.cancel(),void(frag.staggerCb=null);var staggerAmount=this.getStagger(frag,index,total,"leave");if(inDocument&&staggerAmount){var op=frag.staggerCb=cancellable(function(){frag.staggerCb=null,frag.remove()});setTimeout(op,staggerAmount)}else frag.remove()},move:function(frag,prevEl){prevEl.nextSibling||this.end.parentNode.appendChild(this.end),frag.before(prevEl.nextSibling,!1)},cacheFrag:function(value,frag,index,key){var id,trackByKey=this.params.trackBy,cache=this.cache,primitive=!isObject(value);key||trackByKey||primitive?(id=getTrackByKey(index,key,value,trackByKey),cache[id]?"$index"!==trackByKey&&"production"!==process.env.NODE_ENV&&this.warnDuplicate(value):cache[id]=frag):(id=this.id,hasOwn(value,id)?null===value[id]?value[id]=frag:"production"!==process.env.NODE_ENV&&this.warnDuplicate(value):Object.isExtensible(value)?def(value,id,frag):"production"!==process.env.NODE_ENV&&warn("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),frag.raw=value},getCachedFrag:function(value,index,key){var frag,trackByKey=this.params.trackBy,primitive=!isObject(value);if(key||trackByKey||primitive){var id=getTrackByKey(index,key,value,trackByKey);frag=this.cache[id]}else frag=value[this.id];return frag&&(frag.reused||frag.fresh)&&"production"!==process.env.NODE_ENV&&this.warnDuplicate(value),frag},deleteCachedFrag:function(frag){var value=frag.raw,trackByKey=this.params.trackBy,scope=frag.scope,index=scope.$index,key=hasOwn(scope,"$key")&&scope.$key,primitive=!isObject(value);if(trackByKey||key||primitive){var id=getTrackByKey(index,key,value,trackByKey);this.cache[id]=null}else value[this.id]=null,frag.raw=null},getStagger:function(frag,index,total,type){type+="Stagger";var trans=frag.node.__v_trans,hooks=trans&&trans.hooks,hook=hooks&&(hooks[type]||hooks.stagger);return hook?hook.call(frag,index,total):index*parseInt(this.params[type]||this.params.stagger,10)},_preProcess:function(value){return this.rawValue=value,value},_postProcess:function(value){if(isArray(value))return value;if(isPlainObject(value)){for(var key,keys=Object.keys(value),i=keys.length,res=new Array(i);i--;)key=keys[i],res[i]={$key:key,$value:value[key]};return res}return"number"!=typeof value||isNaN(value)||(value=range(value)),value||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var frag,i=this.frags.length;i--;)frag=this.frags[i],this.deleteCachedFrag(frag),frag.destroy()}};"production"!==process.env.NODE_ENV&&(vFor.warnDuplicate=function(value){warn('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(value)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var vIf={priority:IF,terminal:!0,bind:function(){var el=this.el;if(el.__vue__)"production"!==process.env.NODE_ENV&&warn('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var next=el.nextElementSibling;next&&null!==getAttr(next,"v-else")&&(remove(next),this.elseEl=next),this.anchor=createAnchor("v-if"),replace(el,this.anchor)}},update:function(value){this.invalid||(value?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new FragmentFactory(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new FragmentFactory(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},show={bind:function(){var next=this.el.nextElementSibling;next&&null!==getAttr(next,"v-else")&&(this.elseEl=next)},update:function(value){this.apply(this.el,value),this.elseEl&&this.apply(this.elseEl,!value)},apply:function(el,value){function toggle(){el.style.display=value?"":"none"}inDoc(el)?applyTransition(el,value?1:-1,toggle,this.vm):toggle()}},text$2={bind:function(){var self=this,el=this.el,isRange="range"===el.type,lazy=this.params.lazy,number=this.params.number,debounce=this.params.debounce,composing=!1;if(isAndroid||isRange||(this.on("compositionstart",function(){composing=!0}),this.on("compositionend",function(){composing=!1,lazy||self.listener()})),this.focused=!1,isRange||lazy||(this.on("focus",function(){self.focused=!0}),this.on("blur",function(){self.focused=!1,self._frag&&!self._frag.inserted||self.rawListener()})),this.listener=this.rawListener=function(){if(!composing&&self._bound){var val=number||isRange?toNumber(el.value):el.value;self.set(val),nextTick(function(){self._bound&&!self.focused&&self.update(self._watcher.value)})}},debounce&&(this.listener=_debounce(this.listener,debounce)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var method=jQuery.fn.on?"on":"bind";jQuery(el)[method]("change",this.rawListener),lazy||jQuery(el)[method]("input",this.listener)}else this.on("change",this.rawListener),lazy||this.on("input",this.listener);!lazy&&isIE9&&(this.on("cut",function(){nextTick(self.listener)}),this.on("keyup",function(e){46!==e.keyCode&&8!==e.keyCode||self.listener()})),(el.hasAttribute("value")||"TEXTAREA"===el.tagName&&el.value.trim())&&(this.afterBind=this.listener)},update:function(value){value=_toString(value),value!==this.el.value&&(this.el.value=value)},unbind:function(){var el=this.el;if(this.hasjQuery){var method=jQuery.fn.off?"off":"unbind";jQuery(el)[method]("change",this.listener),jQuery(el)[method]("input",this.listener)}}},radio={bind:function(){var self=this,el=this.el;this.getValue=function(){if(el.hasOwnProperty("_value"))return el._value;var val=el.value;return self.params.number&&(val=toNumber(val)),val},this.listener=function(){self.set(self.getValue())},this.on("change",this.listener),el.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(value){this.el.checked=looseEqual(value,this.getValue())}},select={bind:function(){var _this=this,self=this,el=this.el;this.forceUpdate=function(){self._watcher&&self.update(self._watcher.get())};var multiple=this.multiple=el.hasAttribute("multiple");this.listener=function(){var value=getValue(el,multiple);value=self.params.number?isArray(value)?value.map(toNumber):toNumber(value):value,self.set(value)},this.on("change",this.listener);var initValue=getValue(el,multiple,!0);(multiple&&initValue.length||!multiple&&null!==initValue)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){nextTick(_this.forceUpdate)}),inDoc(el)||nextTick(this.forceUpdate)},update:function(value){var el=this.el;el.selectedIndex=-1;for(var op,val,multi=this.multiple&&isArray(value),options=el.options,i=options.length;i--;)op=options[i],val=op.hasOwnProperty("_value")?op._value:op.value,op.selected=multi?indexOf$1(value,val)>-1:looseEqual(value,val)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},checkbox={bind:function(){function getBooleanValue(){var val=el.checked;return val&&el.hasOwnProperty("_trueValue")?el._trueValue:!val&&el.hasOwnProperty("_falseValue")?el._falseValue:val}var self=this,el=this.el;this.getValue=function(){return el.hasOwnProperty("_value")?el._value:self.params.number?toNumber(el.value):el.value},this.listener=function(){var model=self._watcher.get();if(isArray(model)){var val=self.getValue(),i=indexOf(model,val);el.checked?i<0&&self.set(model.concat(val)):i>-1&&self.set(model.slice(0,i).concat(model.slice(i+1)))}else self.set(getBooleanValue())},this.on("change",this.listener),el.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(value){var el=this.el;isArray(value)?el.checked=indexOf(value,this.getValue())>-1:el.hasOwnProperty("_trueValue")?el.checked=looseEqual(value,el._trueValue):el.checked=!!value}},handlers={text:text$2,radio:radio,select:select,checkbox:checkbox},model={priority:MODEL,twoWay:!0,handlers:handlers,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==process.env.NODE_ENV&&warn('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var handler,el=this.el,tag=el.tagName;if("INPUT"===tag)handler=handlers[el.type]||handlers.text;else if("SELECT"===tag)handler=handlers.select;else{if("TEXTAREA"!==tag)return void("production"!==process.env.NODE_ENV&&warn("v-model does not support element type: "+tag,this.vm));handler=handlers.text}el.__v_model=this,handler.bind.call(this),this.update=handler.update,this._unbind=handler.unbind},checkFilters:function(){var filters=this.filters;if(filters)for(var i=filters.length;i--;){var filter=resolveAsset(this.vm.$options,"filters",filters[i].name);("function"==typeof filter||filter.read)&&(this.hasRead=!0),filter.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},keyCodes={esc:27,tab:9,enter:13,space:32,delete:[8,46],up:38,left:37,right:39,down:40},on$1={priority:ON,acceptStatement:!0,keyCodes:keyCodes,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var self=this;this.iframeBind=function(){on(self.el.contentWindow,self.arg,self.handler,self.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(handler){if(this.descriptor.raw||(handler=function(){}),"function"!=typeof handler)return void("production"!==process.env.NODE_ENV&&warn("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+handler,this.vm));this.modifiers.stop&&(handler=stopFilter(handler)),this.modifiers.prevent&&(handler=preventFilter(handler)),this.modifiers.self&&(handler=selfFilter(handler));var keys=Object.keys(this.modifiers).filter(function(key){return"stop"!==key&&"prevent"!==key&&"self"!==key&&"capture"!==key});keys.length&&(handler=keyFilter(handler,keys)),this.reset(),this.handler=handler,this.iframeBind?this.iframeBind():on(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var el=this.iframeBind?this.el.contentWindow:this.el;this.handler&&off(el,this.arg,this.handler)},unbind:function(){this.reset()}},prefixes=["-webkit-","-moz-","-ms-"],camelPrefixes=["Webkit","Moz","ms"],importantRE=/!important;?$/,propCache=Object.create(null),testEl=null,style={deep:!0,update:function(value){"string"==typeof value?this.el.style.cssText=value:isArray(value)?this.handleObject(value.reduce(extend,{})):this.handleObject(value||{})},handleObject:function(value){var name,val,cache=this.cache||(this.cache={});for(name in cache)name in value||(this.handleSingle(name,null),delete cache[name]);for(name in value)val=value[name],val!==cache[name]&&(cache[name]=val,this.handleSingle(name,val))},handleSingle:function(prop,value){if(prop=normalize(prop))if(null!=value&&(value+=""),value){var isImportant=importantRE.test(value)?"important":"";isImportant?("production"!==process.env.NODE_ENV&&warn("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),value=value.replace(importantRE,"").trim(),this.el.style.setProperty(prop.kebab,value,isImportant)):this.el.style[prop.camel]=value}else this.el.style[prop.camel]=""}},xlinkNS="http://www.w3.org/1999/xlink",xlinkRE=/^xlink:/,disallowedInterpAttrRE=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,attrWithPropsRE=/^(?:value|checked|selected|muted)$/,enumeratedAttrRE=/^(?:draggable|contenteditable|spellcheck)$/,modelProps={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},bind$1={priority:BIND,bind:function(){var attr=this.arg,tag=this.el.tagName;attr||(this.deep=!0);var descriptor=this.descriptor,tokens=descriptor.interp;if(tokens&&(descriptor.hasOneTime&&(this.expression=tokensToExp(tokens,this._scope||this.vm)),(disallowedInterpAttrRE.test(attr)||"name"===attr&&("PARTIAL"===tag||"SLOT"===tag))&&("production"!==process.env.NODE_ENV&&warn(attr+'="'+descriptor.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(attr),this.invalid=!0),"production"!==process.env.NODE_ENV)){var raw=attr+'="'+descriptor.raw+'": ';"src"===attr&&warn(raw+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===attr&&warn(raw+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(value){if(!this.invalid){var attr=this.arg;this.arg?this.handleSingle(attr,value):this.handleObject(value||{})}},handleObject:style.handleObject,handleSingle:function(attr,value){var el=this.el,interp=this.descriptor.interp;if(this.modifiers.camel&&(attr=camelize(attr)),!interp&&attrWithPropsRE.test(attr)&&attr in el){var attrValue="value"===attr&&null==value?"":value;el[attr]!==attrValue&&(el[attr]=attrValue)}var modelProp=modelProps[attr];if(!interp&&modelProp){el[modelProp]=value;var model=el.__v_model;model&&model.listener()}return"value"===attr&&"TEXTAREA"===el.tagName?void el.removeAttribute(attr):void(enumeratedAttrRE.test(attr)?el.setAttribute(attr,value?"true":"false"):null!=value&&value!==!1?"class"===attr?(el.__v_trans&&(value+=" "+el.__v_trans.id+"-transition"),setClass(el,value)):xlinkRE.test(attr)?el.setAttributeNS(xlinkNS,attr,value===!0?"":value):el.setAttribute(attr,value===!0?"":value):el.removeAttribute(attr))}},el={priority:EL,bind:function(){if(this.arg){var id=this.id=camelize(this.arg),refs=(this._scope||this.vm).$els;hasOwn(refs,id)?refs[id]=this.el:defineReactive(refs,id,this.el)}},unbind:function(){var refs=(this._scope||this.vm).$els;refs[this.id]===this.el&&(refs[this.id]=null)}},ref={bind:function(){"production"!==process.env.NODE_ENV&&warn("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},cloak={bind:function(){var el=this.el;this.vm.$once("pre-hook:compiled",function(){el.removeAttribute("v-cloak")})}},directives={text:text$1,html:html,for:vFor,if:vIf,show:show,model:model,on:on$1,bind:bind$1,el:el,ref:ref,cloak:cloak},vClass={deep:!0,update:function(value){value?"string"==typeof value?this.setClass(value.trim().split(/\s+/)):this.setClass(normalize$1(value)):this.cleanup()},setClass:function(value){this.cleanup(value);for(var i=0,l=value.length;i<l;i++){var val=value[i];val&&apply(this.el,val,addClass)}this.prevKeys=value},cleanup:function(value){var prevKeys=this.prevKeys;if(prevKeys)for(var i=prevKeys.length;i--;){var key=prevKeys[i];(!value||value.indexOf(key)<0)&&apply(this.el,key,removeClass)}}},component={priority:COMPONENT,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==process.env.NODE_ENV&&warn('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=extractContent(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=createAnchor("v-component"),replace(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+hyphenate(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(value){this.literal||this.setComponent(value)},setComponent:function(value,cb){if(this.invalidatePending(),value){var self=this;this.resolveComponent(value,function(){self.mountComponent(cb)})}else this.unbuild(!0),this.remove(this.childVM,cb),this.childVM=null},resolveComponent:function(value,cb){var self=this;this.pendingComponentCb=cancellable(function(Component){self.ComponentName=Component.options.name||("string"==typeof value?value:null),self.Component=Component,cb()}),this.vm._resolveComponent(value,this.pendingComponentCb)},mountComponent:function(cb){this.unbuild(!0);var self=this,activateHooks=this.Component.options.activate,cached=this.getCached(),newComponent=this.build();activateHooks&&!cached?(this.waitingFor=newComponent,callActivateHooks(activateHooks,newComponent,function(){self.waitingFor===newComponent&&(self.waitingFor=null,self.transition(newComponent,cb))})):(cached&&newComponent._updateRef(),this.transition(newComponent,cb))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(extraOptions){var cached=this.getCached();if(cached)return cached;if(this.Component){var options={name:this.ComponentName,el:cloneNode(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};extraOptions&&extend(options,extraOptions);var child=new this.Component(options);return this.keepAlive&&(this.cache[this.Component.cid]=child),"production"!==process.env.NODE_ENV&&this.el.hasAttribute("transition")&&child._isFragment&&warn("Transitions will not work on a fragment instance. Template: "+child.$options.template,child),child}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(defer){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var child=this.childVM;return!child||this.keepAlive?void(child&&(child._inactive=!0,child._updateRef(!0))):void child.$destroy(!1,defer)},remove:function(child,cb){var keepAlive=this.keepAlive;if(child){this.pendingRemovals++,this.pendingRemovalCb=cb;var self=this;child.$remove(function(){self.pendingRemovals--,keepAlive||child._cleanup(),!self.pendingRemovals&&self.pendingRemovalCb&&(self.pendingRemovalCb(),self.pendingRemovalCb=null)})}else cb&&cb()},transition:function(target,cb){var self=this,current=this.childVM;switch(current&&(current._inactive=!0),target._inactive=!1,this.childVM=target,self.params.transitionMode){case"in-out":target.$before(self.anchor,function(){self.remove(current,cb)});break;case"out-in":self.remove(current,function(){target.$before(self.anchor,cb)});break;default:self.remove(current),target.$before(self.anchor,cb)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var key in this.cache)this.cache[key].$destroy();this.cache=null}}},propBindingModes=config._propBindingModes,empty={},identRE$1=/^[$_a-zA-Z]+[\w$]*$/,settablePathRE=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,bindingModes=config._propBindingModes,propDef={bind:function(){var child=this.vm,parent=child._context,prop=this.descriptor.prop,childKey=prop.path,parentKey=prop.parentPath,twoWay=prop.mode===bindingModes.TWO_WAY,parentWatcher=this.parentWatcher=new Watcher(parent,parentKey,function(val){updateProp(child,prop,val)},{twoWay:twoWay,filters:prop.filters,scope:this._scope});if(initProp(child,prop,parentWatcher.value),twoWay){var self=this;child.$once("pre-hook:created",function(){self.childWatcher=new Watcher(child,childKey,function(val){parentWatcher.set(val)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},queue$1=[],queued=!1,TYPE_TRANSITION="transition",TYPE_ANIMATION="animation",transDurationProp=transitionProp+"Duration",animDurationProp=animationProp+"Duration",raf=inBrowser&&window.requestAnimationFrame,waitForTransitionStart=raf?function(fn){raf(function(){raf(fn)})}:function(fn){setTimeout(fn,50)},p$1=Transition.prototype;p$1.enter=function(op,cb){this.cancelPending(),this.callHook("beforeEnter"),this.cb=cb,addClass(this.el,this.enterClass),op(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,pushJob(this.enterNextTick))},p$1.enterNextTick=function(){var _this=this;this.justEntered=!0,waitForTransitionStart(function(){_this.justEntered=!1});var enterDone=this.enterDone,type=this.getCssTransitionType(this.enterClass);this.pendingJsCb?type===TYPE_TRANSITION&&removeClass(this.el,this.enterClass):type===TYPE_TRANSITION?(removeClass(this.el,this.enterClass),this.setupCssCb(transitionEndEvent,enterDone)):type===TYPE_ANIMATION?this.setupCssCb(animationEndEvent,enterDone):enterDone()},p$1.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,removeClass(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},p$1.leave=function(op,cb){this.cancelPending(),this.callHook("beforeLeave"),this.op=op,this.cb=cb,addClass(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():pushJob(this.leaveNextTick)))},p$1.leaveNextTick=function(){var type=this.getCssTransitionType(this.leaveClass);if(type){var event=type===TYPE_TRANSITION?transitionEndEvent:animationEndEvent;this.setupCssCb(event,this.leaveDone)}else this.leaveDone()},p$1.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),removeClass(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},p$1.cancelPending=function(){this.op=this.cb=null;var hasPending=!1;this.pendingCssCb&&(hasPending=!0,off(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(hasPending=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),hasPending&&(removeClass(this.el,this.enterClass),removeClass(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},p$1.callHook=function(type){this.hooks&&this.hooks[type]&&this.hooks[type].call(this.vm,this.el)},p$1.callHookWithCb=function(type){var hook=this.hooks&&this.hooks[type];hook&&(hook.length>1&&(this.pendingJsCb=cancellable(this[type+"Done"])),hook.call(this.vm,this.el,this.pendingJsCb))},p$1.getCssTransitionType=function(className){if(!(!transitionEndEvent||document.hidden||this.hooks&&this.hooks.css===!1||isHidden(this.el))){var type=this.type||this.typeCache[className];if(type)return type;var inlineStyles=this.el.style,computedStyles=window.getComputedStyle(this.el),transDuration=inlineStyles[transDurationProp]||computedStyles[transDurationProp];if(transDuration&&"0s"!==transDuration)type=TYPE_TRANSITION;else{var animDuration=inlineStyles[animDurationProp]||computedStyles[animDurationProp];animDuration&&"0s"!==animDuration&&(type=TYPE_ANIMATION)}return type&&(this.typeCache[className]=type),type}},p$1.setupCssCb=function(event,cb){this.pendingCssEvent=event;var self=this,el=this.el,onEnd=this.pendingCssCb=function(e){e.target===el&&(off(el,event,onEnd),self.pendingCssEvent=self.pendingCssCb=null,!self.pendingJsCb&&cb&&cb())};on(el,event,onEnd)};var transition$1={priority:TRANSITION,update:function(id,oldId){var el=this.el,hooks=resolveAsset(this.vm.$options,"transitions",id);id=id||"v",oldId=oldId||"v",el.__v_trans=new Transition(el,id,hooks,this.vm),removeClass(el,oldId+"-transition"),addClass(el,id+"-transition")}},internalDirectives={style:style,class:vClass,component:component,prop:propDef,transition:transition$1},bindRE=/^v-bind:|^:/,onRE=/^v-on:|^@/,dirAttrRE=/^v-([^:]+)(?:$|:(.*)$)/,modifierRE=/\.[^\.]+/g,transitionRE=/^(v-bind:|:)?transition$/,DEFAULT_PRIORITY=1e3,DEFAULT_TERMINAL_PRIORITY=2e3;skip.terminal=!0;var specialCharRE=/[^\w\-:\.]/,compiler=Object.freeze({compile:compile,compileAndLinkProps:compileAndLinkProps,compileRoot:compileRoot,transclude:transclude,resolveSlots:resolveSlots}),eventRE=/^v-on:|^@/;Directive.prototype._bind=function(){var name=this.name,descriptor=this.descriptor;if(("cloak"!==name||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var attr=descriptor.attr||"v-"+name;this.el.removeAttribute(attr)}var def=descriptor.def;if("function"==typeof def?this.update=def:extend(this,def),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(descriptor.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var dir=this;this.update?this._update=function(val,oldVal){dir._locked||dir.update(val,oldVal)}:this._update=noop$1;var preProcess=this._preProcess?bind(this._preProcess,this):null,postProcess=this._postProcess?bind(this._postProcess,this):null,watcher=this._watcher=new Watcher(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:preProcess,postProcess:postProcess,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(watcher.value)}},Directive.prototype._setupParams=function(){if(this.params){var params=this.params;this.params=Object.create(null);for(var key,val,mappedKey,i=params.length;i--;)key=hyphenate(params[i]),mappedKey=camelize(key),val=getBindAttr(this.el,key),null!=val?this._setupParamWatcher(mappedKey,val):(val=getAttr(this.el,key),null!=val&&(this.params[mappedKey]=""===val||val))}},Directive.prototype._setupParamWatcher=function(key,expression){var self=this,called=!1,unwatch=(this._scope||this.vm).$watch(expression,function(val,oldVal){if(self.params[key]=val,called){var cb=self.paramWatchers&&self.paramWatchers[key];cb&&cb.call(self,val,oldVal)}else called=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(unwatch)},Directive.prototype._checkStatement=function(){var expression=this.expression;if(expression&&this.acceptStatement&&!isSimplePath(expression)){var fn=parseExpression$1(expression).get,scope=this._scope||this.vm,handler=function(e){scope.$event=e,fn.call(scope,scope),scope.$event=null};return this.filters&&(handler=scope._applyFilters(handler,null,this.filters)),this.update(handler),!0}},Directive.prototype.set=function(value){this.twoWay?this._withLock(function(){this._watcher.set(value)}):"production"!==process.env.NODE_ENV&&warn("Directive.set() can only be used inside twoWaydirectives.")},Directive.prototype._withLock=function(fn){var self=this;self._locked=!0,fn.call(self),nextTick(function(){self._locked=!1})},Directive.prototype.on=function(event,handler,useCapture){on(this.el,event,handler,useCapture),(this._listeners||(this._listeners=[])).push([event,handler])},Directive.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var i,listeners=this._listeners;if(listeners)for(i=listeners.length;i--;)off(this.el,listeners[i][0],listeners[i][1]);var unwatchFns=this._paramUnwatchFns;if(unwatchFns)for(i=unwatchFns.length;i--;)unwatchFns[i]();"production"!==process.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var filterRE$1=/[^|]\|[^|]/;initMixin(Vue),stateMixin(Vue),
eventsMixin(Vue),lifecycleMixin(Vue),miscMixin(Vue),dataAPI(Vue),domAPI(Vue),eventsAPI(Vue),lifecycleAPI(Vue);var slot={priority:SLOT,params:["name"],bind:function(){var name=this.params.name||"default",content=this.vm._slotContents&&this.vm._slotContents[name];content&&content.hasChildNodes()?this.compile(content.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(content,context,host){if(content&&context){if(this.el.hasChildNodes()&&1===content.childNodes.length&&1===content.childNodes[0].nodeType&&content.childNodes[0].hasAttribute("v-if")){var elseBlock=document.createElement("template");elseBlock.setAttribute("v-else",""),elseBlock.innerHTML=this.el.innerHTML,elseBlock._context=this.vm,content.appendChild(elseBlock)}var scope=host?host._scope:this._scope;this.unlink=context.$compile(content,host,scope,this._frag)}content?replace(this.el,content):remove(this.el)},fallback:function(){this.compile(extractContent(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},partial={priority:PARTIAL,params:["name"],paramWatchers:{name:function(value){vIf.remove.call(this),value&&this.insert(value)}},bind:function(){this.anchor=createAnchor("v-partial"),replace(this.el,this.anchor),this.insert(this.params.name)},insert:function(id){var partial=resolveAsset(this.vm.$options,"partials",id,!0);partial&&(this.factory=new FragmentFactory(this.vm,partial),vIf.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},elementDirectives={slot:slot,partial:partial},convertArray=vFor._postProcess,digitsRE=/(\d{3})(?=\d)/g,filters={orderBy:orderBy,filterBy:filterBy,limitBy:limitBy,json:{read:function(value,indent){return"string"==typeof value?value:JSON.stringify(value,null,arguments.length>1?indent:2)},write:function(value){try{return JSON.parse(value)}catch(e){return value}}},capitalize:function(value){return value||0===value?(value=value.toString(),value.charAt(0).toUpperCase()+value.slice(1)):""},uppercase:function(value){return value||0===value?value.toString().toUpperCase():""},lowercase:function(value){return value||0===value?value.toString().toLowerCase():""},currency:function(value,_currency,decimals){if(value=parseFloat(value),!isFinite(value)||!value&&0!==value)return"";_currency=null!=_currency?_currency:"$",decimals=null!=decimals?decimals:2;var stringified=Math.abs(value).toFixed(decimals),_int=decimals?stringified.slice(0,-1-decimals):stringified,i=_int.length%3,head=i>0?_int.slice(0,i)+(_int.length>3?",":""):"",_float=decimals?stringified.slice(-1-decimals):"",sign=value<0?"-":"";return sign+_currency+head+_int.slice(i).replace(digitsRE,"$1,")+_float},pluralize:function(value){var args=toArray(arguments,1),length=args.length;if(length>1){var index=value%10-1;return index in args?args[index]:args[length-1]}return args[0]+(1===value?"":"s")},debounce:function(handler,delay){if(handler)return delay||(delay=300),_debounce(handler,delay)}};installGlobalAPI(Vue),Vue.version="1.0.28",setTimeout(function(){config.devtools&&(devtools?devtools.emit("init",Vue):"production"!==process.env.NODE_ENV&&inBrowser&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),module.exports=Vue}).call(this,require("_process"))},{_process:4}],7:[function(require,module,exports){var inserted=exports.cache={};exports.insert=function(css){if(!inserted[css]){inserted[css]=!0;var elem=document.createElement("style");return elem.setAttribute("type","text/css"),"textContent"in elem?elem.textContent=css:elem.styleSheet.cssText=css,document.getElementsByTagName("head")[0].appendChild(elem),elem}}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gokartProfile={name:"sss",version:"16.11.1",distributionType:"release",description:"Spatial Support System v3",repositoryBranch:"master",lastCommit:"3d20fde",commitDate:"Tue Mar 14 09:53:36 2017 +0800",commitMessage:"#2101 Enable to import fire boundary from gpx file",commitAuthor:"Rocky Chen <Rocky.Chen@dpaw.wa.gov.au>",build:{datetime:"2017-03-14 14:59:18 AWST(+0800)",date:"2017-03-14 AWST(+0800)",time:"14-59-18 AWST(+0800)",platform:"Linux",host:"rockyc-XPS-13-9360",vendorMD5:"RYe8jbmhEy4L6IMwowpM9w=="}};exports.default=gokartProfile},{}],9:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),tour=new _vendor.Shepherd.Tour({defaults:{classes:"shepherd-theme-dark",scrollTo:!1}});tour.version=.2,global.tour=tour,tour.on("cancel",function(){global.gokart.touring=!1}),tour.addStep("welcome",{text:'Would you like a tour of the Spatial Support System? If you exit now, you can always rerun the tour by clicking "Take Tour" in <b>System Settings</b>.',buttons:[{text:"Exit",classes:"shepherd-button-secondary",action:tour.cancel},{text:"Next",action:tour.next}]}).addStep("map-controls",{text:"At the top right are common map controls for setting a scale, going full-screen, zooming, and measuring lengths and areas.",attachTo:"#menu-scale left",when:{show:function(){global.gokart.map.animate({center:[116,-32]},{resolution:global.gokart.map.resolutions[9]})}}}).addStep("map-search",{text:"There is also a search box with support for coordinates and place names. <br/><b>Try out some of these!</b><ul><li>17 Dick Perry Avenue, Kensington</li><li>Upper Swan, Western Australia</li><li>32.00858S 115.53978E</li><li>115 38 58.0 E, 33 20 52.8 S</li><li>MGA 50 718776E 6190981N</li><li>MGA50 3816452</li><li>FD ET 79</li><li>PIL AF50</li></ul>",attachTo:"#map-search left"}).addStep("menu",{text:"To the left are the interactive panes for <b>Layers</b>, <b>Drawing Tools</b> and <b>Vehicle Tracking</b>.",attachTo:"#menu-tab-layers-label right"}).addStep("layers",{text:"The <b>Layers</b> pane lets you find, organise and print what is visible on the map.",attachTo:"#menu-tab-layers-label right"}).addStep("catalogue",{text:"The catalogue in <b>Browse Layers</b> lets you add more layers to the map. Layers can be found by typing into the search box.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-catalogue-label").click()}}}).addStep("catalogue-toggle",{text:"Clicking a layer's switch will add it on top of other map layers.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#find-layer").val("tenure").change(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("#layers-catalogue-list .switch-input").click(),(0,_vendor.$)("#find-layer").val("land").change()})}}}).addStep("active",{text:"The map layers in <b>Active</b> lets you configure layers that are part of the current map.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-active-label").click()}}}).addStep("active-opacity",{text:"Clicking a layer opens a configuration panel, from which you can adjust transparency and other settings.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)('div[data-id="dpaw:resource_tracking_live"]').click(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("#layer-config input.layer-opacity").val(30).change()})}}}).addStep("active-remove",{text:"You can also drag and drop layers to reorder them, and remove a layer by clicking the red X.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)('div[data-id="dpaw:resource_tracking_live"] a.remove-layer').get(0).click()}}}).addStep("export",{text:"Under <b>Save & Print</b>, you can save the current state of the map (position, layers and drawings), and load previous sessions.<br/>You can also perform a quick print of the displayed map region as JPG, geospatial PDF or GeoTIFF.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-export-label").click()}}}).addStep("annotations",{text:"The <b>Drawing Tools</b> pane lets you draw features onto the map.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-annotations-label").click()}}}).addStep("annotations-text",{text:"Some of the tools have additional configuration options. Text notes are even able to be resized.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){(0,_vendor.$)('a[title="Text Note"]').get(0).click(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("textarea.notecontent").height(60).val("Like this one where you\ncan set the text of a note").get(0).click(),global.exampleFeature=new global.ol.Feature({geometry:new global.ol.geom.Point(global.gokart.map.getCenter())})})}}}).addStep("annotations-draw",{text:"Clicking on the map will place a feature.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){_vendor.Vue.nextTick(function(){global.gokart.annotations.features.push(global.exampleFeature)})}}}).addStep("tracking",{text:"The Tracking pane is used to find and filter the vehicles displayed on the map.",attachTo:"#menu-tab-tracking-label right",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-tracking-label").click()}}}).addStep("finish",{text:"And with that, we've reached the end of the tour! The Spatial Support System will revert back to the pre-tour state when you click NEXT.",when:{hide:function(){document.location.reload()}}}),exports.default=tour}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"src/vendor.js":"src/vendor.js"}],10:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_vendor=require("src/vendor.js"),_sss=require("./sss.vue"),_sss2=_interopRequireDefault(_sss),_sssTour=require("./sss-tour.js"),_sssTour2=_interopRequireDefault(_sssTour),_sssProfile=require("./sss-profile.js"),_sssProfile2=_interopRequireDefault(_sssProfile);global.tour=_sssTour2.default,global.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,context&&context.wait||wait),callNow&&func.apply(context,args)}};var volatileData={remoteCatalogue:env.cswService+"?format=json&application__name=sss",defaultWMTSSrc:env.wmtsService,defaultWFSSrc:env.wfsService,defaultLegendSrc:env.legendSrc,gokartService:env.gokartService,oimService:env.oimService,sssService:env.sssService,s3Service:env.s3Service,bfrsService:env.bfrsService,appType:env.appType,fixedScales:[.25,.5,1,2,2.5,5,10,20,25,50,80,100,125,250,500,1e3,2e3,3e3,5e3,1e4,25e3],resolutions:[.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.0003433227539062,.0001716613769531,858306884766e-16,429153442383e-16,214576721191e-16,107288360596e-16,53644180298e-16,26822090149e-16,13411045074e-16],mmPerInch:25.4,displayResolution:[1,1],whoami:{email:null},layout:{screenHeight:0,screenWidth:0,leftPanelHeadHeight:90},activeMenu:null,activeSubmenu:null,catalogueFilters:[["basemap","Base Imagery"],["boundaries","Admin Boundaries"],["communications","Communications"],["fire","Fire Operations"],["meteorology","Meteorology"],["vegetation","Vegetation"],["tenure","Tenure and Land Use"],["infrastructure","Infrastructure"],["grid","Grid Systems"],["resources","Resource Tracking"]],matrixSets:{"EPSG:4326":{1024:{name:"gda94",minLevel:0,maxLevel:17}}}},systemSettings={tourVersion:null,undoLimit:0,lengthUnit:"km",areaUnit:"ha",measureFeature:!1,print:{retainBoundingbox:!0,snapToFixedScale:!0},overviewMap:!0,hoverInfo:!1,resourceLabels:!0,resourceDirections:!0,viewportOnly:!1,rightHandTools:!0,graticule:!0,bfrs:{reportLabels:!0,viewportOnly:!1}},_persistentData={view:{center:[123.75,-24.966]},activeLayers:[["dpaw:resource_tracking_live",{}],["cddp:state_map_base",{}]],annotations:{type:"FeatureCollection",features:[]},drawingLogs:[],redoPointer:0,drawingSequence:0,settings:_vendor.$.extend({},JSON.parse((0,_stringify2.default)(systemSettings)))};global.gokartService=volatileData.gokartService,global.localforage=_vendor.localforage,global.$=_vendor.$,_vendor.Vue.use(_vendor.VueStash),_vendor.localforage.getItem("sssOfflineStore").then(function(store){var settings=_vendor.$.extend({},_persistentData.settings,store?store.settings||{}:{}),storedData=_vendor.$.extend({},_persistentData,store||{},volatileData);storedData.settings=settings,global.gokart=new _vendor.Vue({el:"body",components:{App:_sss2.default},data:{store:storedData,pngs:{},fixedLayers:[],saved:null,touring:!1,tints:{selectedPoint:[["#b43232","#2199e8"]],selectedDivision:[["#000000","#2199e8"],["#7c3100","#2199e8"],["#ff6600","#ffffff"]],selectedRoadClosurePoint:[["#000","#2199e8"]],selectedPlusIcon:[["#006400","#2199e8"]]}},computed:{loading:function(){return this.$refs.app.$refs.loading},map:function(){return this.$refs.app.$refs.map},scales:function(){return this.$refs.app.$refs.map.$refs.scales},search:function(){return this.$refs.app.$refs.map.$refs.search},measure:function(){return this.$refs.app.$refs.map.$refs.measure},info:function(){return this.$refs.app.$refs.map.$refs.info},active:function(){return this.$refs.app.$refs.layers.$refs.active},layers:function(){return this.$refs.app.$refs.layers},catalogue:function(){return this.$refs.app.$refs.layers.$refs.catalogue},export:function(){return this.$refs.app.$refs.layers.$refs.export},annotations:function(){return this.$refs.app.$refs.annotations},tracking:function(){return this.$refs.app.$refs.tracking},setting:function(){return this.$refs.app.$refs.setting},bfrs:function(){return this.$refs.app.$refs.bfrs},geojson:function(){return new _vendor.ol.format.GeoJSON},wgs84Sphere:function(){return new _vendor.ol.Sphere(6378137)},profile:function(){return _sssProfile2.default},utils:function(){return _vendor.utils},persistentData:function(){var vm=this;return _vendor.$.each(_persistentData,function(key,val){_persistentData[key]=vm.store[key]}),_persistentData},tourVersion:function(){return this.store.settings.tourVersion},defaultSettings:function(){return systemSettings}},watch:{tourVersion:function(newValue,oldValue){newValue!==_sssTour2.default.version&&this.takeTour()}},methods:{takeTour:function(){this.store.settings.tourVersion=_sssTour2.default.version,this.export.saveState(),this.touring=!0,_sssTour2.default.start()}},ready:function(){var self=this;self.loading.app.progress(5,"Initialize UI"),(0,_vendor.$)(document).foundation(),(0,_vendor.svg4everybody)(),(0,_vendor.$)("title").text(_sssProfile2.default.description),(0,_vendor.$)("body").append('<div id="dpi" style="width:1in;display:none"></div>'),self.dpi=parseFloat((0,_vendor.$)("#dpi").width()),self.store.dpmm=self.dpi/self.store.mmPerInch,(0,_vendor.$)("#dpi").remove(),function(){var req=new window.XMLHttpRequest;req.withCredentials=!0,req.onload=function(){_vendor.$.extend(self.store.whoami,JSON.parse(this.responseText))},req.open("GET",self.store.oimService+"/api/whoami"),req.send()}();var offCanvasLeft=(0,_vendor.$)("#offCanvasLeft");(0,_vendor.$)("#menu-tabs").on("change.zf.tabs",function(ev){offCanvasLeft.addClass("reveal-responsive"),self.map.olmap.updateSize()}).on("click",".tabs-title a[aria-selected=false]",function(ev){offCanvasLeft.addClass("reveal-responsive"),(0,_vendor.$)(this).attr("aria-selected",!0),self.map.olmap.updateSize()}).on("click",".tabs-title a[aria-selected=true]",function(ev){offCanvasLeft.toggleClass("reveal-responsive"),self.map.olmap.updateSize()}),(0,_vendor.$)("#side-pane-close").on("click",function(ev){offCanvasLeft.removeClass("reveal-responsive"),(0,_vendor.$)("#menu-tabs").find(".tabs-title a[aria-selected=true]").attr("aria-selected",!1),self.map.olmap.updateSize()}),self.loading.app.progress(10,"Initialize Fixed Layers"),self.fixedLayers=self.fixedLayers.concat([{type:"TimelineLayer",name:"Himawari-8 Hotspots",id:"himawari8:hotspots",source:self.store.gokartService+"/hi8/AHI_TKY_FHS",params:{FORMAT:"image/png"},refresh:300},{type:"TimelineLayer",name:"Himawari-8 True Colour",id:"himawari8:bandtc",source:self.store.gokartService+"/hi8/AHI_TKY_b321",refresh:300,base:!0},{type:"TimelineLayer",name:"Himawari-8 Band 7",id:"himawari8:band7",source:self.store.gokartService+"/hi8/AHI_TKY_b7",refresh:300,base:!0},{type:"TileLayer",name:"Forest Fire Danger Index",id:"bom:forest_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/bom:IDZ71117?basetimelayer=bom:IDZ71117_datetime&timelinesize=72&layertimespan=3600&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Maximum Forest Fire Danger Index",id:"bom:maximum_forest_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/bom:IDZ71118?basetimelayer=bom:IDZ71118_datetime&timelinesize=4&layertimespan=86400&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Grassland Fire Danger Index",id:"bom:grass_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/bom:IDZ71122?basetimelayer=bom:IDZ71122_datetime&timelinesize=72&layertimespan=3600&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Maximum Grassland Fire Danger Index",id:"bom:maximum_grass_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/bom:IDZ71123?basetimelayer=bom:IDZ71123_datetime&timelinesize=4&layertimespan=86400&updatetime="+lastUpdatetime}}]),self.loading.app.progress(20,"Initialize SSS tools");var sssTools=[{name:"Fire Boundary",icon:"dist/static/images/iD-sprite.svg#icon-area",style:self.annotations.getVectorStyleFunc(self.tints),selectedFillColour:[0,0,0,.25],fillColour:[0,0,0,.25],size:2,interactions:[self.annotations.polygonDrawFactory()],scope:["annotation"],showName:!0,measureLength:!0,measureArea:!0,comments:[{name:"Tips",description:["Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},self.annotations.ui.defaultText,{name:"Division",icon:"dist/static/symbols/fire/division.svg",tints:self.tints,perpendicular:!0,interactions:[self.annotations.pointDrawFactory(),self.annotations.snapToLineFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedDivision",scope:["annotation"],showName:!0},{name:"Sector",icon:"dist/static/symbols/fire/sector.svg",tints:self.tints,perpendicular:!0,interactions:[self.annotations.pointDrawFactory(),self.annotations.snapToLineFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedDivision",scope:["annotation"],showName:!0},{name:"Origin Point",icon:"dist/static/symbols/fire/origin.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedPoint",scope:["annotation"],showName:!0},{name:"Spot Fire",icon:"dist/static/symbols/fire/spotfire.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedPoint",scope:["annotation"],showName:!0},{name:"Road Closure",icon:"dist/static/symbols/fire/road_closure_point.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),showName:!0,selectedTint:"selectedRoadClosurePoint",scope:["annotation"]},{name:"Control Line",icon:"dist/static/symbols/fire/controlline.svg",interactions:[self.annotations.linestringDrawFactory()],size:1,typeIcon:"dist/static/symbols/fire/plus.svg",typeIconSelectedTint:"selectedPlusIcon",typeIconDims:[20,20],colour:"rgba(0, 0, 0, 0.1)",showName:!0,scope:["annotation"],style:self.annotations.getVectorStyleFunc(this.tints)},self.annotations.ui.defaultLine,self.annotations.ui.defaultPolygon,self.annotations.ui.defaultPoint];sssTools.forEach(function(tool){self.annotations.tools.push(tool)}),self.loading.app.progress(30,"Initialize ol map"),self.map.init(),self.loading.app.progress(40,"Load Remote Catalogue");try{self.catalogue.loadRemoteCatalogue(self.store.remoteCatalogue,function(){try{self.loading.app.progress(50,"Initialize Active Layers"),self.map.initLayers(self.fixedLayers,self.store.activeLayers),self.loading.app.progress(60,"Broadcast 'gk-init' event"),self.$broadcast("gk-init"),self.loading.app.progress(90,"Broadcast 'gk-postinit' event"),self.$broadcast("gk-postinit"),self.store.layout.screenHeight=(0,_vendor.$)(window).height(),self.store.layout.screenWidth=(0,_vendor.$)(window).width(),(0,_vendor.$)(window).resize(debounce(function(){(0,_vendor.$)(window).height()!==self.store.layout.screenHeight&&(self.store.layout.screenHeight=(0,_vendor.$)(window).height()),(0,_vendor.$)(window).width()!==self.store.layout.screenWidth&&(self.store.layout.screenWidth=(0,_vendor.$)(window).width())},200)),(0,_vendor.$)("#menu-tab-layers-label").trigger("click"),self.store.activeMenu="layers",self.layers.setup(),(0,_vendor.$)("#layers-active-label").trigger("click"),self.store.activeSubmenu="active",self.active.setup(),_vendor.utils.checkVersion(self.profile),self.loading.app.end()}catch(err){throw self.loading.app.failed(err),err}self.store.settings.tourVersion!==_sssTour2.default.version&&self.takeTour()},function(reason){self.loading.app.failed(reason)})}catch(err){throw self.loading.app.failed(err),err}}})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./sss-profile.js":8,"./sss-tour.js":9,"./sss.vue":11,"babel-runtime/core-js/json/stringify":1,"src/vendor.js":"src/vendor.js"}],11:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _map=require("../components/map.vue"),_map2=_interopRequireDefault(_map),_layers=require("../components/layers.vue"),_layers2=_interopRequireDefault(_layers),_annotations=require("../components/annotations.vue"),_annotations2=_interopRequireDefault(_annotations),_tracking=require("../components/sss/tracking.vue"),_tracking2=_interopRequireDefault(_tracking),_loading=require("../components/loading.vue"),_loading2=_interopRequireDefault(_loading),_setting=require("../components/setting.vue"),_setting2=_interopRequireDefault(_setting),_bfrs=require("../components/sss/bfrs.vue"),_bfrs2=_interopRequireDefault(_bfrs);require("src/vendor.js");exports.default={store:{activeMenu:"activeMenu"},data:function(){return{}},components:{gkMap:_map2.default,gkLayers:_layers2.default,gkAnnotations:_annotations2.default,gkTracking:_tracking2.default,gkLoading:_loading2.default,gkSetting:_setting2.default,gkBfrs:_bfrs2.default},ready:function(){var vm=this;$("#menu-tabs").on("change.zf.tabs",function(target,selectedTab){var menu=selectedTab.attr("menu");vm.activeMenu&&vm.activeMenu==menu||(vm.activeMenu&&vm.$root[vm.activeMenu].teardown&&vm.$root[vm.activeMenu].teardown(),vm.activeMenu=menu,vm.activeMenu&&vm.$root[vm.activeMenu].setup&&vm.$root[vm.activeMenu].setup())})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<gk-loading v-ref:loading="" application="SSS"></gk-loading>\n<div class="off-canvas-wrapper">\n    <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">\n        <div class="off-canvas position-left" id="offCanvasLeft" data-off-canvas="">\n            <a id="side-pane-close" class="button alert hide-for-medium"></a>\n            <div class="tabs-content vertical" data-tabs-content="menu-tabs">\n                <gk-setting v-ref:setting=""></gk-setting>\n                <gk-layers v-ref:layers=""></gk-layers>\n                <gk-annotations v-ref:annotations=""></gk-annotations>\n                <gk-tracking v-ref:tracking=""></gk-tracking>\n                <gk-bfrs v-ref:bfrs=""></gk-bfrs>\n            </div>\n        </div>\n        <div class="off-canvas-content" data-off-canvas-content="">\n            <ul class="tabs vertical map-widget" id="menu-tabs" data-tabs="">\n                <li class="tabs-title side-button is-active" menu="layers">\n                    <a href="#menu-tab-layers" title="Map Layers">\n                        <svg class="icon">\n                            <use xlink:href="dist/static/images/iD-sprite.svg#icon-layers"></use>\n                        </svg>\n                    </a>\n                </li>\n                <li class="tabs-title side-button" menu="annotations">\n                    <a href="#menu-tab-annotations" title="Drawing Tools">\n                        <i class="fa fa-pencil" aria-hidden="true"></i>\n                    </a>\n                </li>\n                <li class="tabs-title side-button" menu="tracking">\n                    <a href="#menu-tab-tracking" title="Resources Tracking">\n                        <i class="fa fa-truck" aria-hidden="true"></i>\n                    </a>\n                </li>\n                <li class="tabs-title side-button" menu="bfrs">\n                    <a href="#menu-tab-bfrs" title="Bushfire Report System">\n                        <i class="fa fa-fire" aria-hidden="true"></i>\n                    </a>\n                </li>\n                <li class="tabs-title side-button" menu="setting">\n                    <a href="#menu-tab-setting" title="System Settings">\n                        <i class="fa fa-cog" aria-hidden="true"></i>\n                    </a>\n                </li>\n            </ul>\n            <gk-map v-ref:map=""></gk-map>\n        </div>\n    </div>\n</div>\n<div id="external-controls"></div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-1f2f32b3",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-1f2f32b3",module.exports))}()},{"../components/annotations.vue":12,"../components/layers.vue":15,"../components/loading.vue":21,"../components/map.vue":22,"../components/setting.vue":26,"../components/sss/bfrs.vue":27,"../components/sss/tracking.vue":28,"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5}],12:[function(require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.notecontent {\n  width: 100%;\n  height: 100px;\n  resize: both;\n  background-image: url('dist/static/images/boxresize.svg');\n  background-repeat: no-repeat;\n  background-position: right bottom;\n}\n.canvaspane {\n  overflow: hidden;\n  width: 100px;\n  height: 30vh;\n}\n.row.resetmargin {\n  margin: 0px;\n}\n.resetmargin .small-6.rightmargin {\n  margin-right: 1px;\n}\n.resetmargin .small-6 {\n  margin-right: -1px;\n  padding-right: 1px;\n}\n.resetmargin .expanded.button {\n  margin-bottom: 2px;\n}\n.fa.red {\n  color: #b43232;\n}\n.pointshape {\n  padding-left:5px;\n  padding-right:5px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_drawinglogs=require("./drawinglogs.vue"),_drawinglogs2=_interopRequireDefault(_drawinglogs);_vendor.Vue.filter("filterIf",function(list,prop,value){if(list)return list.filter(function(val){return val&&val[prop]===value})});var noteOffset=0,notePadding=10,noteStyles={general:function(note){var textTmpl={fontSize:"16px",fontFamily:'"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif',text:note.text,x:noteOffset+notePadding,y:notePadding,align:"left",fromCenter:!1};return[["drawText",_vendor.$.extend({layer:!0,name:"decorationLayer",strokeWidth:3,strokeStyle:"rgba(255, 255, 255, 0.9)"},textTmpl)],["drawText",_vendor.$.extend({layer:!0,name:"textLayer",fillStyle:note.colour},textTmpl)]]}};exports.default={store:["dpmm","drawingSequence","whoami","activeMenu"],components:{gkDrawinglogs:_drawinglogs2.default},data:function(){return{ui:{},tool:{},tools:[],annotationTools:[],features:new _vendor.ol.Collection,selectedFeatures:new _vendor.ol.Collection,selectable:[],featureOverlay:{},annotationsfile:"",note:{style:"general",text:"Sector: \nChannel: \nCommander: ",colour:"#000000"},notes:{},size:2,colour:"#000000",colours:[["red","#cc0000"],["orange","#f57900"],["yellow","#edd400"],["green","#73d216"],["blue","#3465a4"],["violet","#75507b"],["brown","#8f5902"],["grey","#555753"],["black","#000000"]],advanced:!1,tints:{},pointShapes:[["dist/static/symbols/points/circle.svg","Circle",[null,"#000000"]],["dist/static/symbols/points/square.svg","Square",[null,"#000000"]],["dist/static/symbols/points/triangle.svg","Triangle",[null,"#000000"]],["dist/static/symbols/points/star.svg","Star",[null,"#000000"]],["dist/static/symbols/points/plus.svg","Star",[null,"#000000"]],["dist/static/symbols/points/minus.svg","Star",[null,"#000000"]],["dist/static/symbols/points/Fire_Advice.svg","Star",["#000000","#000000"]]],shape:null}},computed:{map:function(){return this.$root.$refs.app.$refs.map},export:function(){return this.$root.export},active:function(){return this.$root.active},search:function(){return this.$root.search},measure:function(){return this.$root.measure},loading:function(){return this.$root.loading},drawinglogs:function(){return this.$refs.drawinglogs},featureEditing:function(){return this.tool==this.ui.editStyle&&this.selectedFeatures.getLength()>0?this.selectedFeatures.item(0):null},shouldShowNoteEditor:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultText||this.tool===this.ui.editStyle&&this.featureEditing&&this.getTool(this.featureEditing.get("toolName"))===this.ui.defaultText)},shouldShowShapePicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultPoint||this.tool==this.ui.editStyle&&this.featureEditing&&this.getTool(this.featureEditing.get("toolName"))===this.ui.defaultPoint)},shouldShowSizePicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultLine||this.tool===this.ui.defaultPolygon||this.tool==this.ui.editStyle&&this.featureEditing&&[this.ui.defaultLine,this.ui.defaultPolygon].indexOf(this.getTool(this.featureEditing.get("toolName")))>=0)},shouldShowColourPicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultLine||this.tool===this.ui.defaultPolygon||this.tool==this.ui.defaultText||this.tool==this.ui.defaultPoint||this.tool===this.ui.editStyle&&this.featureEditing&&[this.ui.defaultLine,this.ui.defaultPolygon,this.ui.defaultPoint,this.ui.defaultText].indexOf(this.getTool(this.featureEditing.get("toolName")))>=0)},shouldShowComments:function(){return!(!this.tool||!this.tool.name)&&(this.tool.comments&&!0)},currentTool:{get:function(){var t=this._currentTool[this.activeMenu];return t||(t=this.ui.defaultPan,this._currentTool[this.activeMenu]=t),t},set:function(t){this._currentTool[this.activeMenu]=t}}},watch:{featureEditing:function(val,oldVal){val&&val instanceof _vendor.ol.Feature&&val.get&&(val.get("note")?(this.note=val.get("note"),this.drawNote(this.note),this.colour=this.note.colour||this.colour):val.get("shape")?(this.shape=val.get("shape")||this.shape,this.colour=val.get("colour")||this.colour):(this.size=val.get("size")||this.size,this.colour=val.get("colour")||this.colour))}},methods:{createEvent:function(interaction,type,options){try{return new this._event(type,options);
}catch(ex){return this._event=function(type,options){_vendor.ol.events.Event.call(this,type);var ev=this;options&&_vendor.$.each(options,function(k,v){ev[k]=v})},_vendor.ol.inherits(this._event,_vendor.ol.events.Event),new this._event(type,options)}},importAnnotations:function(){if(0!==this.$els.annotationsfile.files.length){var vm=this,file=this.$els.annotationsfile.files[0];this.export.importVector(file,function(features,fileFormat){var ignoredFeatures=[],f=null;if("gpx"===fileFormat)for(var i=features.length-1;i>=0;i--)if(feature=features[i],feature.getGeometry()instanceof _vendor.ol.geom.Point)ignoredFeatures.push(feature),features.splice(i,1);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString){vm.map.clearFeatureProperties(feature);var coordinates=feature.getGeometry().getCoordinates();coordinates.push(coordinates[0]),feature.setGeometry(new _vendor.ol.geom.Polygon([coordinates])),feature.set("toolName","Fire Boundary")}else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString){vm.map.clearFeatureProperties(feature),features.splice(i,1);var geom=feature.getGeometry(),coordinates=null;_vendor.$.each(geom.getLineStrings(),function(index,linestring){f=feature.clone(),coordinates=linestring.getCoordinates(),coordinates.push(coordinates[0]),f.setGeometry(new _vendor.ol.geom.Polygon([coordinates])),f.set("toolName","Fire Boundary"),features.splice(i,0,f)})}else ignoredFeatures.push(feature),features.splice(i,1);else for(var i=features.length-1;i>=0;i--)if(feature=features[i],!vm.getTool(feature.get("toolName")))if(feature.getGeometry()instanceof _vendor.ol.geom.Point)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Point",!0),feature.set("shape",vm.annotations.pointShapes[0],!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Line",!0),feature.set("size",2,!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.Polygon)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Area",!0),feature.set("size",2,!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiPoint||feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString||feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon||feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection){features.splice(i,1);var geometries=null;feature.getGeometry()instanceof _vendor.ol.geom.MultiPoint?geometries=feature.getGeometry().getPoints():feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString?geometries=feature.getGeometry().getLineStrings():feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon?geometries=feature.getGeometry().getPolygons():feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection&&(geometries=feature.getGeometry().getGeometries()),_vendor.$.each(geometries,function(index,geometry){f=new _vendor.ol.Feature({geometry:geometry}),features.splice(i,0,f),i+=1})}else ignoredFeatures.push(feature),features.splice(i,1);ignoredFeatures.length&&console.warn("The following features are ignored.\r\n"+vm.$root.geojson.writeFeatures(features)),features&&features.length>0&&(_vendor.$.each(features,function(index,feature){vm.drawingSequence+=1,feature.set("id",vm.drawingSequence),vm.initFeature(feature)}),vm.features.extend(features))})}},downloadAnnotations:function(fmt){this.$root.export.exportVector(this.features.getArray(),"annotations",fmt)},getPerpendicular:function(coords){var nearestFeature=gokart.annotations.featureOverlay.getSource().getClosestFeatureToCoordinate(coords,function(feat){var geom=feat.getGeometry();return geom instanceof _vendor.ol.geom.Polygon||geom instanceof _vendor.ol.geom.LineString});if(!nearestFeature)return 0;var segments=[],source=[],segLength=0;nearestFeature.getGeometry()instanceof _vendor.ol.geom.Polygon?(source=nearestFeature.getGeometry().getCoordinates()[0],segLength=source.length):(source=nearestFeature.getGeometry().getCoordinates(),segLength=source.length-1);for(var i=0;i<segLength;i++)segments.push([source[i],source[(i+1)%source.length]]);segments.sort(function(a,b){return _vendor.ol.coordinate.squaredDistanceToSegment(coords,a)-_vendor.ol.coordinate.squaredDistanceToSegment(coords,b)});var offset=[segments[0][1][0]-segments[0][0][0],segments[0][1][1]-segments[0][0][1]],normal=Math.atan2(-offset[1],offset[0]);return normal},snapToLineFactory:function(options){return new _vendor.ol.interaction.Snap({features:options&&options.features||this.features,edge:!options||void 0===options.edge||options.edge,vertex:!(!options||void 0==options.vertex)&&options.vertex,pixelTolerance:options&&options.pixelTolerance||16})},linestringDrawFactory:function(options){var vm=this;return function(tool){var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"LineString",features:tool&&tool.features||vm.features},options&&options.drawOptions||{}));return draw.on("drawend",function(ev){vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now())}),draw.events=options&&options.events||{},draw}},polygonDrawFactory:function(options){var vm=this;return function(tool){var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"Polygon",features:tool&&tool.features||vm.features},options&&options.drawOptions||{}));return draw.on("drawend",function(ev){vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now())}),draw.events=options&&options.events||{},draw}},pointDrawFactory:function(options){var vm=this;return function(tool){var sketchStyle=void 0;if(tool&&tool.sketchStyle){var defaultFeat=new _vendor.ol.Feature(_vendor.$.extend({toolName:tool.name},options||{}));sketchStyle=function(res){return tool.sketchStyle.apply(defaultFeat,res)}}var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"Point",features:options&&options.features||tool&&tool.features||vm.features,style:sketchStyle},options&&options.drawOptions||{}));return draw.on("drawend",function(ev){if(vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now()),tool.perpendicular){var coords=ev.feature.getGeometry().getCoordinates();ev.feature.set("rotation",vm.getPerpendicular(coords))}}),draw.events=options&&options.events||{},draw}},translateInterFactory:function(options){var vm=this;return function(tool){var translateInter=new _vendor.ol.interaction.Translate({layers:tool&&tool.mapLayers||[vm.featureOverlay],features:tool&&tool.selectedFeatures||vm.selectedFeatures});return translateInter.on("translateend",function(ev){ev.features.forEach(function(f){f.get("toolName")&&(tool=vm.getTool(f.get("toolName")),tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0),f.changed()))})}),translateInter}},dragSelectInterFactory:function(options){var vm=this;return function(tool){selectedFeatures=tool&&tool.selectedFeatures||vm.selectedFeatures;var dragSelectInter=new _vendor.ol.interaction.DragBox;return dragSelectInter.on("boxend",function(event){selectedFeatures.clear();var extent=event.target.getGeometry().getExtent(),multi=void 0==this.multi_||this.multi_;vm.selectable.forEach(function(layer){return!multi&&selectedFeatures.getLength()>0||void(layer==vm.featureOverlay?(layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){return!multi&&vm.selectedFeatures.getLength()>0||(feature.get("note")?void 0:(vm.selectedFeatures.push(feature),!multi))}),vm.features.forEach(function(feature){!multi&&vm.selectedFeatures.getLength()>0||feature.get("note")&&_vendor.ol.extent.intersects(extent,vm.getNoteExtent(feature))&&vm.selectedFeatures.push(feature)})):layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){return!multi&&vm.selectedFeatures.getLength()>0||(vm.selectedFeatures.push(feature),!multi)}))})}),dragSelectInter.on("boxstart",function(){}),dragSelectInter.setMulti=function(multi){this.multi_=multi},dragSelectInter}},isGeometrySelected:function(geom,mapBrowserEvent){if(geom instanceof _vendor.ol.geom.Point){var geomPosition=this.map.olmap.getPixelFromCoordinate(geom.getCoordinates()),position=mapBrowserEvent.pixel;return Math.abs(position[0]-geomPosition[0])<=5&&Math.abs(position[1]-geomPosition[1])<=5}return geom.intersectsCoordinate(mapBrowserEvent.coordinate)},getSelectedGeometry:function(f,indexes,end){if(indexes=indexes||f.selectedIndex){if(end=null===end||void 0===end?indexes.length-1:end,end>=indexes.length)return null;if(end<0)return f.getGeometry();var geom=f.getGeometry();for(i=0;i<=end;i++)if(geom instanceof _vendor.ol.geom.GeometryCollection){if(!(indexes[i]<geom.getGeometriesArray().length))return null;geom=geom.getGeometriesArray()[indexes[i]]}else if(geom instanceof _vendor.ol.geom.MultiPolygon){if(!(indexes[i]<geom.getPolygons().length))return null;geom=geom.getPolygon(indexes[i])}else if(geom instanceof _vendor.ol.geom.MultiPoint){if(!(indexes[i]<geom.getPoints().length))return null;geom=geom.getPoint(indexes[i])}else{if(!(geom instanceof _vendor.ol.geom.MultiLineString))return null;if(!(indexes[i]<geom.getLineStrings().length))return null;geom=geom.getLineString(indexes[i])}return geom}return null},deleteSelectedGeometry:function(f,interaction){var indexes=f.selectedIndex;if(indexes){var geom=this.getSelectedGeometry(f,indexes,indexes.length-2);if(geom){var deleteIndex=indexes[indexes.length-1];if(geom instanceof _vendor.ol.geom.GeometryCollection)deleteIndex<geom.getGeometriesArray().length&&(geom.getGeometriesArray().splice(deleteIndex,1),geom.setGeometriesArray(geom.getGeometriesArray()),delete f.selectedIndex,interaction.dispatchEvent(this.createEvent(interaction,"deletefeaturegeometry",{feature:f,indexes:indexes})),f.getGeometry().changed());else if(geom instanceof _vendor.ol.geom.MultiPolygon||geom instanceof _vendor.ol.geom.MultiPoint||geom instanceof _vendor.ol.geom.MultiLineString){var coordinates=geom.getCoordinates();if(!(deleteIndex<coordinates.length))return null;coordinates.splice(deleteIndex,1),geom.setCoordinates(coordinates),delete f.selectedIndex,interaction.dispatchEvent(this.createEvent(interaction,"deletefeaturegeometry",{feature:f,indexes:indexes})),f.getGeometry().changed()}}}},getSelectedGeometryIndex:function(geom,mapBrowserEvent){var vm=this,indexes=null;if(geom instanceof _vendor.ol.geom.GeometryCollection)_vendor.$.each(geom.getGeometriesArray(),function(index,g){if(g instanceof _vendor.ol.geom.MultiPoint||g instanceof _vendor.ol.geom.MultiLineString||g instanceof _vendor.ol.geom.MultiPolygon||g instanceof _vendor.ol.geom.GeometryCollection){if(indexes=vm.getSelectedGeometryIndex(g,mapBrowserEvent))return indexes.splice(0,0,index),!1}else if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else if(geom instanceof _vendor.ol.geom.MultiPolygon)_vendor.$.each(geom.getPolygons(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else if(geom instanceof _vendor.ol.geom.MultiPoint)_vendor.$.each(geom.getPoints(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else{if(!(geom instanceof _vendor.ol.geom.MultiLineString))return!1;_vendor.$.each(geom.getLineStrings(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1})}return indexes},selectInterFactory:function(options){var vm=this;return function(tool){selectedFeatures=tool&&tool.selectedFeatures||vm.selectedFeatures;var selectInter=new _vendor.ol.interaction.Select({layers:function(layer){return vm.selectable.indexOf(layer)>-1},features:selectedFeatures,condition:options&&options.condition||_vendor.ol.events.condition.singleClick});return selectInter.defaultHandleEvent=selectInter.defaultHandleEvent||selectInter.handleEvent,selectInter.handleEvent=function(event){if(!this.condition_(event))return vm.selecting=!1,this.defaultHandleEvent(event);try{return vm.selecting=!0,tool&&"geometry"===tool.selectMode&&vm.selectedFeatures.clear(),this.defaultHandleEvent(event)}finally{vm.selecting=!1}},selectInter.setMulti=function(multi){this.multi_=multi},tool&&"geometry"===tool.selectMode&&selectInter.on("select",function(ev){ev.mapBrowserEvent&&_vendor.$.each(ev.selected,function(index,f){var indexes=vm.getSelectedGeometryIndex(f.getGeometry(),ev.mapBrowserEvent);indexes?f.selectedIndex=indexes:delete f.selectedIndex})}),selectInter}},keyboardInterFactory:function(options){var vm=this;return vm._deleteSelected=vm._deleteSelected||function(features,selectedFeatures,interaction){features=features||this.features,selectedFeatures=selectedFeatures||vm.selectedFeatures,"feature"===vm.tool.selectMode?(selectedFeatures.forEach(function(feature){features.remove(feature)}),selectedFeatures.clear()):"geometry"===vm.tool.selectMode&&selectedFeatures.forEach(function(feature){vm.deleteSelectedGeometry(feature,this)})},function(tool){var keyboardInter=new _vendor.ol.interaction.Interaction({handleEvent:function(mapBrowserEvent){var stopEvent=!1;if(mapBrowserEvent.type===_vendor.ol.events.EventType.KEYDOWN){var keyEvent=mapBrowserEvent.originalEvent;switch(keyEvent.keyCode){case 65:options&&void 0!==options.selectEnabled&&!options.selectEnabled||keyEvent.ctrlKey&&(vm.selectAll(tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures),stopEvent=!0);break;case 46:options&&void 0!==options.deleteEnabled&&!options.deleteEnabled||(options&&options.deleteSelected?options.deleteSelected.call(keyboardInter,tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures):vm._deleteSelected.call(keyboardInter,tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures),stopEvent=!0)}}return stopEvent&&keyEvent.preventDefault(),!stopEvent}});return keyboardInter.events=options&&options.events||{},keyboardInter}},modifyInterFactory:function(options){var vm=this;return function(tool){var modifyInter=new _vendor.ol.interaction.Modify({features:tool&&tool.features||vm.features});return modifyInter.on("modifystart",function(ev){ev.features.forEach(function(feature){feature.geometryRevision=feature.getGeometry().getRevision()})}),modifyInter.on("modifyend",function(ev){var modifiedFeatures=new _vendor.ol.Collection(ev.features.getArray().filter(function(feature){return feature.geometryRevision!=feature.getGeometry().getRevision()}));modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",modifiedFeatures,ev))}),modifyInter.on("featuresmodified",function(ev){ev.features.forEach(function(f){f.get("toolName")&&(tool=vm.getTool(f.get("toolName")),tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0),f.changed()))})}),modifyInter}},icon:function(t){var iconUrl=null;return iconUrl="function"==typeof t.icon?t.icon():t.icon,iconUrl.startsWith("fa-")?'<i class="fa '+iconUrl+'" aria-hidden="true"></i>':iconUrl.search("#")===-1?'<img class="icon" src="'+iconUrl+'" />':'<svg class="icon"><use xlink:href="'+iconUrl+'"></use></svg>'},getCustomPointTint:function(shape,colours){var tint=[];return _vendor.$.each(shape[2],function(index,srcColour){var targetColour=Array.isArray(colours)?colours[index]:colours;srcColour&&targetColour&&srcColour!==targetColour&&tint.push([srcColour,targetColour])}),tint},setProp:function(prop,value){this[prop]=value,this.featureEditing instanceof _vendor.ol.Feature&&!this.featureEditing.get("note")&&this.featureEditing.set(prop,value)},setDefaultTool:function(menu,tool){"string"==typeof tool&&(tool=this.getTool(tool)),this._currentTool[menu]=tool},getTool:function(toolName){return toolName?this.tools.filter(function(t){return t.name===toolName})[0]:null},setTool:function(t){if(t||(t=this._previousActiveMenu&&this._previousActiveMenu!==this.activeMenu&&this._previousTool?this.ui.defaultPan:this.currentTool),"string"==typeof t&&(t=this.getTool(t)),this.tool===t&&(t===this.ui.defaultPan||this._previousActiveMenu===this.activeMenu))return void(this.currentTool=t);this.tool.onUnset&&this.tool.onUnset();var map=this.map;this.tools.forEach(function(tool){tool.interactions.forEach(function(inter){map.olmap.removeInteraction(inter)})}),t.interactions.forEach(function(inter){map.olmap.addInteraction(inter)}),t!==this.ui.defaultPan&&((this._previousActiveMenu&&this._previousActiveMenu!==this.activeMenu||this._previousTool&&this._previousTool!==t&&!t.keepSelection)&&this.selectedFeatures.clear(),this._previousTool=t,this._previousActiveMenu=this.activeMenu),t.cursor&&"string"==typeof t.cursor?(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor",t.cursor):t.cursor&&Array.isArray(t.cursor)?_vendor.$.each(t.cursor,function(index,value){(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor",value)}):(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor","default"),t.onSet&&t.onSet(this.tool),t.selectMode!==this.tool.selectMode&&this.selectedFeatures.forEach(function(f){f.changed()}),this.tool=t,this.currentTool=t},selectAll:function(features,selectedFeatures){features=features||this.features,selectedFeatures=selectedFeatures||this.selectedFeatures;features.forEach(function(feature){feature in selectedFeatures||selectedFeatures.push(feature)})},updateNote:function(save){var note=null;if(this.tool===this.ui.editStyle){if(!this.featureEditing||!this.featureEditing.get("note"))return;note=this.featureEditing.get("note")}else note=this.note;var previousColour=note.colour;note.text=this.$els.notecontent.value,note.colour=this.colour,this.drawNote(note,save),!save&&previousColour===this.colour||this.tool!==this.ui.editStyle||this.featureEditing.set("noteRevision",(this.featureEditing.get("noteRevision")||0)+1)},drawNote:function(note,save){if(note){var vm=this,noteCanvas=this.$els.textpreview;if((0,_vendor.$)(noteCanvas).removeLayer("decorationLayer"),(0,_vendor.$)(noteCanvas).removeLayer("textLayer"),(0,_vendor.$)(noteCanvas).clearCanvas(),note.style&&note.style in noteStyles){(0,_vendor.$)(noteCanvas).attr("height",(0,_vendor.$)(this.$els.notecontent).height()+noteOffset),(0,_vendor.$)(noteCanvas).attr("width",(0,_vendor.$)(this.$els.notecontent).width()+noteOffset),noteStyles[note.style](note).forEach(function(cmd){(0,_vendor.$)(noteCanvas)[cmd[0]](cmd[1])});var annotationSize=(0,_vendor.$)(noteCanvas).measureText("decorationLayer");if(note.size=[annotationSize.width+noteOffset+notePadding,annotationSize.height+notePadding],(0,_vendor.$)(noteCanvas).attr("width",note.size[0]),(0,_vendor.$)(noteCanvas).attr("height",note.size[1]),(0,_vendor.$)(noteCanvas).drawLayers(),save){var key=JSON.stringify(note);this.notes[key]="",noteCanvas.toBlob(function(blob){vm.notes[key]=window.URL.createObjectURL(blob),vm.features.getArray().forEach(function(f){JSON.stringify(f.get("note"))===key&&f.changed()}),vm.drawNote(vm.note,!1)},"image/png")}}}},getNoteUrl:function(note){var key=JSON.stringify(note);return key in this.notes||this.drawNote(note,!0),this.notes[key]},setup:function(){var vm=this,catalogue=this.$root.catalogue;this.map.getMapLayer("annotations")?this.active.isHidden(this.map.getMapLayer("annotations"))&&this.active.toggleHidden(this.map.getMapLayer("annotations")):catalogue.onLayerChange(catalogue.getLayer("annotations"),!0),this.selectable=[this.featureOverlay],this.setTool(),this.search.setSearchPointFunc(function(searchMethod,coords,name){if(vm.tool&&["DMS","MGA"].indexOf(searchMethod)>=0&&["Origin Point","Spot Fire","Road Closure","Custom Point"].indexOf(vm.tool.name)>=0){var feat=null;return vm.map.olmap.forEachFeatureAtPixel(vm.map.olmap.getPixelFromCoordinate(coords),function(f){var toolName=f.get("toolName");if(toolName&&["Origin Point","Spot Fire","Road Closure","Custom Point"].indexOf(toolName)>=0&&f.getGeometry().getCoordinates()[0]===coords[0]&&f.getGeometry().getCoordinates()[1]===coords[1])return feat=f,!0}),!feat&&(feat=new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coords)}),vm.drawingSequence+=1,feat.set("id",vm.drawingSequence),feat.set("toolName",vm.tool.name),feat.setStyle(vm.tool.style),feat.set("author",vm.whoami.email),feat.set("createTime",Date.now()),vm.tool.perpendicular&&feat.set("rotation",vm.getPerpendicular(coords)),vm.tool===vm.ui.defaultPoint&&(feat.set("shape",vm.shape,!0),feat.set("colour",vm.colour,!0)),vm.features.push(feat),!0)}})},tearDown:function(){this.search.setSearchPointFunc(null),this.selectable=null},getNoteExtent:function(feature){var note=feature.get("note");if(!note)return null;var map=this.map.olmap,bottomLeftCoordinate=feature.getGeometry().getFirstCoordinate(),bottomLeftPosition=map.getPixelFromCoordinate(bottomLeftCoordinate),upRightCoordinate=map.getCoordinateFromPixel([bottomLeftPosition[0]+note.size[0],bottomLeftPosition[1]-note.size[1]]);return[bottomLeftCoordinate[0],bottomLeftCoordinate[1],upRightCoordinate[0],upRightCoordinate[1]]},tintSelectedFeature:function(feature){var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&tool.selectedTint?"function"==typeof tool.selectedTint?feature.tint=tool.selectedTint(feature):feature.tint=tool.selectedTint:feature.tint="selected",tool&&tool.typeIcon&&(feature.typeIconTint=tool.typeIconSelectedTint||"selected"),feature.changed()},tintUnselectedFeature:function(feature){delete feature.tint;var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&tool.typeIcon&&delete feature.typeIconTint,feature.changed()},getStyleProperty:function(f,property,defaultValue,tool){var result=f[property]||f.get(property)||(tool||this.getTool(f.get("toolName"))||{})[property]||(void 0===defaultValue?"default":defaultValue);return"function"==typeof result?result(f):result},getIconStyleFunction:function(tints){var vm=this;return function(res){var f=this;if(void 0===f.tint||""===f.tint)selectMode="none",keySuffix="none";else if("geometry"!==vm.tool.selectMode)selectMode="all",keySuffix="all";else{var selectedGeometry=vm.getSelectedGeometry(f);selectedGeometry&&selectedGeometry instanceof _vendor.ol.geom.Point?(selectMode="partial",keySuffix=f.get("tint")+":partial"):(selectMode="none",keySuffix=f.get("tint")+":none")}var style=vm.map.cacheStyle(function(f){var tint=null,style=null;try{("none"===selectMode&&f.tint||"partial"===selectMode)&&(tint=f.tint,delete f.tint);var src=vm.map.getBlob(f,["icon","tint"],tints||{});if(!src)return!1;var rot=f.get("rotation")||0;style=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})}finally{tint&&(f.tint=tint)}if("partial"===selectMode){var src=vm.map.getBlob(f,["icon","tint"],tints||{});if(!src)return!1;var rot=f.get("rotation")||0;style=[style,new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})]}return style},f,["icon","tint","rotation"],keySuffix);return style}},getLabelStyleFunc:function(tints){var vm=this;return function(){var f=this,tool=null;tool=f.get("toolName")?vm.getTool(f.get("toolName"))||vm.tool:vm.tool;var tint=vm.getStyleProperty(f,"tint","",tool)+".text";return new _vendor.ol.style.Style({text:new _vendor.ol.style.Text({offsetX:12,text:f.get("label"),textAlign:"left",font:"12px Helvetica,Roboto,Arial,sans-serif",stroke:new _vendor.ol.style.Stroke({color:tints[tint],width:4})})})}},getVectorStyleFunc:function(tints){var vm=this;return function(){var f=this,tool=null;tool=f.get("toolName")?vm.getTool(f.get("toolName"))||vm.tool:vm.tool;if(void 0===f.tint||""===f.tint)selectMode="none";else if("geometry"!==vm.tool.selectMode)selectMode="all";else{var selectedGeometry=vm.getSelectedGeometry(f);selectedGeometry?selectedGeometry instanceof _vendor.ol.geom.Point?selectMode="none":selectMode="partial":selectMode="none"}var baseStyle=vm.map.cacheStyle(function(f){return"partial"===selectMode?[new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"fillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"colour","rgba(0,0,0,1.0)",tool),width:2*vm.getStyleProperty(f,"size",1,tool)})}),new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"selectedFillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"selectedColour","#2199e8",tool),width:2*vm.getStyleProperty(f,"size",1,tool)+2})}),new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},stroke:new _vendor.ol.style.Stroke({color:"#ffffff",width:2*vm.getStyleProperty(f,"size",1,tool)})})]:"all"===selectMode?[new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"selectedFillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"selectedColour","#2199e8",tool),width:2*vm.getStyleProperty(f,"size",1,tool)+2})}),new _vendor.ol.style.Style({stroke:new _vendor.ol.style.Stroke({color:"#ffffff",width:2*vm.getStyleProperty(f,"size",1,tool)})})]:new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"fillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"colour","rgba(0,0,0,1.0)",tool),width:2*vm.getStyleProperty(f,"size",1,tool)})})},f,["size","colour"],selectMode),typeIconStyle=null;if(!vm.getStyleProperty(f,"typeIcon",!1,tool))return baseStyle;if(f.typeIconStyle){var diffs=vm.map.getScale()/f.get("typeIconMetadata").points.scale,typeIconTint=f.typeIconTint||f.get("typeIconTint")||tool.typeIconTint||"default";if(diffs>=.5&&diffs<=1.5)if(typeIconTint===f.get("typeIconMetadata").points.tint)typeIconStyle=f.typeIconStyle;else{typeIconStyle=f.typeIconStyle;var newStyle=[],src=vm.map.getBlob(f,["typeIcon","typeIconTint","typeIconDims"],tints||{});if(!src)return baseStyle;_vendor.$.each(typeIconStyle,function(index,item){newStyle.push(new _vendor.ol.style.Style({geometry:item.getGeometry(),image:new _vendor.ol.style.Icon({src:src,rotation:item.getImage().getRotation(),rotateWithView:item.getImage().getRotateWithView(),snapToPixel:item.getImage().getSnapToPixel()})}))}),f.typeIconStyle=newStyle,f.get("typeIconMetadata").points.tint=typeIconTint,typeIconStyle=newStyle}else f.get("typeIconMetadata").points=!1}if(!typeIconStyle){var linestring=null;if(f.getGeometry()instanceof _vendor.ol.geom.Polygon)linestring=new _vendor.ol.geom.LineString(f.getGeometry().getCoordinates()[0]);else{if(!(f.getGeometry()instanceof _vendor.ol.geom.LineString))return baseStyle;linestring=f.getGeometry()}var src=vm.map.getBlob(f,["typeIcon","typeIconTint","typeIconDims"],tints||{});if(!src)return baseStyle;typeIconStyle=[];var segmentIndex=0,segmentMetadata=null,metadata=f.get("typeIconMetadata");metadata||(metadata={},f.set("typeIconMetadata",metadata,!0));var perimeter=0;if(!metadata.segments){var segmentsMetadata=[];linestring.forEachSegment(function(start,end){Math.atan2(end[1]-start[1],end[0]-start[0]);segmentMetadata={length:vm.measure.getLength([start,end]),rotation:-1*Math.atan2(end[1]-start[1],end[0]-start[0])+1*Math.PI/4},segmentsMetadata.push(segmentMetadata),perimeter+=segmentMetadata.length}),metadata.perimeter=perimeter,metadata.closed=linestring.getFirstCoordinate()[0]===linestring.getLastCoordinate()[0]&&linestring.getFirstCoordinate()[1]===linestring.getLastCoordinate()[1];var len=0;_vendor.$.each(segmentsMetadata,function(index,segmentMetadata){len+=segmentMetadata.length,segmentMetadata.position=len/perimeter}),metadata.segments=segmentsMetadata}if(!metadata.points){var pointsMetadata={},iconSize=tool.typeIconDims?tool.typeIconDims[0]:48;pointsMetadata.scale=vm.map.getScale();var perimeterInPixes=parseInt(metadata.perimeter/(1e3*pointsMetadata.scale)*1e3*vm.dpmm);perimeterInPixes<iconSize?(pointsMetadata.symbolSize=1,pointsMetadata.symbolPercentage=.5):perimeterInPixes<2*iconSize?(pointsMetadata.symbolSize=2,pointsMetadata.symbolPercentage=metadata.closed?.5:1):(pointsMetadata.symbolSize=parseInt(perimeterInPixes/(2*iconSize)),pointsMetadata.symbolPercentage=1/pointsMetadata.symbolSize,metadata.closed||(pointsMetadata.symbolSize=pointsMetadata.symbolSize+1)),pointsMetadata.tint=f.typeIconTint||f.get("typeIconTint")||tool.typeIconTint||"default",metadata.points=pointsMetadata}var symbolSize=metadata.points.symbolSize,symbolPercentage=metadata.points.symbolPercentage;if(1==symbolSize){var segmentIndex=metadata.segments.findIndex(function(segment){return segment.position>=symbolPercentage});typeIconStyle.push(new _vendor.ol.style.Style({geometry:new _vendor.ol.geom.Point(linestring.getCoordinateAt(symbolPercentage)),image:new _vendor.ol.style.Icon({src:src,rotation:metadata.segments[segmentIndex].rotation,rotateWithView:!0,snapToPixel:!0})}))}else for(var segmentIndex=0,segmentMetadata=metadata.segments[segmentIndex],symbolPoints=[],fromStartLength=segmentMetadata.length,fraction=null,i=0;i<=symbolSize;i++){if(i==symbolSize||segmentMetadata.position<i*symbolPercentage){if(typeIconStyle.push(new _vendor.ol.style.Style({geometry:new _vendor.ol.geom.MultiPoint(symbolPoints),image:new _vendor.ol.style.Icon({src:src,rotation:segmentMetadata.rotation,rotateWithView:!0,snapToPixel:!0})})),i==symbolSize)break;segmentIndex+=1,segmentMetadata=metadata.segments[segmentIndex],fromStartLength+=segmentMetadata.length,symbolPoints=[]}fraction=Math.min(Math.max(i*symbolPercentage,0),1),symbolPoints.push(linestring.getCoordinateAt(fraction))}f.typeIconStyle=typeIconStyle}return baseStyle.concat(typeIconStyle)}},initFeature:function(feature){var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&feature.setStyle(tool.style)}},ready:function(){var vm=this;vm._currentTool={},vm.shape=vm.pointShapes[0];var annotationStatus=this.loading.register("annotation","Annotation Component","Initialize"),map=this.map;this.features.on("add",function(ev){tool=vm.getTool(ev.element.get("toolName")),tool.onAdd&&tool.onAdd(ev.element)});var savedFeatures=this.$root.geojson.readFeatures(this.$root.store.annotations);this.$on("gk-init",function(){savedFeatures&&(_vendor.$.each(savedFeatures,function(index,feature){feature.get("id")||(vm.drawingSequence+=1,feature.set("id",vm.drawingSequence)),vm.initFeature(feature)}),this.features.extend(savedFeatures))}),this.selectedFeatures.on("add",function(ev){vm.tintSelectedFeature(ev.element)}),this.selectedFeatures.on("remove",function(ev){vm.tintUnselectedFeature(ev.element)}),this.featureOverlay=new _vendor.ol.layer.Vector({source:new _vendor.ol.source.Vector({features:this.features})}),this.featureOverlay.set("id","annotations"),this.featureOverlay.set("name","My Drawing"),this.ui.translateInter=this.translateInterFactory()(),this.ui.dragSelectInter=this.dragSelectInterFactory()(),this.ui.selectInter=this.selectInterFactory()(),this.ui.keyboardInter=this.keyboardInterFactory()(),this.ui.modifyInter=this.modifyInterFactory()(),this.ui.defaultPan={name:"Pan",icon:"fa-hand-paper-o",cursor:["-webkit-grab","-moz-grab"],scope:["annotation","bfrs","resourcetracking"],interactions:[map.dragPanInter,map.doubleClickZoomInter,map.keyboardPanInter,map.keyboardZoomInter]},this.ui.editStyle={name:"Edit Style",icon:"fa-pencil-square-o",scope:["annotation"],interactions:[this.ui.dragSelectInter,this.ui.selectInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!1),vm.ui.selectInter.setMulti(!1)}},this.ui.defaultSelect={name:"Select",
icon:"fa-mouse-pointer",scope:["annotation","resourcetracking"],interactions:[this.ui.keyboardInter,this.ui.dragSelectInter,this.ui.selectInter,this.ui.translateInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!0),vm.ui.selectInter.setMulti(!0)}},this.ui.defaultEdit={name:"Edit Geometry",icon:"fa-pencil",scope:["annotation"],interactions:[this.ui.keyboardInter,this.ui.selectInter,this.ui.dragSelectInter,this.ui.modifyInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!1),vm.ui.selectInter.setMulti(!1)}},this.tools=[this.ui.defaultPan,this.ui.defaultSelect,this.ui.defaultEdit,this.ui.editStyle];var noteStyleCache={},noteStyle=function(res){var f=this,url="";if(!f)return null;url=vm.getNoteUrl(f.get("note"));var tint=f.tint||f.get("tint")||"notselected";if(noteStyleCache[url]||(noteStyleCache[url]=[]),!noteStyleCache[url][tint]){var color="selected"==tint?"#70BDF0":void 0;noteStyleCache[url][tint]=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({anchorOrigin:"bottom-left",anchor:[0,0],color:color,src:url})})}return noteStyleCache[url][tint]};this.ui.defaultText={name:"Text Note",icon:"fa-comment",style:noteStyle,interactions:[vm.pointDrawFactory()],showName:!0,scope:["annotation"],onAdd:function(f){f.getGeometry().defaultGetExtent=f.getGeometry().defaultGetExtent||f.getGeometry().getExtent,f.getGeometry().getExtent=function(){return vm.selecting?vm.getNoteExtent(f):this.defaultGetExtent()},f.get("note")||f.set("note",_vendor.$.extend({},vm.note))}};var customAdd=function(f){f.get("size")||f.set("size",vm.size),f.get("colour")||f.set("colour",vm.colour)},customPointAdd=function(f){f.get("shape")||f.set("shape",vm.shape),f.get("colour")||f.set("colour",vm.colour)};this.ui.defaultPoint={name:"Custom Point",icon:function(feature){return feature?feature.get("shape")[0]:"dist/static/symbols/fire/custom_point.svg"},interactions:[this.pointDrawFactory()],showName:!0,scope:["annotation"],onAdd:customPointAdd,style:vm.getIconStyleFunction(vm.tints),sketchStyle:function(res){var feat=this;feat.set("shape",vm.shape,!0),feat.set("colour",vm.colour,!0);var style=vm.map.cacheStyle(function(feat){var src=vm.map.getBlob(feat,["icon","tint"],vm.tints||{});if(!src)return!1;var rot=feat.get("rotation")||0;return new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})},feat,["icon","tint","rotation"]);return style},tint:function(feature){var shape=feature.get("shape"),colour=feature.get("colour");return shape?vm.getCustomPointTint(shape,[null,colour]):"default"},selectedTint:function(feature){var shape=feature.get("shape");return shape?vm.getCustomPointTint(shape,["#2199e8","#2199e8"]):"selected"}},this.ui.defaultLine={name:"Custom Line",icon:"dist/static/images/iD-sprite.svg#icon-line",interactions:[this.linestringDrawFactory()],showName:!0,scope:["annotation"],onAdd:customAdd,style:vm.getVectorStyleFunc(this.tints),comments:[{name:"Tips",description:["Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},this.ui.defaultPolygon={name:"Custom Area",icon:"dist/static/images/iD-sprite.svg#icon-area",interactions:[this.polygonDrawFactory()],showName:!0,scope:["annotation"],onAdd:customAdd,style:vm.getVectorStyleFunc(this.tints),measureLength:!0,measureArea:!0,comments:[{name:"Tips",description:["Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]};var getFeatureInfo=function(feature){var tool=vm.getTool(feature.get("toolName")),icon=tool.icon;return"function"==typeof icon&&(icon=icon(feature)),icon?icon.startsWith("fa-")?{name:tool.name,icon:"fa "+icon}:icon.search("#")===-1?{name:tool.name,img:icon}:{name:tool.name,svg:icon}:{name:tool.name}};this.$root.catalogue.catalogue.push({type:"Annotations",id:"annotations",name:"My Drawing",getFeatureInfo:getFeatureInfo}),this.measure.register("annotations",this.features),annotationStatus.wait(30,"Listen 'gk-init' event"),this.$on("gk-init",function(){annotationStatus.progress(80,"Process 'gk-init' event"),_vendor.$.each(vm.tools,function(index,tool){_vendor.$.each(tool.interactions,function(subindex,interact){"function"==typeof interact&&(tool.interactions[subindex]=interact(tool))}),tool.keepSelection=void 0!==tool.keepSelection&&tool.keepSelection,tool.selectMode=void 0==tool.selectMode?"feature":tool.selectMode,tool.label||(tool.label=tool.name)}),vm.annotationTools=this.tools.filter(function(t){return t.scope&&t.scope.indexOf("annotation")>=0}),vm.setDefaultTool("annotations","Edit"),annotationStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-annotations" v-cloak="">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="annotations-tabs">\n        <li class="tabs-title is-active"><a class="label" aria-selected="true">Drawing Tools</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="annotations-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="annotations-tabs">\n\n        <div class="tabs-panel is-active" id="annotations-edit" v-cloak="">\n          <div class="tool-slice row collapse">\n            <div class="small-12">\n              <div class="expanded button-group">\n                <a v-for="t in annotationTools | filterIf \'showName\' undefined" class="button button-tool" v-bind:class="{\'selected\': t.name == tool.name}" @click="setTool(t)" v-bind:title="t.label">{{{ icon(t) }}}</a>\n              </div>\n              <div class="row resetmargin">\n                <div v-for="t in annotationTools | filterIf \'showName\' true" class="small-6" v-bind:class="{\'rightmargin\': $index % 2 === 0}">\n                  <a class="expanded secondary button" v-bind:class="{\'selected\': t.name == tool.name}" @click="setTool(t)" v-bind:title="t.label">{{{ icon(t) }}} {{ t.label }}</a>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="small-12">\n              <div class="expanded button-group hide">\n                <a class="button"><i class="fa fa-cut" aria-hidden="true"></i> Cut</a>\n                <a class="button"><i class="fa fa-copy" aria-hidden="true"></i> Copy</a>\n                <a class="button"><i class="fa fa-paste" aria-hidden="true"></i> Paste</a>\n              </div>\n\n              <div class="expanded button-group">\n                <gk-drawinglogs v-ref:drawinglogs=""></gk-drawinglogs>\n              </div>\n\n              <div class="expanded button-group">\n                <label class="button " for="uploadAnnotations" title="Support GeoJSON(.geojson .json), GPS data(.gpx), GeoPackage(.gpkg)"><i class="fa fa-upload"></i> Import Editing </label><input type="file" id="uploadAnnotations" class="show-for-sr" name="annotationsfile" accept=".json,.geojson,.gpx,.gpkg" v-model="annotationsfile" v-el:annotationsfile="" @change="importAnnotations()">\n                <a class="button" @click="downloadAnnotations(\'geojson\')" title="Export Editing as GeoJSON"><i class="fa fa-download" aria-hidden="true"></i> Export Editing <br>(geojson) </a>\n                <a class="button" @click="downloadAnnotations(\'gpkg\')" title="Export Editing as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i> Export Editing <br>(gpkg)</a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowShapePicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Shape:</label></div>\n            <div class="small-10">\n              <div class="expanded button-group">\n                <template v-for="s in pointShapes">\n                  <a @click="setProp(\'shape\', s)" v-bind:class="{\'selected\': shape &amp;&amp; (s[0] === shape[0])}" class="button pointshape"><img v-bind:src="s[0]"></a>\n                </template>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowSizePicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Size:<br>({{ size }})</label></div>\n            <div class="small-10">\n              <div class="expanded button-group">\n                <a @click="setProp(\'size\', 1)" v-bind:class="{\'selected\': size == 1}" class="button"><img src="dist/static/images/thick-1.svg"></a>\n                <a @click="setProp(\'size\', 2)" v-bind:class="{\'selected\': size == 2}" class="button"><img src="dist/static/images/thick-2.svg"></a>\n                <a @click="setProp(\'size\', 4)" v-bind:class="{\'selected\': size == 4}" class="button"><img src="dist/static/images/thick-4.svg"></a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowColourPicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Colour:</label></div>\n            <div class="small-10">\n              <div @click="updateNote(false)" class="expanded button-group">\n                <a v-for="c in colours" class="button" title="{{ c[0] }}" @click="setProp(\'colour\', c[1])" v-bind:class="{\'selected\': c[1] == colour}" v-bind:style="{ backgroundColor: c[1] }"></a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowNoteEditor" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Note:</label></div>\n            <div class="small-10">\n              <select name="select" @change="note.text = $event.target.value.split(\'<br>\').join(\'\\n\')">\n                <option value="">Text Templates</option> \n                <option value="Sector: <br>Channel: <br>Commander: " selected="">Sector Details</option>\n              </select>\n              <textarea @blur="updateNote(true)" class="notecontent" v-el:notecontent="" @keyup="updateNote(false)" @click="updateNote(true)" @mouseup="updateNote(false)">{{ note.text }}</textarea>\n            </div>\n          </div>\n\n          <div v-show="shouldShowComments" class="tool-slice row collapse">\n            <hr class="small-12">\n            <template v-for="comment in tool.comments">\n                <div class="small-2">{{comment.name}}:</div>\n                <div class="small-10">\n                  <template v-for="description in comment.description">\n                      {{description}}\n                      <br>\n                  </template>\n                </div>\n            </template>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="small-12 canvaspane">\n              <canvas v-show="shouldShowNoteEditor" v-el:textpreview=""></canvas>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.notecontent {\n  width: 100%;\n  height: 100px;\n  resize: both;\n  background-image: url('dist/static/images/boxresize.svg');\n  background-repeat: no-repeat;\n  background-position: right bottom;\n}\n.canvaspane {\n  overflow: hidden;\n  width: 100px;\n  height: 30vh;\n}\n.row.resetmargin {\n  margin: 0px;\n}\n.resetmargin .small-6.rightmargin {\n  margin-right: 1px;\n}\n.resetmargin .small-6 {\n  margin-right: -1px;\n  padding-right: 1px;\n}\n.resetmargin .expanded.button {\n  margin-bottom: 2px;\n}\n.fa.red {\n  color: #b43232;\n}\n.pointshape {\n  padding-left:5px;\n  padding-right:5px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-e7768fb0",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-e7768fb0",module.exports))}()},{"./drawinglogs.vue":13,"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],13:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.drawinglog {\n    padding-left:5px;\n    padding-right:5px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_vendor=require("src/vendor.js");exports.default={store:["drawingLogs","redoPointer","settings"],data:function(){return{modifyingFeatures:{}}},computed:{annotations:function(){return this.$root.annotations},loading:function(){return this.$root.loading},setting:function(){return this.$root.setting},undoSteps:function(){return this.drawingLogs.length&&this.redoPointer},redoSteps:function(){return this.drawingLogs.length&&this.drawingLogs.length-this.redoPointer},size:{get:function(){return this.settings.undoLimit},set:function(val){val<0?this.settings.undoLimit>=0&&(this.off(),this.setting.saveState()):this.settings.undoLimit<0?(this.on(val),this.setting.saveState()):this.settings.undoLimit!==val&&(this.settings.undoLimit=val,this.setting.saveState())}}},methods:{on:function(limit){if(limit=limit||0,limit<0)return void this.off();var vm=this,attachChangeEventListener=function(feature){var featureId=feature.get("id");feature.getGeometry()._changeListenerId=feature.getGeometry()._changeListenerId||feature.getGeometry().on("change",vm._eventHandlers["geometry:change"](feature,featureId));var tool=!!feature.get("toolName")&&vm.annotations.getTool(feature.get("toolName"));if(tool)if(tool===vm.annotations.ui.defaultText){var previousNote={},note=feature.get("note");note&&(_vendor.$.each(note,function(key,value){previousNote[key]=value}),feature.previousNote=previousNote),feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["text:propertychange"](feature))}else tool===vm.annotations.ui.defaultLine||tool===vm.annotations.ui.defaultPolygon?feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["vector:propertychange"](feature)):tool===vm.annotations.ui.defaultPoint&&(feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["pointer:propertychange"](feature)))};vm.annotations.features.forEach(function(feature){attachChangeEventListener(feature)}),vm._eventListenerIds["features:change"]=vm._eventListenerIds["features:change"]||vm.annotations.features.on("add",function(ev){attachChangeEventListener(ev.element)}),vm._eventListenerIds["features:add"]=vm._eventListenerIds["features:add"]||vm.annotations.features.on("add",function(ev){vm._undoRedoMode||vm.addFeatures(ev.element)}),vm._eventListenerIds["features:remove"]=vm._eventListenerIds["features:remove"]||vm.annotations.features.on("remove",function(ev){vm._undoRedoMode||vm.removeFeatures(ev.element)}),vm._eventListenerIds["translateInter:translateend"]=vm._eventListenerIds["translateInter:translateend"]||vm.annotations.ui.translateInter.on("translateend",function(ev){vm._undoRedoMode||vm.modifyFeatures(ev.features)}),vm._eventListenerIds["modifyInter:modifyend"]=vm._eventListenerIds["modifyInter:modifyend"]||vm.annotations.ui.modifyInter.on("modifyend",function(ev){vm._undoRedoMode||vm.modifyFeatures(ev.features)}),vm._keyboardInter=vm._keyboardInter||new _vendor.ol.interaction.Interaction({handleEvent:function(mapBrowserEvent){var stopEvent=!1;if(mapBrowserEvent.type===_vendor.ol.events.EventType.KEYDOWN){var keyEvent=mapBrowserEvent.originalEvent;switch(keyEvent.keyCode){case 90:keyEvent.ctrlKey&&(vm.undo(),stopEvent=!0);break;case 89:vm.redo(),stopEvent=!0}}return stopEvent&&keyEvent.preventDefault(),!stopEvent}}),vm.$root.map.olmap.addInteraction(vm._keyboardInter),vm.settings.undoLimit=limit},off:function(){var vm=this;vm.annotations.features.forEach(function(feature){feature.getGeometry()._changeListenerId&&(feature.getGeometry().unByKey(feature.getGeometry()._changeListenerId),delete feature.getGeometry()._changeListenerId),feature._propertyChangeListenerId&&(feature.unByKey(feature._propertyChangeListenerId),delete feature._propertyChangeListenerId)}),vm._eventListenerIds["features:change"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:change"]),delete vm._eventListenerIds["features:change"]),vm._eventListenerIds["features:add"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:add"]),delete vm._eventListenerIds["features:add"]),vm._eventListenerIds["features:remove"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:remove"]),delete vm._eventListenerIds["features:remove"]),vm._eventListenerIds["translateInter:translateend"]&&(vm.annotations.ui.translateInter.unByKey(vm._eventListenerIds["translateInter:translateend"]),delete vm._eventListenerIds["translateInter:translateend"]),vm._eventListenerIds["modifyInter:modifyend"]&&(vm.annotations.ui.modifyInter.unByKey(vm._eventListenerIds["modifyInter:modifyend"]),delete vm._eventListenerIds["modifyInter:modifyend"]),vm._keyboardInter&&vm.$root.map.olmap.removeInteraction(vm._keyboardInter),vm.drawingLogs.splice(0,vm.drawingLogs.length),vm.redoPointer=0,vm.settings.undoLimit=-1},addFeatures:function(features){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["C",JSON.parse(this.$root.geojson.writeFeatures(features))])},removeFeatures:function(features){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["R",JSON.parse(this.$root.geojson.writeFeatures(features))])},modifyFeatures:function(features){var vm=this;features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),features=features.filter(function(f){return f.get("id")in vm._modifyingFeatureIds}),features.length&&this.addLog(["U",JSON.parse(this.$root.geojson.writeFeatures(this._modifyingFeatures)),JSON.parse(this.$root.geojson.writeFeatures(features))]),this._modifyingFeatures=[],this._modifyingFeatureIds={}},modifyFeaturesProperty:function(features,property,oldValue,newValue){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["P",features.map(function(feature){return feature.get("id")}),property,oldValue,newValue])},addLog:function(log){this.drawingLogs.splice(this.redoPointer,this.drawingLogs.length-this.redoPointer,log),this.size>0&&this.drawingLogs.length>this.size&&this.drawingLogs.splice(0,this.drawingLogs.length-this.size),this.redoPointer=this.drawingLogs.length},cleanLogs:function(){window.confirm("This will clear all change logs, and you can't undo/redo previous drawings anymore. Are you sure?")&&(this.drawingLogs.splice(0,this.drawingLogs.length),this.redoPointer=0)},undo:function(){var vm=this;vm.annotations.setTool("Pan");try{if(vm._undoRedoMode=!0,vm.undoSteps<=0)return;var undoIndex=vm.redoPointer-1;if("C"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.selectedFeatures.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});index>=0&&vm.annotations.selectedFeatures.removeAt(index),index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")}),index>=0&&vm.annotations.features.removeAt(index)})}else if("R"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){vm.annotations.initFeature(feature),vm.annotations.features.push(feature)})}else if("U"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});if(index>=0){var f=vm.annotations.features.item(index),tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0)),f.setGeometry(feature.getGeometry()),f.getGeometry().on("change",vm._eventHandlers["geometry:change"](f,feature.get("id"))),vm.annotations.ui.modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",new _vendor.ol.Collection([f]),null))}})}else{if("P"!==vm.drawingLogs[undoIndex][0])return void alert("Not support");var changedFeatureIds=vm.drawingLogs[undoIndex][1];_vendor.$.each(changedFeatureIds,function(i,featureId){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===featureId});if(index>=0){var f=vm.annotations.features.item(index);if("object"===_typeof(vm.drawingLogs[undoIndex][3])){f.set(vm.drawingLogs[undoIndex][2],_vendor.$.extend(f.get(vm.drawingLogs[undoIndex][2]),vm.drawingLogs[undoIndex][3])),f.changed();var tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));if(tool&&tool===vm.annotations.ui.defaultText){var note=f.get("note");f.previousNote={},_vendor.$.each(note,function(key,value){f.previousNote[key]=value})}}else f.set(vm.drawingLogs[undoIndex][2],vm.drawingLogs[undoIndex][3])}})}vm.redoPointer=undoIndex}finally{vm._undoRedoMode=!1}},redo:function(){var vm=this;vm.annotations.setTool("Pan");try{if(vm._undoRedoMode=!0,vm.redoSteps<=0)return;if("C"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][1]);_vendor.$.each(changedFeatures,function(i,feature){vm.annotations.initFeature(feature),vm.annotations.features.push(feature)})}else if("R"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});index>=0&&vm.annotations.features.removeAt(index)})}else if("U"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][2]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});if(index>=0){var f=vm.annotations.features.item(index),tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0)),f.setGeometry(feature.getGeometry()),f.getGeometry().on("change",vm._eventHandlers["geometry:change"](f,feature.get("id"))),vm.annotations.ui.modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",new _vendor.ol.Collection([f]),null))}})}else{if("P"!==vm.drawingLogs[vm.redoPointer][0])return void alert("Not support");var changedFeatureIds=vm.drawingLogs[vm.redoPointer][1];_vendor.$.each(changedFeatureIds,function(i,featureId){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===featureId});if(index>=0){var f=vm.annotations.features.item(index);if("object"===_typeof(vm.drawingLogs[vm.redoPointer][4])){f.set(vm.drawingLogs[vm.redoPointer][2],_vendor.$.extend(f.get(vm.drawingLogs[vm.redoPointer][2]),vm.drawingLogs[vm.redoPointer][4])),f.changed();var tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));if(tool&&tool===vm.annotations.ui.defaultText){var note=f.get("note");f.previousNote={},_vendor.$.each(note,function(key,value){f.previousNote[key]=value})}}else f.set(vm.drawingLogs[vm.redoPointer][2],vm.drawingLogs[vm.redoPointer][4])}})}vm.redoPointer+=1}finally{vm._undoRedoMode=!1}},changeUndoLimit:function(){}},ready:function(){var vm=this,logStatus=this.loading.register("drawinglogs","Drawing Logs Component","Initialize");vm._undoRedoMode=!1,vm._modifyingFeatures=[],vm._modifyingFeatureIds={},vm._eventHandlers={},vm._eventListenerIds={},logStatus.wait(10,"Declare event handlers"),vm._eventHandlers["geometry:change"]=function(feature,featureId){return function(ev){if(!(vm._undoRedoMode||featureId in vm._modifyingFeatureIds)){vm._modifyingFeatureIds[featureId]=!0;var tmpFeature=feature.clone();tmpFeature.setProperties({},!0),vm._modifyingFeatures.push(tmpFeature)}}},vm._eventHandlers["text:propertychange"]=function(feature){return function(ev){if(vm.annotations.tool===vm.annotations.ui.editStyle&&"noteRevision"===ev.key){var previousNote=feature.previousNote,note=feature.get("note");if(previousNote){var changed=!1;if(_vendor.$.each(["colour","text"],function(index,key){if(previousNote[key]!==note[key])return changed=!0,!1}),changed){var currentNote={};_vendor.$.each(note,function(key,value){currentNote[key]=value}),vm.modifyFeaturesProperty(feature,"note",previousNote,currentNote),feature.previousNote=currentNote}}}else if("note"===ev.key){var note=feature.get("note");feature.previousNote={},_vendor.$.each(note,function(key,value){feature.previousNote[key]=value})}}},vm._eventHandlers["vector:propertychange"]=function(feature){return function(ev){vm._undoRedoMode||vm.annotations.tool!==vm.annotations.ui.editStyle||"colour"!==ev.key&&"size"!==ev.key||vm.modifyFeaturesProperty(feature,ev.key,ev.oldValue,feature.get(ev.key))}},vm._eventHandlers["pointer:propertychange"]=function(feature){return function(ev){vm._undoRedoMode||vm.annotations.tool!==vm.annotations.ui.editStyle||"colour"!==ev.key&&"shape"!==ev.key||vm.modifyFeaturesProperty(feature,ev.key,ev.oldValue,feature.get(ev.key))}},logStatus.wait(30,"Listen 'gk-postinit' event"),vm.$on("gk-postinit",function(){logStatus.wait(70,"Attach event handlers for recording logs"),this.on(vm.settings.undoLimit),logStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<a class="button drawinglog" v-bind:disabled="undoSteps == 0" @click="undo()"><i class="fa fa-undo" aria-hidden="true"></i> Undo ({{undoSteps}}/{{drawingLogs.length}})</a>\n<a class="button drawinglog" v-bind:disabled="redoSteps == 0" @click="redo()"><i class="fa fa-repeat" aria-hidden="true"></i> Redo ({{redoSteps}}/{{drawingLogs.length}})</a>\n<a class="button drawinglog" v-bind:disabled="drawingLogs.length == 0" @click="cleanLogs()"><i class="fa fa-trash" aria-hidden="true"></i> Clean ({{drawingLogs.length}})</a>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.drawinglog {\n    padding-left:5px;\n    padding-right:5px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-2f5a095e",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-2f5a095e",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],14:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{hoverInfo:"settings.hoverInfo"},data:function(){return{features:!1,coordinate:"",offset:0,pixel:[0,0]}},computed:{map:function(){return this.$root.$refs.app.$refs.map},catalogue:function(){return this.$root.catalogue},annotations:function(){return this.$root.$refs.app.$refs.annotations},loading:function(){return this.$root.loading},featuresLength:function(){return Object.keys(this.features).length},css:function css(){var map=this.$root.map,css={left:this.pixel[0]+this.offset+"px",top:this.pixel[1]+this.offset+"px",bottom:map.height-this.pixel[1]+this.offset+"px",right:map.width-this.pixel[0]+this.offset+"px",display:"none"};return this.pixel[0]<map.width/2?delete css.right:delete css.left,this.pixel[1]<map.height/2?delete css.bottom:delete css.top,this.pixel[0]>0&&this.enabled&&delete css.display,css},enabled:function(){return this.hoverInfo&&"Pan"===this.$root.annotations.tool.name}},methods:{onPointerMove:function(event){var vm=this;if(!event.dragging&&this.enabled){var pixel=this.$root.map.olmap.getEventPixel(event.originalEvent),features=[];this.$root.map.olmap.forEachFeatureAtPixel(pixel,function(f,layer){(!vm.annotations.selectable||vm.annotations.selectable.indexOf(layer)>=0)&&features.push([f,layer])}),features.length>0?(this.features=features,this.coordinate=_vendor.ol.coordinate.toStringXY(this.$root.map.olmap.getCoordinateFromPixel(pixel),3),this.pixel=pixel):(this.pixel.$set(0,0),this.features=!1)}},selected:function(f){return this.$root.annotations.selectedFeatures.getArray().indexOf(f)>-1},featureInfo:function(feature,mapLayer){if(this._feature===feature)return this._featureInfo;var layer=mapLayer?this.catalogue.getLayer(mapLayer.get("id")):null;return layer&&layer.getFeatureInfo?this._featureInfo=layer.getFeatureInfo(feature):this._featureInfo={name:feature.getId(),img:!1,svg:!1,icon:!1,comments:!1},this._feature=feature,this._featureInfo}},ready:function(){var vm=this,infoStatus=vm.loading.register("info","Info Component","Initialize");infoStatus.wait(10,"Listen 'gk-init' event"),this.$on("gk-init",function(){infoStatus.progress(80,"Process 'gk-init' event"),this.$root.map.olmap.on("pointermove",this.onPointerMove),infoStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div id="info" v-bind:style="css" v-show="features" v-cloak="">\n  <div class="row collapse">\n    <div class="columns title">\n      <h5>{{ featuresLength }} {{ featuresLength | pluralize \'feature\' }} <small>{{ coordinate }}</small></h5>\n    </div>\n    <button class="close-button float-right" aria-label="Dismiss info" type="button" v-on:click="features = false"><span aria-hidden="true"></span></button>\n  </div>\n  <div class="row">\n    <div class="columns content">\n      <div v-for="f in features" class="row feature-row" v-bind:class="{\'feature-selected\': selected(f[0]) }" v-bind:key="f[0].get(\'id\')">\n        <div class="feature-title">\n          <img v-if="featureInfo(f[0],f[1]).img" class="feature-icon" v-bind:src="featureInfo(f[0],f[1]).img">\n          <svg v-if="featureInfo(f[0],f[1]).svg" class="feature-icon"><use v-bind="{\'xlink:href\':featureInfo(f[0],f[1]).svg}"></use></svg>\n          <i v-if="featureInfo(f[0],f[1]).icon" class="feature-icon" v-bind:class="featureInfo(f[0],f[1]).icon" aria-hidden="true"></i>\n          {{featureInfo(f[0],f[1]).name}} <i v-if="featureInfo(f[0],f[1]).comments"><small>{{{featureInfo(f[0],f[1]).comments}}}</small></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-54c3355a",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-54c3355a",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],15:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{
default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _active=require("./layers/active.vue"),_active2=_interopRequireDefault(_active),_catalogue=require("./layers/catalogue.vue"),_catalogue2=_interopRequireDefault(_catalogue),_export=require("./layers/export.vue"),_export2=_interopRequireDefault(_export);exports.default={store:{activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},components:{gkActive:_active2.default,gkCatalogue:_catalogue2.default,gkExport:_export2.default},methods:{setup:function(){this.$root.annotations.setTool()}},ready:function(){var vm=this;$("#layers-tabs").on("change.zf.tabs",function(target,selectedTab){var menu=selectedTab.attr("menu");vm.activeSubmenu&&vm.activeSubmenu===menu||(vm.activeSubmenu&&vm.$root[vm.activeSubmenu].teardown&&vm.$root[vm.activeSubmenu].teardown(),vm.activeSubmenu=menu,vm.activeSubmenu&&vm.$root[vm.activeSubmenu].setup&&vm.$root[vm.activeSubmenu].setup())})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel is-active" id="menu-tab-layers">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" data-tabs="" id="layers-tabs">\n        <li class="tabs-title is-active" menu="active"><a href="#layers-active" aria-selected="true">Active</a></li>\n        <li class="tabs-title" menu="catalogue"><a href="#layers-catalogue">Browse Layers</a></li>\n        <li class="tabs-title" menu="export"><a href="#layers-export">Save &amp; Print</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="layers-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="layers-tabs">\n        <gk-active v-ref:active=""></gk-active>\n        <gk-catalogue v-ref:catalogue=""></gk-catalogue>\n        <gk-export v-ref:export=""></gk-export>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-c2b57224",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-c2b57224",module.exports))}()},{"./layers/active.vue":16,"./layers/catalogue.vue":17,"./layers/export.vue":18,vue:6,"vue-hot-reload-api":5}],16:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},data:function(){return{sliderOpacity:0,layer:{},layerRefreshStopped:!1,refreshRevision:1,olLayers:[],timeIndex:0}},computed:{sliderTimeline:{get:function(){var mapLayer=this.mapLayer();return this.timeIndex=mapLayer?mapLayer.get("timeIndex")||0:0,this.timeIndex},set:function(val){this.mapLayer().set("timeIndex",val),this.refreshRevision+=1,this.timeIndex=val}},timelineTS:function(){var mapLayer=this.mapLayer();return this.refreshRevision&&this.layer.timeline[mapLayer?mapLayer.get("timeIndex")||0:0][0]},sliderMax:function(){return this.layer.timeline.length-1},layerOpacity:{get:function(){return Math.round(100*this.mapLayer().getOpacity())},set:function(val){this.mapLayer().setOpacity(val/100)}},layerRefreshInterval:{get:function(){return this.layer.refresh},set:function(val){var vm=this;vm.layer.refresh=val,vm.layerRefreshStopped||(vm.layer.changeRefreshInterval=vm.layer.changeRefreshInterval||global.debounce(function(){vm.mapLayer().stopAutoRefresh(),vm.mapLayer().startAutoRefresh()},5e3),vm.layer.changeRefreshInterval())}},formattedLayerRefreshInterval:function(){if(this.layerRefreshStopped)return"Stopped";var format="H\\hm\\ms\\s";return this.layer.refresh<60?format="s\\s":this.layer.refresh<3600&&(format="m\\ms\\s"),(0,_vendor.moment)(new Date(1e3*this.layer.refresh)).utc().format(format)}},watch:{layer:function(){this.layerRefreshStopped=!this.layer.refresh||(this.layer.autoRefreshStopped||!1)},screenHeight:function(newValue,oldValue){this.adjustHeight()}},methods:{adjustHeight:function(){if("layers"===this.activeMenu&&"active"===this.activeSubmenu){var height=this.screenHeight-this.leftPanelHeadHeight-180;height>65?($("#layers-active-list-container").height(height),$("#layer-config-container").height()<180&&$("#layer-config-container").height(180)):height<=-30?($("#layers-active-list-container").height(this.screenHeight-this.leftPanelHeadHeight),$("#layer-config-container").height(0)):($("#layers-active-list-container").height(65),$("#layer-config-container").height(this.screenHeight-this.leftPanelHeadHeight-65))}},setup:function(){this.adjustHeight()},isHidden:function(layer){return layer?0===layer.getOpacity():void 0},toggleHidden:function(layer){this.isHidden(layer)?layer.setOpacity(1):layer.setOpacity(0)},stopLayerRefresh:function(){this.mapLayer().stopAutoRefresh(),this.layer.autoRefreshStopped=!0,this.layerRefreshStopped=!0},startLayerRefresh:function(){this.mapLayer().startAutoRefresh(),this.layer.autoRefreshStopped=!1,this.layerRefreshStopped=!1},layerRefreshConfigable:function(id){var layer=id?this.getLayer(id):this.layer;return layer&&("WFSLayer"===layer.type||"TileLayer"===layer.type)&&layer.refresh&&!0},layerRefreshIntervalConfigable:function(id){var layer=id?this.getLayer(id):this.layer;return("WFSLayer"===layer.type||"TileLayer"===layer.type)&&layer.refresh&&layer.min_interval&&layer.max_interval&&!0},layerRefreshProgress:function(l){return this.refreshRevision&&(l.progress||"")},layerRefreshStatus:function(l){return this.refreshRevision&&l&&l.get("updated")||""},activeLayers:function(){var catalogue=this.$root.catalogue,results=[],success=this.olLayers.every(function(layer){var catLayer=catalogue.getLayer(layer);if(!catLayer)return!1;var options={id:layer.get("id"),opacity:layer.getOpacity()};return results.push([layer.get("id"),options]),!0});return!!success&&results.reverse()},mapLayer:function(id){return this.$root.map?this.$root.map.getMapLayer(id||this.layer):null},getLayer:function(id){return this.$root.catalogue.getLayer(id)},update:function(){var vm=this;vm.olLayers=[],_vendor.Vue.nextTick(function(){vm.olLayers=vm.$root.map.olmap.getLayers().getArray()})},removeLayer:function(olLayer){olLayer.postRemove&&olLayer.postRemove(),this.$root.map.olmap.removeLayer(olLayer)},updateOrder:function(el){var map=this.$root.map;Array.prototype.slice.call(el.parentNode.children).reverse().forEach(function(row){var layer=map.getMapLayer(row.dataset.id);map.olmap.removeLayer(layer),map.olmap.addLayer(layer)})}},ready:function(){(0,_vendor.dragula)([document.querySelector("#layers-active-list")]).on("dragend",this.updateOrder),this.$on("gk-init",function(){this.olLayers=this.$root.map.olmap.getLayers().getArray()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel is-active" id="layers-active" v-cloak="">\n\n  <div class="layers-flexibleframe scroller row" id="layers-active-list-container">\n    <div class="columns">\n\n      <div id="layers-active-list">\n        <div v-for="l in olLayers.slice().reverse()" class="row feature-row status-row" v-bind:class="layerRefreshProgress(l)" data-id="{{ l.get(\'id\') }}" track-by="values_.id" @click="layer = getLayer(l.get(\'id\'))">\n          <div class="small-9">\n            <div class="layer-title">{{ l.get("name") || l.get("id") }} - {{ Math.round(l.getOpacity() * 100) }}%</div>\n            <small v-if="layerRefreshStatus(l)" style="white-space:pre-wrap">Updated: {{ layerRefreshStatus(l) }}</small>\n          </div>\n          <div class="small-3">\n            <div class="text-right">\n              <a @click.stop="toggleHidden(l)" class="button small" v-bind:title="isHidden(l)?\'Show in map\':\'Hide in map\'">\n                  <i class="fa fa-eye" v-if="isHidden(l)"> </i>\n                  <i class="fa fa-eye-slash" v-if="!isHidden(l)"> </i>\n              </a>\n              <a @click="removeLayer(l)" class="button small alert remove-layer" title="Remove from map"></a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row collapse scroller" id="layer-config-container">\n    <div id="layer-config" class="columns">\n      <h4 v-if="layer &amp;&amp; mapLayer()">{{ layer.name }}</h4>\n      <div class="tool-slice row" v-if="layerRefreshConfigable()">\n        <div class="columns small-3"><label class="tool-label">Refresh:<br>{{ formattedLayerRefreshInterval }}</label></div>\n        <div class="columns small-8">\n          <input class="layer-opacity" v-if="layerRefreshIntervalConfigable()" type="range" :min="layer.min_interval" :max="layer.max_interval" :step="layer.interval_step || 1" v-model="layerRefreshInterval">\n        </div>\n        <div class="columns small-1">\n          <a title="Stop auto refresh" v-if="!layerRefreshStopped" class="button tiny secondary float-right" @click="stopLayerRefresh()"><i class="fa fa-stop"></i></a>\n          <a title="Start auto refresh" v-if="layerRefreshStopped" class="button tiny secondary float-right" @click="startLayerRefresh()"><i class="fa fa-play"></i></a>\n        </div>\n      </div>\n      <div class="tool-slice row" v-if="layer &amp;&amp; mapLayer()">\n        <div class="columns small-3"><label class="tool-label">Transparency:<br>{{ layerOpacity }}%</label></div>\n        <div class="columns small-9"><input class="layer-opacity" type="range" min="0" max="100" step="1" v-model="layerOpacity"></div>\n      </div>\n      <div class="tool-slice row" v-if="layer.timeline &amp;&amp; mapLayer()">\n        <div class="columns small-3"><label class="tool-label">Timeline:</label></div>\n        <div class="columns small-9"><input type="range" v-bind:max="sliderMax" min="0" step="1" v-model="sliderTimeline"></div>\n        <div class="columns small-12"><label class="tool-label">{{ timelineTS }}</label></div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-69080ef7",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-69080ef7",module.exports))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5}],17:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.short.button {\n    margin: 0px;\n}\n\n/* hide preview on tablets and mobile */\n@media screen and (max-width: 60em) {\n    .ol-previewmap {\n        display: none;\n    }\n}\n\n.ol-previewmap {\n    width: 424px;\n    height: 100vh;\n    z-index: 1;\n}\n\n.ol-previewmap .ol-overviewmap-map {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    margin: 0px;\n}\n\ndiv.ol-previewmap.ol-uncollapsible {\n  background-color: rgba(51, 61, 70, 0.9);\n}\n\n.ol-previewmap .ol-overviewmap-map .ol-overviewmap-box {\n    display: none;\n}\n\n.cat-legend {\n    max-height: 50vh;\n}\n\n#cat-loading {\n    padding: 0.5em;\n    font-style: italic;\n    text-align: center;\n}\n\n.layerdetails {\n    position: absolute;\n    background-color: rgba(39,48,55,0.7);\n    width: 100%;\n    padding-bottom: 0.5em;\n}\n\n.layerdetails p {\n    white-space: pre-wrap;\n    font-size: 12px;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");_vendor.Vue.filter("lessThan",function(value,length){return value.length<length}),exports.default={store:{catalogueFilters:"catalogueFilters",defaultLegendSrc:"defaultLegendSrc",oimService:"oimService",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu",whoami:"whoami"},data:function(){return{layer:{},catalogue:new _vendor.ol.Collection,swapBaseLayers:!0,search:"",searchAttrs:["name","id","tags"],overview:!1,layerDetails:!1}},computed:{map:function(){return this.$root.$refs.app.$refs.map},utils:function(){return this.$root.utils},loading:function(){return this.$root.loading}},watch:{screenHeight:function(newValue,oldvalue){this.adjustHeight()},search:function(newValue,oldvalue){this.adjustHeight()}},methods:{editable:function(layer){return layer.systemid&&this.whoami.editLayer},adjustHeight:function(){"layers"===this.activeMenu&&"catalogue"===this.activeSubmenu&&(0,_vendor.$)("#catalogue-list-container").height(this.screenHeight-this.leftPanelHeadHeight-(0,_vendor.$)("#catalogue-filter-container").height())},setup:function(){this.adjustHeight()},preview:function(l){if(this.layer!==l){if(this.layer.preview&&this.layer.preview.setMap(null),!l)return void(this.layer={});l.preview||(l.preview=new _vendor.ol.control.OverviewMap({className:"ol-overviewmap ol-previewmap",layers:[this.$root.map["create"+l.type](_vendor.$.extend({},l,{refresh:0,previewLayer:!0}))],collapsed:!1,collapsible:!1,min_ratio:1,max_ratio:1,view:new _vendor.ol.View({projection:"EPSG:4326"})})),l.preview.setMap(this.$root.map.olmap);var previewEl=(0,_vendor.$)(l.preview.getOverviewMap().getViewport());this.layer=l,!previewEl.find(".layerdetails").length>0&&this.$nextTick(function(){previewEl.prepend(this.$els.layerdetails.innerHTML)})}},toggleAll:function(checked,event){var switches=(0,_vendor.$)(this.$el).find("input.ctlgsw");switches.attr("checked",!checked).trigger("click")},onToggle:function(index){(0,_vendor.$)(this.$el).find("#ctlgsw"+index).trigger("click")},onLayerChange:function(layer,checked){var vm=this,active=this.$root.active,map=this.$root.map;if(checked===(void 0!==map.getMapLayer(layer)))return!1;if(checked){var olLayer=map["create"+layer.type](layer);olLayer.setOpacity(layer.opacity||1),layer.base?(this.swapBaseLayers&&active.olLayers.forEach(function(mapLayer){vm.getLayer(mapLayer).base&&active.removeLayer(mapLayer)}),map.olmap.getLayers().insertAt(0,olLayer)):map.olmap.addLayer(olLayer)}else active.removeLayer(map.getMapLayer(layer));return!0},loadRemoteCatalogue:function(url,callback,failedCallback){var vm=this,req=new window.XMLHttpRequest;req.withCredentials=!0,req.onload=function(){var checkingLayer=null,layers=[];JSON.parse(this.responseText).forEach(function(l){vm.getLayer(l.identifier)&&vm.catalogue.remove(vm.getLayer(l.identifier)),l.systemid=l.id,l.id=l.identifier,l.base=l.tags.some(function(t){return"basemap"===t.name}),l.tags.some(function(t){return"overlaymap"===t.name})&&(l.opacity=.5),l.tags.some(function(t){return"livemap_10min"===t.name})&&(l.refresh=600),l.tags.some(function(t){return"livemap_2min"===t.name})&&(l.refresh=120),checkingLayer||(checkingLayer=l),layers.push(l)}),checkingLayer?_vendor.utils.checkPermission(vm.oimService+"/django-admin/catalogue/record/"+checkingLayer.systemid+"/change/",function(allowed){vm.whoami.editLayer=allowed,vm.catalogue.extend(layers),callback()}):(vm.whoami.editLayer=!1,vm.catalogue.extend(layers),callback())},req.onerror=function(ev){var msg="Couldn't load layer catalogue!"+(req.statusText?" ("+req.statusText+")":"");failedCallback?failedCallback(msg):console.error(msg)},req.open("GET",url),req.send()},getLayer:function(id){return id&&id.get&&(id=id.get("id")),this.catalogue.getArray().find(function(layer){return layer.id===id})},getMapLayer:function(id){return this.$root.map.getMapLayer(id)}},ready:function(){var vm=this,catalogueStatus=vm.loading.register("catalogue","Catalogue Component","Initialize");this.catalogue.on("add",function(event){var l=event.element;l.id=l.id||l.identifier,l.name=l.name||l.title,l.type=l.type||"TileLayer","TileLayer"===l.type&&(l.legend=l.legend&&vm.oimService+l.legend||("WFS"===l.service_type?vm.defaultLegendSrc+l.id:null))}),catalogueStatus.wait(30,"Listen 'gk-init' event"),this.$on("gk-init",function(){catalogueStatus.progress(80,"Process 'gk-init' event"),vm.loading.componentRevision+=1,(0,_vendor.$)(this.$root.map.olmap.getTargetElement()).on("mouseleave",".ol-previewmap",function(){vm.preview(!1)}),catalogueStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="layers-catalogue" v-cloak="">\n  <div class="row" id="catalogue-filter-container">\n    <div class="columns">\n      <div class="row collapse">\n        <div class="small-6 columns">\n          <select name="select" v-model="search">\n            <option value="" selected="">All layers</option> \n            <option v-for="filter in catalogueFilters" v-bind:value="filter[0]">{{ filter[1] }}</option>\n            <option v-bind:value="search">Custom search</option>\n          </select>\n        </div>\n        <div class="small-6 columns">\n          <input id="find-layer" type="search" v-model="search" placeholder="Find a layer">\n        </div>\n      </div>\n      <div v-show="search.length > 0 &amp;&amp; search !== \'basemap\'" class="row">\n        <div class="columns text-right">\n          <label for="switchBaseLayers" class="side-label">Toggle all</label>\n        </div>\n        <div class="small-2 text-right">\n          <div class="switch tiny" title="Toggle all filtered layers">\n            <input class="switch-input" title="Toggle all filtered layers" id="ctlgswall" @change="toggleAll($event.target.checked, $event)" type="checkbox">\n            <label class="switch-paddle" for="ctlgswall">\n              <span class="show-for-sr">Toggle all</span>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="row" v-show="search === \'basemap\'">\n        <div class="switch tiny">\n          <input class="switch-input" id="switchBaseLayers" type="checkbox" v-model="swapBaseLayers">\n          <label class="switch-paddle" for="switchBaseLayers">\n            <span class="show-for-sr">Switch out base layers</span>\n          </label>\n        </div>\n        <label for="switchBaseLayers" class="side-label">Switch out base layers automatically</label>\n      </div>\n    </div>\n  </div>\n  <div class="layers-flexibleframe scroller row collapse" id="catalogue-list-container">\n    <div class="columns">\n      <div id="layers-catalogue-list">\n        <div v-for="l in catalogue.getArray() | filterBy search in searchAttrs | orderBy \'name\'" class="row layer-row" @mouseover="preview(l)" track-by="id" @mouseleave="preview(false)" style="margin-left:0px;margin-right:0px">\n          <div class="small-10">\n            <a v-if="editable(l)" @click.stop.prevent="utils.editResource($event)" title="Edit catalogue entry" href="{{oimService}}/django-admin/catalogue/record/{{l.systemid}}/change/" target="_blank" class="button tiny secondary float-right short"><i class="fa fa-pencil"></i></a>\n            <div class="layer-title">{{ l.name || l.id }}</div>\n          </div>\n          <div class="small-2">\n            <div class="text-right">\n              <div class="switch tiny" @click.stop="" v-bind:title="getMapLayer(l) === undefined?\'Add to map\':\'Remove from map\'">\n                <input class="switch-input ctlgsw" id="ctlgsw{{ $index }}" @change="onLayerChange(l, $event.target.checked)" v-bind:checked="getMapLayer(l) !== undefined" type="checkbox">\n                <label class="switch-paddle" for="ctlgsw{{ $index }}">\n                  <span class="show-for-sr">Toggle layer</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-el:layerdetails="" class="hide">\n        <div class="layerdetails row">\n          <div class="columns small-12">\n            <h5>{{ layer.name }}</h5>\n            <img v-if="layer.legend" v-bind:src="layer.legend" class="cat-legend">\n            <p>{{ layer.abstract }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.short.button {\n    margin: 0px;\n}\n\n/* hide preview on tablets and mobile */\n@media screen and (max-width: 60em) {\n    .ol-previewmap {\n        display: none;\n    }\n}\n\n.ol-previewmap {\n    width: 424px;\n    height: 100vh;\n    z-index: 1;\n}\n\n.ol-previewmap .ol-overviewmap-map {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    margin: 0px;\n}\n\ndiv.ol-previewmap.ol-uncollapsible {\n  background-color: rgba(51, 61, 70, 0.9);\n}\n\n.ol-previewmap .ol-overviewmap-map .ol-overviewmap-box {\n    display: none;\n}\n\n.cat-legend {\n    max-height: 50vh;\n}\n\n#cat-loading {\n    padding: 0.5em;\n    font-style: italic;\n    text-align: center;\n}\n\n.layerdetails {\n    position: absolute;\n    background-color: rgba(39,48,55,0.7);\n    width: 100%;\n    padding-bottom: 0.5em;\n}\n\n.layerdetails p {\n    white-space: pre-wrap;\n    font-size: 12px;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-565c70f0",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-565c70f0",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],18:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_legend=require("./legend.vue"),_legend2=_interopRequireDefault(_legend),_layerlegends=require("./layerlegends.vue"),_layerlegends2=_interopRequireDefault(_layerlegends);exports.default={store:["whoami","dpmm","view","mmPerInch","gokartService","s3Service","settings","displayResolution"],components:{gkLegend:_legend2.default,gkLayerlegends:_layerlegends2.default},data:function(){return{layers:null,minDPI:150,paperSizes:{A0:[1189,841],A1:[841,594],A2:[594,420],A3:[420,297],A4:[297,210]},paperSize:"A3",printStatus:{oldLayout:{},layout:{},overviewMap:{},jobs:0},title:"",statefile:"",vectorFormat:"geojson",states:[],vectorFormats:[{format:"geojson",title:"GeoJSON (web GIS)",name:"GeoJSON"},{format:"sqlite",title:"SQLite",name:"SQLite"},{format:"gpkg",title:"GeoPackage",name:"GeoPackage"},{format:"csv",title:"CSV (Spreadsheet/Excel)",name:"CSV"}]}},computed:{loading:function(){return this.$root.loading},annotations:function(){return this.$root.annotations},layerlegends:function(){return this.$refs.layerlegends},map:function(){return this.$root.map},olmap:function(){return this.$root.map.olmap},shortUrl:{cache:!1,get:function(){if(this.olmap){var lonlat=this.olmap.getView().getCenter();return _vendor.$.param({lon:lonlat[0],lat:lonlat[1],scale:Math.round(1e3*this.$root.map.getScale())})}}},finalTitle:function(){return this.title=this.title.trim(),0==this.title.length?"Quick Print":this.title},bucketKey:function(){return _vendor.hash.MD5({extent:this.printStatus.layout.extent.join(" "),author:this.legendInfo().author,filename:this.finalTitle,time:Date.now()})}},methods:{toggleRetainBoundingbox:function(ev){this.settings.print.retainBoundingbox=!this.settings.print.retainBoundingbox,this.saveState()},toggleSnapToFixedScale:function(ev){this.settings.print.snapToFixedScale=!this.settings.print.snapToFixedScale,this.saveState()},legendInfo:function(){var result={title:this.finalTitle,author:"Produced by the Department of Parks and Wildlife",date:"Map last amended "+(0,_vendor.moment)().toLocaleString()};return this.$root.map&&(result.km=(Math.round(40*this.$root.map.getScale())/1e3).toLocaleString(),result.scale=this.paperSize+" "+this.$root.scales.scaleString),result},exportVector:function(features,name,format){var vm=this,name=(name||"")+"."+this.$root.profile.name+"_export_"+(0,_vendor.moment)().format("YYYYMMDD_HHmm"),result=this.$root.geojson.writeFeatures(features),blob=new window.Blob([result],{type:"application/json;charset=utf-8"});if(format=format||this.vectorFormat,"geojson"===format)(0,_vendor.saveAs)(blob,name+".geojson");else{var formData=new window.FormData;formData.append("datasource",blob,name+".json");var req=new window.XMLHttpRequest;req.open("POST",this.gokartService+"/ogr/"+format),req.responseType="blob",req.withCredentials=!0,req.onload=function(event){if(req.status>=400){var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){alert(e.target.result)})}else{var filename=null;if(req.getResponseHeader("Content-Disposition")){var matches=vm._filename_re.exec(req.getResponseHeader("Content-Disposition"));filename=matches&&matches[1]?matches[1]:null}filename||(filename=name+"."+format),(0,_vendor.saveAs)(req.response,filename)}},req.send(formData)}},importVector:function(file,callback){var vm=this,p=file.name.lastIndexOf(".");p<0&&alert("Unknown file ("+file.name+") format.");var fileFormat=file.name.substring(p+1);if("geojson"===fileFormat||"json"===fileFormat){var reader=new window.FileReader;reader.onload=function(e){var features=(new ol.format.GeoJSON).readFeatures(e.target.result,{dataProjection:"EPSG:4326"});features&&features.length&&callback(features,fileFormat)},reader.readAsText(file)}else{var reader=new window.FileReader;reader.onload=function(e){if(vm._importData={formData:new window.FormData,callback:callback,fileFormat:fileFormat},"gpx"===fileFormat)vm._importData.formData.append("datasource",new window.Blob([e.target.result],{type:"application/gpx+xml"}),file.name);else{if("gpkg"!==fileFormat)return void alert("Not support file format("+fileFormat+")");vm._importData.formData.append("datasource",new window.Blob([e.target.result],{type:"application/x-sqlite3"}),file.name)}var req=new window.XMLHttpRequest;req.open("POST",vm.gokartService+"/ogrinfo"),req.responseType="json",req.withCredentials=!0,req.onload=function(event){if(req.status>=400){var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){alert(e.target.result)}),delete vm._importData}else{var layers=req.response.layers||[];if(!layers||0===layers.length)return;1===layers.length?vm.importLayer(layers[0],!0):(vm.layers=layers,(0,_vendor.$)("#chooseImportLayer").foundation("open"))}},req.send(vm._importData.formData)},reader.readAsArrayBuffer(file)}},importLayer:function(selectedLayer,autoChoose){try{if(!this._importData)return void alert("Import data is missing.");if(!selectedLayer)return void alert("Please choose import layer.");if(selectedLayer.featureCount<=0)return;var vm=this;this._importData.formData.append("layer",selectedLayer.layer);var req=new window.XMLHttpRequest;req.open("POST",this.gokartService+"/ogr/geojson"),req.responseType="blob",req.withCredentials=!0;var importData=vm._importData;req.onload=function(event){if(req.status>=400){var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){alert(e.target.result)})}else{var responseReader=new window.FileReader;responseReader.onload=function(e){var features=(new ol.format.GeoJSON).readFeatures(e.target.result,{dataProjection:"EPSG:4326"});features&&features.length&&importData.callback(features,importData.fileFormat)},responseReader.readAsText(req.response)}},req.send(this._importData.formData)}finally{autoChoose?this._importData&&delete this._importData:(0,_vendor.$)("#chooseImportLayer").foundation("close")}},prepareMapForPrinting:function(){var vm=this;(0,_vendor.$)("body").css("cursor","progress"),this.printStatus.jobs<=0&&(this.printStatus.overviewMap.enabled=this.map.isControlEnabled("overviewMap"),this.printStatus.overviewMap.collapsed=this.map.getControl("overviewMap").getCollapsed(),this.printStatus.overviewMap.collapsed&&this.map.getControl("overviewMap").setCollapsed(!1),this.printStatus.overviewMap.enabled||this.map.enableControl("overviewMap",!0),this.printStatus.oldLayout.size=this.olmap.getSize(),this.printStatus.oldLayout.scale=this.$root.map.getScale(),this.printStatus.oldLayout.extent=this.olmap.getView().calculateExtent(this.olmap.getSize()),this.printStatus.dpmm=this.minDPI/this.mmPerInch,this.printStatus.interactions=this.olmap.getInteractions().getArray().slice(0),_vendor.$.each(this.printStatus.interactions,function(index,interact){vm.olmap.removeInteraction(interact)}),this.printStatus.controls=[],_vendor.$.each(this.map.mapControls,function(key,control){"overviewMap"!==key&&control.enabled&&(vm.printStatus.controls.push(key),vm.map.enableControl(key,!1))}),this.printStatus.startTime=new Date),this.printStatus.layout.width=this.paperSizes[this.paperSize][0],this.printStatus.layout.height=this.paperSizes[this.paperSize][1],this.settings.print.retainBoundingbox?(this.printStatus.layout.size=[this.printStatus.dpmm*this.printStatus.layout.width,this.printStatus.dpmm*this.printStatus.layout.height],this.olmap.setSize(this.printStatus.layout.size),this.olmap.getView().fit(this.printStatus.oldLayout.extent,this.olmap.getSize()),this.printStatus.layout.scale=this.settings.print.snapToFixedScale?this.$root.map.getFixedScale():this.$root.map.getScale(),this.settings.print.snapToFixedScale&&this.$root.map.setScale(this.printStatus.layout.scale)):(this.printStatus.layout.scale=this.settings.print.snapToFixedScale?this.$root.map.getFixedScale(this.printStatus.oldLayout.scale):this.printStatus.oldLayout.scale,this.printStatus.layout.size=[this.printStatus.dpmm*this.printStatus.layout.width,this.printStatus.dpmm*this.printStatus.layout.height],this.olmap.setSize(this.printStatus.layout.size),this.settings.print.snapToFixedScale&&this.$root.map.setScale(this.printStatus.layout.scale)),this.printStatus.layout.extent=this.olmap.getView().calculateExtent(this.olmap.getSize()),this.printStatus.jobs=this.printStatus.jobs>=0?this.printStatus.jobs+1:1},restoreMapFromPrinting:function(){var vm=this;this.printStatus.jobs-=1,this.printStatus.jobs<=0&&(this.printStatus.overviewMap.collapsed&&this.map.getControl("overviewMap").setCollapsed(!0),this.printStatus.overviewMap.enabled||this.map.enableControl("overviewMap",!1),this.olmap.setSize(this.printStatus.oldLayout.size),this.$root.map.setScale(this.printStatus.oldLayout.scale),_vendor.$.each(this.printStatus.interactions,function(index,interact){vm.olmap.addInteraction(interact)}),_vendor.$.each(this.printStatus.controls,function(index,controlKey){vm.map.enableControl(controlKey,!0)}),this.printStatus.endTime=new Date,(0,_vendor.$)("body").css("cursor","default"))},renderLegend:function(bucketKey){var qrcanvas=bucketKey?(0,_vendor.kjua)({text:this.s3Service+bucketKey,render:"canvas",size:100}):null;return["data:image/svg+xml;utf8,"+encodeURIComponent(this.$els.legendsvg.innerHTML),qrcanvas]},blobGDAL:function(blob,name,format,bucketKey){var vm=this,_func=function(legendData){var formData=new window.FormData;formData.append("extent",vm.printStatus.layout.extent.join(" ")),formData.append("jpg",blob,name+".jpg"),"pdf"===format&&legendData&&formData.append("legends",legendData,name+".legend.pdf"),formData.append("dpi",Math.round(25.4*vm.printStatus.layout.canvasPxPerMM)),formData.append("title",vm.finalTitle),formData.append("author",vm.legendInfo().author),bucketKey&&formData.append("bucket_key",bucketKey);var req=new window.XMLHttpRequest;req.open("POST",vm.gokartService+"/gdal/"+format),req.withCredentials=!0,req.responseType="blob",req.onload=function(event){(0,_vendor.saveAs)(req.response,name+"."+format)},req.send(formData)};"pdf"===format?vm.layerlegends.getLegendBlob(!0,!0,function(legendData){_func(legendData)}):_func()},print:function(format){
this.prepareMapForPrinting();var timer,vm=this,whiteout=vm.olmap.on("precompose",function(event){var canvas=event.context.canvas,ctx=canvas.getContext("2d");ctx.beginPath(),ctx.rect(0,0,canvas.width,canvas.height),ctx.fillStyle="white",ctx.fill()}),mainmap_composing=null,overviewmap_composing=null,canvas=null,overviewmap_canvas=null,postcomposeFunc=function(){timer&&clearTimeout(timer),timer=setTimeout(function(){vm.olmap.unByKey(whiteout),vm.olmap.unByKey(mainmap_composing),vm.map.getControl("overviewMap").getOverviewMap().unByKey(overviewmap_composing);var ctx=canvas.getContext("2d"),img=new window.Image,bucketKey="jpg"!==format?vm.bucketKey:null,legend=vm.renderLegend("pdf"===format?bucketKey:null),url=legend[0],qrcanvas=legend[1];img.onerror=function(err){window.alert(JSON.stringify(err)),vm.restoreMapFromPrinting()},img.onload=function(){ctx.drawImage(overviewmap_canvas,canvas.width-overviewmap_canvas.width-2,2,overviewmap_canvas.width,overviewmap_canvas.height);var box=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overviewmap-box");if(box.length){var width=box.width()*vm.displayResolution[0],height=box.height()*vm.displayResolution[1],x=box.parent().position().left*vm.displayResolution[0],y=box.parent().position().top*vm.displayResolution[1];ctx.beginPath(),ctx.rect(canvas.width-overviewmap_canvas.width-2+x,2+y,width,height),ctx.strokeStyle="red",ctx.lineWidth=2,ctx.stroke()}ctx.beginPath(),ctx.rect(canvas.width-overviewmap_canvas.width-4,0,overviewmap_canvas.width+4,overviewmap_canvas.height+4),ctx.strokeStyle="black",ctx.lineWidth=2,ctx.stroke(),vm.printStatus.layout.canvasPxPerMM=canvas.width/vm.printStatus.layout.width;var height=120*vm.printStatus.layout.canvasPxPerMM*img.height/img.width;ctx.drawImage(img,0,0,120*vm.printStatus.layout.canvasPxPerMM,height);var disclaimerImg=(0,_vendor.$)("#map-disclaimer").get(0);height=disclaimerImg.height,ctx.drawImage(disclaimerImg,canvas.width-disclaimerImg.width,canvas.height-height,disclaimerImg.width,height),qrcanvas&&ctx.drawImage(qrcanvas,2,canvas.height-qrcanvas.height-2),window.URL.revokeObjectURL(url);var filename=vm.finalTitle.replace(/ +/g,"_");canvas.toBlob(function(blob){vm.restoreMapFromPrinting(),"jpg"===format?(0,_vendor.saveAs)(blob,filename+".jpg"):vm.blobGDAL(blob,filename,format,bucketKey)},"image/jpeg",.9)},img.src=url},5e3)};mainmap_composing=vm.olmap.on("postcompose",function(event){canvas=event.context.canvas,overviewmap_composing||(overviewmap_composing=vm.map.getControl("overviewMap").getOverviewMap().on("postcompose",function(event){overviewmap_canvas=event.context.canvas,postcomposeFunc()}),vm.map.getControl("overviewMap").getOverviewMap().renderSync())}),vm.olmap.renderSync()},download:function(key){key?_vendor.localforage.getItem("sssStateStore").then(function(store){if(key in store){var blob=new window.Blob([JSON.stringify(store[key],null,2)],{type:"application/json;charset=utf-8"});(0,_vendor.saveAs)(blob,key+".sss")}}):_vendor.localforage.getItem("sssOfflineStore").then(function(store){var blob=new window.Blob([JSON.stringify(store,null,2)],{type:"application/json;charset=utf-8"});(0,_vendor.saveAs)(blob,"sss_view_"+(0,_vendor.moment)().format("YYYY-MM-DD-HHmm")+".sss")})},open:function(key){_vendor.localforage.getItem("sssStateStore").then(function(store){key in store&&_vendor.localforage.setItem("sssOfflineStore",store[key]).then(function(v){document.location.reload()})})},remove:function(key){var vm=this;_vendor.localforage.getItem("sssStateStore").then(function(store){key in store&&(delete store[key],vm.states=Object.keys(store),_vendor.localforage.setItem("sssStateStore",store))})},load:function(){var vm=this,reader=new window.FileReader;if(this.$els.statefile.files.length>0){var key=this.$els.statefile.files[0].name.split(".",1)[0];reader.onload=function(e){_vendor.localforage.getItem("sssStateStore",function(err,value){var store={};value&&(store=value),store[key]=JSON.parse(e.target.result),_vendor.localforage.setItem("sssStateStore",store).then(function(v){vm.states=Object.keys(store)})})},reader.readAsText(this.$els.statefile.files[0])}},saveStateButton:function(){var key=this.$els.savestatename.value;key||(key=(0,_vendor.moment)().format("DD/MM/YYYY HH:mm")),this.saveState(key)},saveState:function(key){var vm=this,store=this.$root.store;if(!vm.$root.touring){store.view.center=vm.olmap.getView().getCenter(),store.view.scale=Math.round(1e3*vm.$root.map.getScale());var activeLayers=vm.$root.active.activeLayers();activeLayers!==!1&&(store.activeLayers=activeLayers||[],store.annotations=JSON.parse(vm.$root.geojson.writeFeatures(vm.$root.annotations.features.getArray())),_vendor.localforage.setItem("sssOfflineStore",vm.$root.persistentData).then(function(value){vm.$root.saved=(0,_vendor.moment)().toLocaleString()}),key&&_vendor.localforage.getItem("sssStateStore",function(err,value){var states={};value&&(states=value),states[key]=vm.$root.persistentData,_vendor.localforage.setItem("sssStateStore",states).then(function(value){vm.states=Object.keys(states)})}))}}},ready:function(){var vm=this;this._filename_re=new RegExp("filename=['\"](.+)['\"]");var exportStatus=vm.loading.register("export","Export Component","Initialize");(0,_vendor.$)("#chooseImportLayer").on("closed.zf.reveal",function(){vm._importData&&delete vm._importData}),exportStatus.wait(10,"Listen 'gk-init' event"),this.$on("gk-init",function(){exportStatus.progress(80,"Process 'gk-init' event"),vm.olmap.on("postrender",global.debounce(function(ev){vm.saveState()},1e3,!0));_vendor.localforage.getItem("sssStateStore",function(err,value){value&&(vm.states=Object.keys(value))});exportStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="layers-export" v-cloak="">\n  <div id="map-export-controls">\n    <!--div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Vector format:</label>\n      </div>\n      <div class="small-9">\n        <select name="select" v-model="vectorFormat">\n          <option value="json" selected>GeoJSON (web GIS)</option> \n          <option value="kml">KML (Google Earth)</option>\n          <option value="geopkg">Geopackage (high performance)</option>\n          <option value="shapefile">Shapefile (legacy desktop GIS)</option>\n          <option value="csv">CSV (Spreadsheet/Excel)</option>\n        </select>\n      </div>\n    </div-->\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Name:</label>\n      </div>\n      <div class="small-9">\n        <input id="export-name" type="text" v-model="title" placeholder="Map Name">\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Paper size:</label>\n      </div>\n      <div class="small-9">\n        <select v-model="paperSize">\n                  <option v-for="size in paperSizes" v-bind:value="$key">{{ $key }} ({{ size[0] }}mm  {{ size[1] }}mm)</option>\n                </select>\n      </div>\n    </div>\n\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Download:</label>\n      </div>\n      <div class="small-9">\n        <div class="expanded button-group">\n          <a class="button" title="JPG for quick and easy printing" @click="print(\'jpg\')"><i class="fa fa-file-image-o"></i><br>JPG</a>\n          <a class="button" title="Geospatial PDF for use in PDF Maps and Adobe Reader" @click="print(\'pdf\')"><i class="fa fa-print"></i><br>PDF</a>\n          <a class="button" title="GeoTIFF for use in QGIS on the desktop" @click="print(\'tif\')"><i class="fa fa-picture-o"></i><br>GeoTIFF</a>\n          <a class="button" title="Legends of active layers" @click="layerlegends.toggleLegends()"><i class="fa fa-file-pdf-o"></i><br>Legend</a>\n        </div>\n      </div>\n    </div>\n\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <div class="switch tiny">\n          <input class="switch-input" id="toggleRetainBoundingbox" type="checkbox" v-bind:checked="settings.print.retainBoundingbox" @change="toggleRetainBoundingbox">\n          <label class="switch-paddle" for="toggleRetainBoundingbox">\n            <span class="show-for-sr">Fit to screen bounding box</span>\n          </label>\n        </div>\n      </div>\n      <div class="small-9">\n        <label for="toggleRetainBoundingbox">Fit to screen bounding box</label>\n      </div>\n    </div>\n    \n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <div class="switch tiny">\n          <input class="switch-input" id="toggleSnapToFixedScale" type="checkbox" v-bind:checked="settings.print.snapToFixedScale" @change="toggleSnapToFixedScale">\n          <label class="switch-paddle" for="toggleSnapToFixedScale">\n            <span class="show-for-sr">Snap to nearest fixed scale</span>\n          </label>\n        </div>\n      </div>\n      <div class="small-9">\n        <label for="toggleSnapToFixedScale">Snap to nearest fixed scale</label>\n      </div>\n    </div>\n    \n    <hr class="row">\n\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Save view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="input-group">\n          <input v-el:savestatename="" class="input-group-field" type="text" placeholder="Name for saved view">\n          <div class="input-group-button">\n            <a class="button" @click="saveStateButton()">Save</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Export view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <a class="button expanded" @click="download()"><i class="fa fa-download"></i> Download current view</a>\n        </div>\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Load view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <label class="button expanded" for="uploadFile"><i class="fa fa-upload"></i> Upload view file</label><input type="file" id="uploadFile" class="show-for-sr" name="statefile" accept="application/json" v-model="statefile" v-el:statefile="" @change="load()">\n        </div>\n        <div v-for="state in states" class="feature-row" style="overflow: hidden">\n          <div class="float-right button-group small">\n            <a class="button" title="Open view" @click="open(state)"><i class="fa fa-folder-open"></i></a>\n            <a class="button" title="Download view" @click="download(state)"><i class="fa fa-download"></i></a>\n            <a class="button alert" title="Delete view" @click="remove(state)"></a>\n          </div>\n          {{ state }}\n        </div>\n        <div v-if="states.length == 0" class="feature-row">\n          No saved views yet\n        </div>\n      </div>\n    </div>\n\n    <div class="hide" v-el:legendsvg="">\n      <gk-legend></gk-legend>\n    </div>\n\n    <img id="map-disclaimer" class="hide" src="/dist/static/images/map-disclaimer.svg">\n\n    <gk-layerlegends v-ref:layerlegends=""></gk-layerlegends>\n  </div>\n\n  <div class="small reveal" id="chooseImportLayer" data-reveal="" data-close-on-click="false"> \n      <h3>Please choose the layer to import</h3>\n      <div class="row feature-row">\n          <div class="small-6 columns">Layer</div>\n          <div class="small-3 columns">Geometry</div>\n          <div class="small-2 columns">Features</div>\n          <div class="small-1 columns"></div>\n      </div>\n      <div v-for="l in layers" class="row feature-row">\n          <div class="small-6 columns">{{l.layer}}</div>\n          <div class="small-3 columns">{{l.geometry}}</div>\n          <div class="small-2 columns">{{l.featureCount}}</div>\n          <div class="small-1 columns">\n              <a class="button tiny secondary float-right" @click="importLayer(l)"><i class="fa fa-upload"></i></a>\n          </div>\n      </div>\n\n      <button class="close-button" data-close="" aria-label="Close modal" type="button">\n          <span aria-hidden="true"></span>\n      </button>\n  </div>\n\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-08a8c6b6",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-08a8c6b6",module.exports))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./layerlegends.vue":19,"./legend.vue":20,"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5}],19:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#active-layer-legends {\n    height:99%;\n}\n#legend-title {\n    cursor:move;\n}\n#active-layer-legends-list {\n    height:99%;\n}\n#active-layer-legends .disabled{\n    color: #8a8a8a;\n}\n#active-layer-legends button{\n    color: #2199e8;\n}\n#active-layer-legends .showall-button{\n    right: 4.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n#active-layer-legends .print-button{\n    right: 2.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n.layer-legend-row{\n    padding-bottom:50px\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["dpmm"],data:function(){return{legendLayers:[],filteredLegendLayers:[],hiddenLayers:{},position:"right-top"}},computed:{displayLegendLayers:function(){return this.filteredLegendLayers||this.legendLayers},disableShowall:function(){return!this.filteredLegendLayers},disablePrint:function(){return 0==this.displayLegendLayers.length},legendsPanel:function(){return this._legendsPanel=this._legendsPanel||new Foundation.Reveal((0,_vendor.$)("#active-layer-legends")),this._legendsPanel},loadFinished:{cache:!1,get:function(){var finished=!0;return(0,_vendor.$)("#active-layer-legend-list").find("img").each(function(index,img){if(0===img.naturalWidth||void 0===img.naturalWidth||0===img.naturalHeight||void 0===img.naturalHeight)return finished=!1,!1}),finished}}},methods:{enableMove:function(enable){this._interact.draggable(enable)},showAll:function(){this.hiddenLayers={},this.filteredLegendLayers=null},hideLegend:function(l){if(!this.hiddenLayers[l.id])if(this.hiddenLayers[l.id]=!0,null==this.filteredLegendLayers){var vm=this;this.filteredLegendLayers=this.legendLayers.filter(function(layer){return!vm.hiddenLayers[layer.id]})}else this.filteredLegendLayers.splice(this.filteredLegendLayers.indexOf(l),1)},syncLegendLayers:function(){var vm=this,catalogue=vm.$root.catalogue,results=[],legendLen=0;if(vm.$root.active.olLayers.every(function(layer){var catLayer=catalogue.getLayer(layer);return!!catLayer&&(!catLayer.legend||void 0!=catLayer.loadLegendFailed&&catLayer.loadLegendFailed||(results.push(catLayer),legendLen+=catLayer.hidden?0:1),!0)}),results.length==vm.legendLayers){results=results.reverse();for(var changed=!1,i=0;i<results.length;i++)if(results[i].id!=vm.legendLayers.id){changed=!0;break}if(!changed)return!1}else results=results.reverse();return vm.legendLayers=results,vm.legendLayers.find(function(layer){return vm.hiddenLayers[layer.id]})?vm.filteredLegendLayers=vm.legendLayers.filter(function(layer){return!vm.hiddenLayers[layer.id]}):vm.filteredLegendLayers=null,!0},toggleLegends:function(){var vm=this;return vm.legendsPanel.isActive?(vm.legendsPanel.close(),vm.unwatchActiveLayers(),void(vm.unwatchActiveLayers=!1)):(vm.unwatchActiveLayers||(this.syncLegendLayers(),vm.unwatchActiveLayers=this.$root.active.$watch("olLayers",function(newVal,oldVal){vm.syncLegendLayers()})),void vm.legendsPanel.open())},loadLegendFailed:function(index,l){this.legendLayers.splice(index,1),l.loadLegendFailed=!0,this.hiddenLayers[l.id]||this.filteredLegendLayers.splice(this.filteredLegendLayers.indexOf(l),1)},getImageDataURL:function(img,format){format=format||"image/jpeg";var canvas=document.createElement("canvas");canvas.width=img.naturalWidth,canvas.height=img.naturalHeight,(0,_vendor.$)(document.body).append((0,_vendor.$)(canvas));var ctx=canvas.getContext("2d");return ctx.drawImage(img,0,0,img.naturalWidth,img.naturalHeight,0,0,canvas.width,canvas.height),canvas.toDataURL(format,1)},printLegends:function(){var vm=this;this.getLegendBlob(!1,!1,function(blobData){var filename=vm.$root.export.finalTitle.replace(" ","_")+".legend.pdf";(0,_vendor.saveAs)(blobData,filename)})},getLegendBlob:function(printAll,sync,callback){var vm=this;printAll=printAll||!1,sync=sync||!1;var hiddenLayers=null,filteredLegendLayers=null,nextTick=!1;vm.legendsPanel.isActive||(nextTick=vm.syncLegendLayers()),printAll&&null!=vm.filteredLegendLayers&&(hiddenLayers=vm.hiddenLayers,filteredLegendLayers=vm.filteredLegendLayers,vm.showAll(),nextTick=!0);var printFunc=function(){try{if(0===(0,_vendor.$)("#active-layer-legend-list .layer-legend-row").length)return void callback(null);var paperSize=vm.$root.export.paperSizes.A4,style={top:20,bottom:20,left:20,right:20,width:paperSize[1],height:paperSize[0],fontHeight:10,padding:5,font:"helvetica",fontType:"bold",fontSize:10,textColor:[0,0,0],lineWidth:1,lineColor:[77,77,77]},getImageSize=function(img,textHeight){var width=0,height=0,maxImageSize=[style.width-style.left-style.right,style.height-style.top-style.bottom-textHeight],imgSize=[Math.floor(img.naturalWidth/vm.dpmm),Math.floor(img.naturalHeight/vm.dpmm)];return imgSize[0]/imgSize[1]>maxImageSize[0]/maxImageSize[1]?imgSize[0]<=maxImageSize[0]?(width=imgSize[0],height=imgSize[1]):(width=maxImageSize[0],height=imgSize[1]*width/imgSize[0]):imgSize[1]<=maxImageSize[1]?(height=imgSize[1],width=imgSize[0]):(height=maxImageSize[1],width=imgSize[0]*height/imgSize[1]),[width,height]},doc=new _vendor.jsPDF;doc.setFontSize(style.fontSize),doc.setFont(style.font),doc.setFontType(style.fontType),doc.setTextColor(style.textColor[0],style.textColor[1],style.textColor[2]),doc.setLineWidth(style.lineWidth),doc.setDrawColor(style.lineColor[0],style.lineColor[1],style.lineColor[2]);var top=style.top;(0,_vendor.$)("#active-layer-legend-list .layer-legend-row").each(function(index,element){var imgElement=(0,_vendor.$)(element).find("img").get(0),imageSize=getImageSize(imgElement,style.fontHeight);top!=style.top&&top+style.fontHeight+imageSize[1]+style.bottom+2*style.padding+style.lineWidth>style.height?(doc.addPage(),top=style.top):top!=style.top&&(top+=style.padding,doc.setLineWidth(style.lineWidth),doc.line(style.left,top,style.width-style.right,top),top+=style.lineWidth,top+=style.padding),doc.text(style.left,top,(0,_vendor.$)(element).find(".layer-title").text()),top+=style.fontHeight,doc.addImage(vm.getImageDataURL(imgElement,"image/jpeg"),"JPEG",style.left,top,imageSize[0],imageSize[1]),top+=imageSize[1]}),callback(doc.output("blob"))}finally{hiddenLayers&&(vm.hiddenLayers=hiddenLayers,vm.filteredLegendLayers=filteredLegendLayers)}},_syncedFunc=null;_syncedFunc=function(){sync?vm.loadFinished?setTimeout(printFunc,2e3):setTimeout(_syncedFunc,500):printFunc()},nextTick?vm.$nextTick(_syncedFunc):_syncedFunc()},setPosition:function(left,right,top,bottom){null==left?this._position[0]=right-parseInt((0,_vendor.$)("#active-layer-legends").css("width")):this._position[0]=left,null==right?this._position[1]=left+parseInt((0,_vendor.$)("#active-layer-legends").css("width")):this._position[1]=right,null==top?this._position[2]=bottom-parseInt((0,_vendor.$)("#active-layer-legends").css("height")):this._position[2]=top,null==bottom?this._position[3]=top+parseInt((0,_vendor.$)("#active-layer-legends").css("height")):this._position[3]=bottom,(0,_vendor.$)("#active-layer-legends").get(0).style.left=this._position[0]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.right=this._position[1]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.top=this._position[2]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.bottom=this._position[3]+"px"}},ready:function(){var vm=this;vm._position=null,(0,_vendor.$)("#active-layer-legends").on("open.zf.reveal",function(){null==vm._position?(vm._position=[null,null,null,null],vm.setPosition(null,parseInt((0,_vendor.$)(document.body).css("width")),0,null)):vm.setPosition(vm._position[0],vm._position[1],vm._position[2],vm._position[3])}),vm._interact=(0,_vendor.interact)((0,_vendor.$)("#active-layer-legends").get(0),{}).resizable({edges:{top:!0,left:!0,bottom:!0,right:!1},preserveAspectRatio:!1,onmove:function(event){var target=event.target;target.style.width=event.rect.width+"px",target.style.height=event.rect.height+"px",vm.setPosition(event.rect.left,event.rect.right,event.rect.top,event.rect.bottom)}}).draggable({intertia:!0,restrict:{restriction:document.body,endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:function(event){event.target;vm._position[0]=vm._position[0]+event.dx,vm._position[1]=vm._position[1]+event.dx,vm._position[2]=vm._position[2]+event.dy,vm._position[3]=vm._position[3]+event.dy,vm.setPosition(vm._position[0],vm._position[1],vm._position[2],vm._position[3])},onend:function(event){}}),vm._interact.draggable(!1)}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="reveal" id="active-layer-legends" data-reveal="" data-v-offset="0px" data-overlay="false" data-close-on-esc="false" data-close-on-click="false">\n  <h4 id="legend-title" @mouseenter="enableMove(true)" @mouseout="enableMove(false)">Legends ({{displayLegendLayers.length}}/{{legendLayers.length}})</h4>\n  <div id="active-layer-legend-list">\n      <template v-for="l in displayLegendLayers" track-by="id">\n          <div class="layer-row layer-legend-row row">\n              <div class="small-11">\n                  <h6 class="layer-title">{{ l.name || l.id }} </h6>\n              </div>\n              <div class="small-1">\n                  <a class="button tiny secondary" @click="hideLegend(l)" title="Hide"><i class="fa fa-eye-slash"></i></a>\n              </div>\n              <div class="small-12">\n                  <img v-bind:src="l.legend" class="cat-legend" @error="loadLegendFailed($index,l)" crossorigin="use-credentials">\n              </div>\n          </div>\n      </template>\n  </div>\n  <button v-bind:class="{disabled:disableShowall}" v-bind:disabled="disableShowall" type="button" class="showall-button" @click="showAll()" title="Show All">\n    <i class="fa fa-eye"></i>\n  </button>\n  <button v-bind:class="{disabled:disablePrint}" v-bind:disabled="disablePrint" type="button" class="print-button" @click="printLegends()" title="Print">\n    <i class="fa fa-print"></i>\n  </button>\n  <button class="close-button" data-close="" aria-label="Close modal" type="button" title="Close">\n    <span aria-hidden="true"></span>\n  </button>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#active-layer-legends {\n    height:99%;\n}\n#legend-title {\n    cursor:move;\n}\n#active-layer-legends-list {\n    height:99%;\n}\n#active-layer-legends .disabled{\n    color: #8a8a8a;\n}\n#active-layer-legends button{\n    color: #2199e8;\n}\n#active-layer-legends .showall-button{\n    right: 4.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n#active-layer-legends .print-button{\n    right: 2.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n.layer-legend-row{\n    padding-bottom:50px\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-c0d8f574",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-c0d8f574",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={computed:{legendInfo:{cache:!1,get:function(){return this.$root.export.legendInfo()}},title:function(){return this.$root.export.title}}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   height="53.149605"\n   width="556.29919"\n   version="1.1"\n   y="0"\n   x="0"\n   id="svg3127"\n   inkscape:version="0.48.4 r9939"\n   sodipodi:docname="legend.svg">\n  <metadata\n     id="metadata3229">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3227" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1920"\n     inkscape:window-height="1163"\n     id="namedview3225"\n     showgrid="false"\n     units="mm"\n     inkscape:zoom="1.7396984"\n     inkscape:cx="304.56135"\n     inkscape:cy="-35.745445"\n     inkscape:window-x="1920"\n     inkscape:window-y="0"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="g3181" />\n  <g\n     font-size="none"\n     mix-blend-mode="normal"\n     transform="matrix(1.6024522,0,0,1.000088,1.7711449,30.25859)"\n     text-anchor="none"\n     style="fill:#ffffff;fill-opacity:0.86275;stroke:#000000;stroke-width:1.66149998;stroke-miterlimit:10"\n     stroke-miterlimit="10"\n     font-weight="none"\n     id="g3129">\n    <rect\n       height="51.377998"\n       width="346.80063"\n       stroke-miterlimit="10"\n       y="-29.372999"\n       x="-0.44898"\n       id="rect3131"\n       style="fill:#ffffff;fill-opacity:0.86275;stroke:#000000;stroke-width:1.66149998;stroke-miterlimit:10" />\n  </g>\n  <g\n     transform="matrix(2.8669,0,0,2.8669,2.3366,-2969.4)"\n     id="g3133">\n    <rect\n       height="13"\n       width="13"\n       y="1039.4"\n       x="2"\n       id="rect3135"\n       style="fill:#ffffff" />\n    <g\n       transform="matrix(0.21667,0,0,0.21667,-56.963,809.08)"\n       id="g3137"\n       style="fill:#003862">\n      <g\n         transform="matrix(1.448,0,0,-1.448,306.28,1063.2)"\n         id="g3139">\n        <path\n           d="M 0,0 C 0.048,-0.173 0.35,-0.361 0.801,-0.334 1.244,-0.308 1.835,-0.34 1.633,-0.87 1.432,-1.403 2.038,-1.246 2.477,-0.937 2.681,-0.792 1.995,-0.273 1.081,0.274 H -0.19 C -0.082,0.144 -0.014,0.043 0,0"\n           id="path3141"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,292.57,1079.2)"\n         id="g3143">\n        <path\n           d="m 0,0 c -0.287,0.333 -0.899,0.097 -0.749,0.313 0.151,0.218 1.721,0 1.721,0 0.134,-0.177 0.211,-0.52 -0.405,-0.7 C -0.051,-0.569 -0.484,-0.07 -0.381,0 -0.274,0.068 0.29,-0.336 0,0 m 12.611,-5.832 c -0.494,-0.146 -0.026,0.371 -0.5,-0.334 -0.472,-0.703 -0.606,0.711 -2.105,1.226 0,0 -0.234,0.108 0.177,0.371 0.411,0.266 0.292,0.24 -0.196,0.257 -0.485,0.017 0.104,-0.824 -1.007,-0.57 -1.101,0.255 -1.925,0.726 -1.76,0.26 0.163,-0.466 0.127,-0.062 1.349,-0.453 1.219,-0.388 0.85,-0.031 1.285,-0.489 0.432,-0.455 0.272,-0.165 -0.289,-0.377 C 9,-6.155 9.751,-6.388 9.453,-6.463 9.157,-6.536 9.011,-5.698 6.262,-5.387 c 0,0 -1.058,-0.01 0.186,-0.429 1.246,-0.418 0.691,-0.438 0.965,-0.429 0.281,0.011 0.3,0.239 0.48,-0.005 0.181,-0.245 0.225,-0.44 1.129,-0.57 0.905,-0.132 0.562,0.156 0.732,-0.031 0.173,-0.186 -0.372,-0.079 -0.003,-0.293 0.367,-0.212 0.298,0.128 0.169,-0.292 -0.135,-0.419 -0.536,-0.17 -0.713,-0.296 0,0 -0.106,-0.15 0.382,-0.145 0.485,0.011 0.395,0.06 0.311,-0.164 -0.086,-0.223 -0.122,-0.18 0.106,-0.143 0.227,0.041 -0.283,-0.372 -0.784,-0.312 -0.494,0.062 0.256,0.573 -0.952,1.077 -1.212,0.503 -0.92,0.292 -0.871,0.198 0.049,-0.094 0.973,-0.309 0.928,-0.628 -0.05,-0.32 0.177,-0.074 0.255,-0.306 0.075,-0.233 -0.277,-0.147 -0.535,-0.147 -0.261,0.004 -0.218,-0.016 -0.41,0.297 -0.189,0.314 -0.457,-0.09 -0.796,0.243 -0.337,0.336 0.126,0.436 -0.464,0.261 -0.593,-0.174 -0.724,-0.268 -0.616,0.472 0.109,0.74 -0.012,0.181 0.358,0.213 0.367,0.034 0.803,0.059 0.127,0.415 -0.677,0.356 -0.8,-0.169 -1.494,0.211 -0.69,0.377 -1.211,0.631 -1.762,0.36 -0.551,-0.271 -2.528,-0.896 -2.705,0.679 -0.177,1.574 -0.826,0.554 -1.268,1.258 -0.443,0.706 0.338,2.205 1.13,2.076 0.795,-0.131 0.039,-0.674 0.924,-0.536 0.887,0.136 -0.021,0.001 0.054,-0.544 0.079,-0.544 0.098,0.253 0.696,0.554 0.598,0.303 0.239,-0.529 2.012,-0.383 0,0 -0.434,-0.598 0.152,-0.573 0.595,0.02 0.257,0.294 0.229,0.762 -0.023,0.469 -0.587,0.234 -1.033,0.732 -0.443,0.496 -0.844,0.397 -1.129,1.198 0,0 -0.104,0.089 -0.235,0.244 -0.13,0.154 0.194,0.024 0.396,-0.034 C 2.415,-0.454 2.788,-0.98 3.201,-1.015 3.614,-1.051 4.583,-1.73 4.435,-1.959 4.291,-2.187 4.349,-2.122 4.645,-2.126 4.943,-2.131 6.18,-2.314 6.191,-2.537 6.206,-2.76 5.742,-3.259 6.085,-3.184 6.43,-3.108 7.157,-3.039 6.925,-2.679 6.697,-2.318 5.636,-1.57 4.708,-1.318 3.783,-1.059 2.388,-0.43 1.834,0.086 1.284,0.601 0.715,0.568 0.058,0.931 -0.598,1.294 -1.881,1.482 -0.697,1.384 0.49,1.286 -0.19,1.432 -0.43,1.546 -0.667,1.662 0.38,1.493 1.418,1.176 2.456,0.857 3.133,0.127 3.781,0.004 4.433,-0.116 5.021,-0.595 5.316,-0.689 5.616,-0.784 5.43,-0.6 5.143,-0.392 4.856,-0.184 4.476,-0.013 4.386,0.246 4.291,0.506 4.013,0.498 3.942,0.531 3.876,0.564 3.921,0.552 3.964,0.585 c 0,0 0.084,0.155 0.482,-0.017 C 4.85,0.396 4.057,0.834 3.979,1.114 3.901,1.395 4.433,1.049 4.818,0.784 5.204,0.519 7.337,-0.709 7.63,-0.727 7.926,-0.745 7.888,-1.13 7.755,-1.225 7.623,-1.32 7.922,-1.58 8.345,-1.512 c 0.427,0.064 2.588,-1.26 3.237,-1.317 0.649,-0.063 -0.068,-0.488 0.673,-0.45 0.736,0.035 1.234,-0.711 0.937,-0.919 -0.293,-0.212 -0.06,-0.239 0.228,-0.188 0.292,0.052 -0.313,-1.301 -0.809,-1.446 m -1.447,-8.442 c -0.064,-0.505 -0.695,-0.156 -0.991,-0.105 -0.297,0.051 -0.403,0.116 -0.082,-0.083 0.322,-0.2 -0.064,-0.526 -0.064,-0.526 -1.071,0.583 -1.485,1.576 -1.589,1.303 -0.102,-0.273 -0.72,-1.598 -1.565,-0.804 -0.853,0.796 -0.859,-0.195 -0.993,0.367 -0.132,0.564 0.284,0.473 0.385,0.601 0.106,0.13 -0.059,0.297 -0.293,0.305 -0.228,0.008 -0.13,-0.578 -0.322,-0.643 -0.197,-0.069 -0.986,0.147 -2.183,0.676 -1.2,0.533 -1.077,0.109 -1.73,0.43 -0.658,0.319 -0.666,0.081 -0.822,0.298 -0.154,0.213 -0.025,0.493 -0.524,0.673 -0.499,0.184 -1.359,0.876 -0.821,0.679 0.538,-0.188 0.323,0.083 -0.044,0.332 -0.37,0.25 -0.659,0.357 -0.217,0.317 0.44,-0.038 0.615,-0.188 1.212,-0.689 0.594,-0.499 0.698,-0.164 0.772,-0.572 0.075,-0.411 0.115,-0.37 0.59,-0.376 0.468,-0.009 0.648,-0.087 0.828,-0.367 0.182,-0.281 0.49,-0.171 0.49,-0.171 1.16,-0.317 0.209,0.358 0.209,0.358 -1.175,0.334 -3.089,1.662 -3.089,1.662 -1.029,1.072 -2.095,0.548 -1.992,1.085 0.102,0.539 -0.985,0.559 -1.578,0.409 -0.592,-0.152 -0.33,-0.228 -0.425,0.227 -0.098,0.45 -0.6,-0.012 -1.053,-0.022 -0.453,-0.008 0.218,0.18 -0.409,0.236 -0.628,0.057 -0.733,-0.392 -0.575,0.149 0.163,0.539 -0.223,0.248 -0.223,0.248 -0.517,-0.38 -0.502,0.24 -0.29,1.187 0.218,0.946 0.395,-0.293 0.421,0.17 0.023,0.464 -0.037,0.868 0.348,0.69 0.384,-0.177 0.303,0.071 0.427,0.281 0.121,0.212 1.105,-0.355 1.357,-0.51 0.253,-0.153 0.828,-0.022 0.828,-0.022 0.594,-0.158 -0.031,-0.626 -0.031,-0.626 -0.397,-0.006 -0.037,-0.157 -0.037,-0.157 0.276,-0.152 0.491,0.011 0.491,0.011 -0.025,0.271 -0.098,0.835 0.389,0.56 0.489,-0.275 0.588,-0.147 0.588,-0.147 0.281,0.491 0.303,-0.263 0.408,-0.114 0.104,0.147 0.301,0.086 0.301,0.086 2.22,-0.718 2.08,-0.463 2.08,-0.463 -0.062,0.214 0.014,0.21 0.278,0.274 0.266,0.069 -0.191,0.364 0.147,0.411 0.339,0.048 0.447,-0.243 0.683,-0.352 0.242,-0.107 0.236,0.122 0.483,0.043 0.246,-0.079 -0.032,-0.519 0.102,-0.638 0.132,-0.12 0.139,0.681 0.144,0.617 0.007,-0.061 0.234,-0.011 0.234,-0.011 1.081,0.196 1.94,0.092 1.94,0.092 0,0 0.238,-0.344 -0.261,-0.733 -0.504,-0.389 0.518,-0.471 1.334,-0.57 0.82,-0.1 0.576,0.122 1.763,-0.402 1.189,-0.52 0.504,0.028 1.642,-0.073 1.134,-0.098 -0.224,-0.283 0.013,-0.281 0.236,0.003 0.045,-0.313 0.31,-0.36 0.268,-0.054 -0.623,-0.458 -2.358,0.09 l -1.035,0.119 c -1.029,0.116 -0.112,-0.177 0.414,-0.514 0.519,-0.335 1.698,-1.018 2.751,-0.935 1.055,0.081 0.47,-0.571 0.133,-0.797 -0.343,-0.222 0.046,-0.704 -0.397,-0.215 -0.443,0.492 -0.32,0.085 -0.535,0.346 -0.217,0.26 -0.136,0 -0.298,0.023 -0.078,0.01 -0.117,-0.026 -0.133,-0.052 -0.01,-0.022 -0.013,-0.019 0,0 0.003,0.007 0.004,0.007 0.008,0.021 0.027,0.121 -0.077,0.193 -0.077,0.193 -0.822,0.093 -0.564,0.617 -0.865,0.146 -0.298,-0.471 1.874,-1.056 2.303,-1.066 0.428,-0.011 0.36,-0.114 0.36,-0.114 -0.799,-0.67 -2.869,0.495 -3.684,0.768 -0.814,0.276 -2.393,0.897 -2.782,1.142 -0.389,0.246 -0.408,0.003 -0.408,0.003 1.578,-1.346 2.774,-1.342 3.015,-1.494 0.243,-0.147 0.937,0.227 0.68,-0.103 -0.261,-0.33 0.188,-0.338 0.188,-0.338 0.91,0.208 -0.14,-0.159 0.418,-0.13 0.557,0.03 0.82,-0.047 0.664,-0.169 -0.158,-0.125 -0.417,-0.323 -0.131,-0.336 0.285,-0.016 0.513,0.09 0.315,-0.186 -0.2,-0.281 1.046,-0.567 1.709,-0.943 0.66,-0.376 0.808,0.086 0.751,-0.419 M -0.944,3.154 c 0.035,0.531 0.636,0.276 0.636,0.276 0.824,-0.234 0.245,0.026 0.245,0.026 -0.113,0.091 -0.108,0.49 0.182,0.492 C 0.413,3.951 0.833,3.15 0.833,3.15 0.939,3.003 1.007,3.17 1.007,3.17 1.468,3.549 1.57,3.042 1.522,3.062 1.477,3.085 1.118,2.922 1.249,2.684 1.384,2.445 2.1,2.37 2.859,2.096 3.609,1.822 3.003,1.629 2.821,1.656 2.644,1.681 1.666,1.85 2.764,1.432 3.861,1.014 3.236,0.867 3.236,0.867 2.842,1.22 0.294,2.429 -0.259,2.808 -0.809,3.189 -0.983,2.623 -0.944,3.154 m 15.82,8.156 c 0.021,-0.2 0.03,-0.383 0.03,-0.529 0.79,-0.308 1.558,-0.564 1.763,-0.483 0.444,0.174 0.206,-0.052 0.187,-0.071 -0.017,-0.018 -0.505,-0.486 0.171,-0.528 0.675,-0.042 0.576,-0.083 0.634,-0.141 0.057,-0.059 -0.904,-0.342 0.482,-0.358 0,0 0.431,0.049 0.24,-0.199 C 18.191,8.754 18.116,8.648 18.432,8.616 18.744,8.583 18.703,8.591 18.547,8.297 18.395,8.003 18.111,7.251 17.699,7.225 c 0,0 -0.116,-0.099 -0.081,0.155 C 17.65,7.634 17.537,7.414 17.465,7.207 17.385,6.996 17.146,6.704 17.041,6.989 16.936,7.272 16.71,6.99 16.652,6.929 16.595,6.87 16.173,7.126 15.674,7.771 15.177,8.418 15.268,8.239 14.969,8.209 14.673,8.181 14.085,8.016 13.339,8.343 12.597,8.67 11.278,8.651 11.773,8.354 12.264,8.057 13.74,8.213 14.152,7.916 14.571,7.619 15.411,7.446 15.031,7.155 14.655,6.863 14.518,7.319 14.474,7.055 14.432,6.79 14.575,6.529 14.219,6.696 13.861,6.862 13.933,7.329 12.68,7.276 11.432,7.223 10.282,8.291 11.277,7.367 12.27,6.444 12.071,7.292 13.099,6.497 14.13,5.703 14.269,6.038 14.668,6.108 15.062,6.178 14.521,5.763 15.07,5.785 15.617,5.807 14.835,4.956 14.375,5.326 c -0.458,0.37 0.057,-0.44 0.656,-0.516 0.604,-0.077 -1.004,-0.912 -1.09,0.225 0,0 -0.983,1.132 -1.513,0.736 -0.535,-0.397 0.057,0.054 1.116,-0.698 0,0 0.04,-0.167 -0.146,-0.161 -0.189,0.005 0.719,-0.342 -0.326,-0.221 -1.045,0.121 0.094,-0.242 0.84,-0.393 0.752,-0.151 0.621,0.268 1.011,-0.309 0.39,-0.576 0.005,-0.402 -0.41,-0.432 C 14.098,3.527 14.11,3.244 12.627,3.841 11.139,4.438 10.743,3.953 11.94,3.53 c 1.204,-0.425 1.747,-0.546 1.802,-0.796 0,0 0.061,0.136 0.548,-0.077 0.492,-0.215 1.326,0.022 1.148,-0.373 -0.177,-0.393 0.11,-0.503 -0.295,-0.628 0,0 -0.134,-0.004 -0.115,0.129 0.021,0.133 -0.167,-0.003 -0.089,-0.327 0.077,-0.327 0.006,-0.096 -0.078,-0.186 -0.085,-0.09 0.742,-0.449 1.174,-0.589 0.433,-0.142 -0.005,-0.187 -0.4,0 C 15.239,0.871 15.228,0.593 15.886,0.424 16.543,0.257 15.094,0.366 14.4,0.711 13.704,1.054 13.246,0.799 12.088,1.553 10.938,2.308 8.943,2.903 8.583,2.875 8.225,2.846 9.009,2.569 9.498,2.319 9.984,2.066 9.754,2.146 9.9,1.989 c 0.146,-0.156 0.868,-0.594 1.385,-0.586 0.522,0.008 0.618,10e-4 0.844,-0.146 0.225,-0.151 -0.097,-0.395 0.479,-0.326 0.581,0.074 -0.027,-0.23 0.559,-0.24 0.583,-0.009 0.459,0.157 0.248,-0.426 0,0 -0.082,-0.044 0.142,0 0.223,0.044 0.256,0.102 0.199,-0.115 -0.061,-0.22 0.142,-0.353 0.323,-0.386 0.185,-0.034 -0.052,0.065 0.344,-0.106 0.397,-0.171 0.966,-0.535 1.771,-0.76 0,0 0.168,-0.015 -0.052,-0.203 -0.218,-0.189 -0.234,-0.241 -0.129,-0.275 0.104,-0.035 -0.067,-0.082 -0.534,0.076 l -0.469,0.158 c 0,0 -0.153,-0.12 0.133,-0.204 0.292,-0.082 -0.049,-0.439 -0.091,-0.447 -0.036,-0.006 -0.714,0.373 -0.824,0.757 -0.111,0.385 -0.617,0.844 -0.727,0.622 -0.108,-0.223 -0.397,-0.665 -0.547,-0.586 -0.15,0.08 -0.354,-0.3 -0.316,-0.401 0.037,-0.103 -0.371,-0.122 -0.824,0.155 -0.453,0.281 -0.536,0.496 -0.969,0.418 -0.432,-0.079 0.174,0.508 0.301,0.496 0.128,-0.014 0.287,0.144 -0.216,0.256 -0.504,0.113 -0.037,-0.139 -0.362,-0.555 -0.322,-0.413 0.032,0.191 -1.094,0.34 -1.129,0.149 -1.543,0.46 -1.39,0.687 C 8.239,0.423 9.386,0.203 7.455,1.106 5.529,2.008 5.48,2.207 5.408,1.943 5.332,1.681 6.377,1.722 6.445,1.23 6.51,0.735 6.037,0.812 6.663,0.892 7.291,0.972 7.743,0.786 7.755,0.62 7.773,0.452 7.396,-0.424 7.233,0.01 7.069,0.444 6.622,0.257 6.398,0.41 6.172,0.561 6.142,0.511 6.169,0.686 6.191,0.86 5.954,0.462 5.88,0.543 5.806,0.625 5.867,0.918 5.235,1.196 c 0,0 0.152,0.133 -0.006,0.237 C 5.068,1.542 5.28,1.165 5.127,1.403 4.972,1.64 4.732,1.501 4.784,1.833 4.835,2.161 4.702,2.186 4.473,2.342 4.253,2.496 4.742,2.459 4.788,2.394 4.838,2.328 5.01,2.177 5.046,2.32 5.081,2.462 4.253,3.082 3.379,3.283 c 0,0 0.23,0.238 -0.134,0.507 C 2.881,4.059 1.755,3.994 1.57,3.875 1.389,3.759 1.239,3.492 1.219,4.176 c 0,0 -0.636,0.197 -0.81,-0.063 C 0.232,3.857 0.375,4.337 -0.187,4.35 -0.743,4.365 -0.816,4.029 -0.623,4.714 c 0.195,0.685 -0.626,-0.643 -0.606,0.153 0.019,0.802 -0.055,1.712 0.385,1.219 0,0 0.246,-0.211 0.095,0.274 -0.15,0.484 0.178,0.498 0.295,0.408 0.117,-0.088 0.27,-0.175 0.347,0.151 0.079,0.328 0.223,0.089 0.531,0.014 C 0.735,6.859 1.203,6.709 1.27,6.549 1.336,6.386 1.437,6.502 1.71,6.508 1.984,6.516 2.749,6.729 2.406,6.261 2.06,5.793 2.199,6.167 1.948,5.949 1.693,5.733 2.033,5.589 2.472,5.63 2.914,5.671 2.576,6.167 2.633,6.266 2.69,6.368 2.947,6.426 3.489,6.202 4.026,5.98 3.69,6.161 3.707,6.371 3.722,6.579 3.985,6.064 4.026,5.98 4.07,5.897 6.101,5.535 6.35,5.701 6.595,5.865 6.087,5.843 6.703,6.043 c 0,0 0.021,0.447 0.601,0.082 C 7.885,5.758 7.868,5.883 8.054,6.038 8.234,6.191 7.948,5.453 7.841,5.439 7.729,5.427 8.043,5.256 8.144,5.646 8.25,6.034 8.215,5.987 8.594,5.985 8.974,5.981 9.474,5.644 10.145,5.995 10.814,6.345 10.4,5.548 10.17,5.439 9.938,5.33 10.099,5.038 10.678,5.088 c 0.581,0.047 0.409,-0.497 1.455,-0.252 1.049,0.243 0.194,0.177 0.027,0.235 -0.166,0.057 -0.511,0.21 -0.482,0.47 0.024,0.261 -1.086,-0.446 -0.987,0.078 0.095,0.525 0.043,0.706 0.506,0.509 0.46,-0.192 0.526,0.552 -0.512,0.559 C 9.649,6.691 9.725,6.585 9.509,6.786 9.287,6.983 8.447,7.479 7.689,7.11 6.928,6.74 6.745,6.452 6.809,7.063 6.874,7.677 6.257,6.849 6.2,6.784 6.137,6.72 6.309,7.21 5.986,6.935 5.662,6.66 5.567,6.609 5.681,7.164 5.792,7.718 5.471,7.162 5.367,7.05 5.264,6.942 5.254,7.029 5.306,8.282 5.359,9.536 5.055,8.13 4.757,8.563 4.458,8.994 4.752,8.801 4.403,8.738 4.043,8.672 3.884,8.714 4.171,9.048 4.458,9.383 3.57,8.714 3.901,9.39 c 0.337,0.673 0.168,1.584 0.529,1.082 0.361,-0.505 -0.333,0.843 0.507,0.579 0.84,-0.265 -0.496,0.482 0.6,0.08 0,0 0.014,-0.385 0.415,-0.358 0.406,0.026 0.845,0.171 0.141,-0.518 0,0 -0.034,-0.393 0.213,-0.238 0.248,0.158 0.093,0.597 0.318,0.617 0.225,0.016 0.704,-0.306 1.084,-0.161 0.374,0.147 1.357,-0.115 1.391,-0.26 C 9.131,10.063 8.277,9.637 8.647,9.665 9.014,9.692 9.563,9.529 9.39,10.192 9.219,10.856 9.35,10.255 8.52,10.925 8.368,11.048 8.229,11.179 8.094,11.31 H -14.115 V -5.103 h 0.006 c 0.553,-0.017 -0.2,-0.62 0.26,-0.662 0.459,-0.043 0.632,-0.958 0.539,-1.584 -0.089,-0.627 0.432,-1.317 0.458,-1.52 0.028,-0.202 -0.127,-0.738 -0.511,-0.232 -0.389,0.509 -0.155,-0.323 -0.044,-0.5 0.112,-0.177 0.235,0.029 0.489,0.201 0.256,0.174 0.345,-0.14 0.778,-1.258 0.432,-1.117 2.226,-3.252 2.229,-3.48 0.003,-0.23 0.216,-0.339 0.092,-0.469 -0.126,-0.131 -0.314,0.221 -0.621,0.38 -0.303,0.158 -0.215,-0.091 -0.215,-0.091 -0.275,-0.8 2.157,-3.094 2.491,-3.159 0.326,-0.061 0.336,-0.386 1.026,-0.784 0.693,-0.392 0.571,-0.818 0.955,-0.731 0.385,0.084 -0.284,0.451 -0.731,0.879 -0.442,0.423 -0.588,0.605 -0.701,0.771 -0.114,0.163 0.486,0.221 0.173,0.238 -0.311,0.024 -1.007,0.677 -1.717,1.349 -0.711,0.671 -0.416,0.6 -0.243,0.775 0.171,0.174 0.645,0.802 0.683,0.179 0.038,-0.62 0.906,-1.474 1.598,-1.828 0.69,-0.356 0.103,-0.492 0.895,-1.13 0.339,-0.273 0.665,-0.556 0.949,-0.827 -0.008,0.263 0.014,0.522 0.024,0.67 0.04,0.455 0.223,0.662 -0.448,0.429 -0.674,-0.228 -0.705,0 -0.705,0 -0.271,0.721 0.045,1.281 0.354,2.057 0.306,0.777 0.45,0.703 0.503,0.507 0.05,-0.2 0.339,-0.369 0.897,-0.334 0.559,0.037 0.737,-0.165 0.307,-0.611 -0.431,-0.446 0.207,-0.121 0.207,-0.121 0.209,0.812 0.128,0.478 1.552,0.291 1.421,-0.191 0.962,-0.442 0.754,-0.782 -0.216,-0.341 0.47,-0.013 0.47,-0.013 0.718,0.847 0.035,0.742 -0.12,0.699 -0.151,-0.042 -0.142,0.057 -0.238,0.364 -0.094,0.304 -0.771,0.761 -1.076,0.835 -0.302,0.076 -0.779,0.601 -0.889,0.895 -0.11,0.296 -0.573,0.675 -0.753,0.386 -0.175,-0.292 -0.197,-0.146 -0.197,-0.146 -0.269,0.424 -0.316,0.112 -1.158,0.293 -0.848,0.177 -0.412,0.331 -0.412,0.331 2.512,0.048 3.321,-0.835 3.321,-0.835 1.17,-0.344 0.29,-0.435 0.893,-0.694 0.603,-0.263 1.027,-0.315 0.946,-0.642 -0.081,-0.331 0.547,-0.304 0.547,-0.304 2.422,-0.483 -0.281,-0.545 0.963,-1 1.243,-0.451 -0.396,0.291 0.457,0.295 0.853,0.011 0.691,0.14 -0.016,0.531 -0.704,0.395 -0.921,0.808 -1.665,0.91 -0.737,0.104 -1.874,0.992 -2.875,1.606 -1.001,0.619 -0.253,-0.27 -1.753,0.417 -1.499,0.684 -1.044,0.769 -0.027,0.799 1.007,0.029 3.024,-0.928 4.446,-1.744 1.417,-0.812 0.868,-0.295 -0.137,0.419 -1.002,0.716 -2.4,1.615 -3.726,2.256 -1.326,0.64 -1.232,0.559 -1.456,0.621 -0.229,0.061 -0.101,0.156 -0.101,0.156 -0.043,0.718 0.228,0.406 0.675,0.298 0.451,-0.112 0.401,-0.006 0.252,0.112 -0.153,0.117 -0.203,0.267 0.025,0.416 0.227,0.151 0.87,-0.82 1.197,-1.174 0.335,-0.352 0.818,-0.396 1.463,-0.6 0.651,-0.202 0.739,-0.449 0.386,-0.322 -0.352,0.132 0.214,-0.357 0.094,-0.419 -0.124,-0.062 -0.138,0.214 -0.68,0.327 -0.546,0.112 1.15,-1.039 1.379,-1.108 0.234,-0.07 -0.234,0.176 -0.276,0.333 -0.04,0.155 0.292,-0.206 0.682,-0.339 0.397,-0.13 -0.192,0.25 -0.531,0.451 -0.346,0.202 -0.207,0.685 0.194,0.153 0.399,-0.529 1.879,-1.13 1.879,-1.13 0,0 0.202,0.382 0.238,0.128 0.036,-0.258 0.915,-0.681 1.471,-0.898 0.552,-0.218 0.131,-0.534 0.131,-0.534 -0.42,-0.376 0.353,-0.34 0.353,-0.34 0.428,-0.738 2.538,-0.923 3.034,-1.088 0.501,-0.171 1.129,0.124 0.684,-0.327 -0.442,-0.445 0.256,-0.382 0.899,-0.673 0.637,-0.288 1.154,0.095 0.675,-0.369 -0.482,-0.469 0.12,-0.407 0.12,-0.407 0.474,-1.134 -2.096,-1.667 -2.096,-1.667 0,0 -0.627,0.801 -1.114,0.997 -0.49,0.193 0.06,0.112 0.132,0.482 0.075,0.369 -0.388,0.62 -0.306,0.35 0.077,-0.265 -0.185,-0.85 -0.515,-0.667 -0.335,0.179 -0.631,0.355 -1.522,0.234 -0.889,-0.118 -1.456,0.234 -1.677,0.507 -0.224,0.276 -0.521,0.236 -0.779,0.232 -0.25,-0.005 -0.522,-0.318 -0.509,0.111 0.016,0.428 -0.261,-0.029 -0.261,-0.029 -0.558,-0.407 2.211,-0.916 3.194,-1.018 0.983,-0.103 2.318,-0.892 2.027,-0.963 -0.292,-0.068 -0.667,0.28 -0.591,-0.18 0.075,-0.457 0.084,-0.205 -0.438,-0.12 -0.522,0.083 -0.375,0.505 -1.107,0.382 -0.735,-0.123 -0.674,0.251 -1.391,0.3 -0.715,0.053 -1.013,-0.031 -0.341,-0.215 0.671,-0.186 0.506,-0.001 1.831,-0.792 1.322,-0.79 0.939,-0.181 1.617,-0.457 0.681,-0.277 0.239,-0.696 0.044,-0.783 -0.191,-0.088 -0.265,0.18 -0.389,-0.311 -0.123,-0.491 -0.517,-0.16 -0.904,0.407 -0.389,0.563 -0.761,0.588 -1.437,0.437 -0.678,-0.149 -0.482,0.242 -0.482,0.242 0.508,0.593 -0.097,0.101 -0.532,0.463 -0.438,0.36 -0.946,0.289 -1.024,0.281 -0.077,-0.006 -0.342,-0.223 -0.571,0.122 -0.228,0.352 -1.574,0.355 -2.012,0.029 -0.44,-0.326 -0.436,-0.272 -0.439,-0.128 -0.007,0.147 0.311,0.538 -0.753,-0.015 -0.084,-0.044 -0.148,-0.053 -0.218,-0.074 0.013,-0.029 0.046,-0.068 0.052,-0.094 0.094,-0.368 1.369,-1.038 1.675,-1.245 0.307,-0.21 0.525,0.028 0.525,0.028 1.135,-0.112 1.89,-0.503 1.866,-0.639 -0.02,-0.136 -1.075,0.401 -1.222,0.28 -0.145,-0.122 0.669,-0.375 1.219,-0.469 0.551,-0.101 0.235,-0.203 0.235,-0.203 -1.953,-0.415 -5.752,2.871 -5.583,2.378 0.167,-0.494 4.099,-2.414 4.414,-2.866 0.313,-0.454 1.515,-0.48 1.056,-0.765 -0.455,-0.287 -2.703,1.314 -4.782,2.158 -2.073,0.844 -3.696,3.065 -3.826,2.782 -0.137,-0.289 0.537,-1.718 4.368,-3.833 1.334,-0.738 2.209,-1.351 2.809,-1.834 0.98,0.12 1.772,0.384 2.004,0.832 0.564,1.085 0.849,0.805 0.89,0.587 0.043,-0.221 0.149,-0.114 0.322,0.214 0.168,0.322 0.214,0.007 0.214,0.007 0,0 0.025,-0.056 0.324,0.119 0.295,0.178 -0.467,0.058 -0.535,0.308 -0.07,0.248 0.779,0.584 1.059,0.344 0.28,-0.239 -0.355,-0.382 0.029,-0.504 0.382,-0.115 1.759,0.2 2.45,0.66 0.687,0.458 1.764,1.098 2.211,1.642 0.445,0.553 0.772,0.414 0.694,0.38 -0.081,-0.037 -0.427,-0.171 0.297,-0.093 0.728,0.074 0.772,0.609 0.728,0.794 -0.044,0.188 0.038,-0.227 -0.22,0 -0.255,0.226 0.171,0.574 0.236,0.411 0.059,-0.165 -0.019,-0.146 0.433,-0.193 0.453,-0.049 1.466,0.933 2.13,1.593 0.661,0.665 0.976,0.559 0.878,0.804 -0.095,0.241 -0.016,0.308 -0.016,0.308 1.009,0.726 2.004,2.038 2.511,2.641 0.51,0.598 -0.053,-0.674 0.743,0 0.798,0.676 2.065,3.19 2.382,3.761 0.317,0.563 1.04,1.61 1.068,2.274 0.021,0.664 0.239,0.55 0.431,0.489 0.184,-0.063 0.598,0.943 0.563,1.119 -0.03,0.175 -0.075,0.475 0.253,0.526 0.326,0.052 0.058,0.084 0.366,0.865 0.305,0.783 -0.177,0.57 0.473,0.339 0.653,-0.231 0.319,0.763 0.319,0.763 0.259,0.449 1.651,-0.115 1.589,-0.324 -0.055,-0.208 -0.607,-0.511 -0.222,-0.487 0.379,0.027 0.675,-0.358 0.588,-0.328 -0.091,0.031 -0.527,-0.531 -0.234,-0.8 0.293,-0.269 -0.212,-1.507 -0.69,-1.719 -0.479,-0.213 -0.604,-1.426 -0.836,-1.827 -0.225,-0.398 -0.455,0.083 -0.639,0.198 -0.18,0.113 0.29,0.563 0.151,0.674 -0.139,0.112 -1.11,-0.694 -0.724,-1.035 0.38,-0.343 0.722,-0.242 0.013,-1.363 -0.711,-1.122 -2.286,-3.922 -2.608,-4.337 -0.321,-0.414 -0.706,-1.092 -0.607,-0.803 0.096,0.281 0.017,0.195 -0.347,0.206 -0.368,0.011 0.185,0.336 0.272,0.569 0.087,0.229 -0.304,0.484 -0.338,0.174 -0.032,-0.309 -1.776,-1.926 -2.511,-2.547 -0.736,-0.62 -2.475,-2.689 -2.798,-2.957 -0.329,-0.27 -0.387,-0.274 -0.242,-0.361 0.142,-0.084 1.051,0.703 1.451,1.147 0.4,0.446 0.75,0.59 1.117,0.429 0.371,-0.156 0.937,1.133 1.651,2.199 0.711,1.064 0.973,0.458 1.189,0.243 0.216,-0.219 -0.129,-0.436 -0.375,-0.557 -0.245,-0.118 -1.794,-2.116 -1.957,-2.214 -0.164,-0.099 -0.203,0.112 -0.28,0.038 -0.075,-0.07 0.236,-0.13 0.187,-0.283 -0.056,-0.156 -0.655,-0.623 -0.562,-0.399 0.095,0.224 -0.238,0.254 -0.749,-0.42 -0.509,-0.68 -2.428,-1.454 -2.891,-1.813 -0.461,-0.358 -0.074,0.323 -0.585,-0.062 -0.51,-0.383 -0.964,-0.963 -1.402,-1.038 -0.441,-0.072 -0.529,-0.527 -0.514,-0.691 0.016,-0.167 -0.005,-0.363 -0.363,-0.422 -0.361,-0.053 -1.18,-0.634 -1.282,-0.691 -0.106,-0.049 -0.434,0.299 -0.267,0.401 0.163,0.103 1.234,0.956 1.301,1.098 0.065,0.145 0.168,0.244 0.615,0.323 0.446,0.084 1.894,1.299 2.282,1.714 0.396,0.415 -0.351,-0.115 -0.734,-0.361 -0.385,-0.246 -2.847,-2.073 -3.185,-2.269 -0.341,-0.194 -0.077,0.101 -0.711,-0.026 -0.637,-0.122 0.138,-0.429 -0.246,-0.522 -0.382,-0.093 -0.633,0.329 -0.69,0.436 -0.056,0.112 2.889,2.325 4.05,2.948 1.163,0.621 4.051,3.314 4.314,3.587 0.263,0.278 0.62,0.811 0.2,0.423 -0.411,-0.388 0.094,-0.078 -4.179,-3.094 -4.274,-3.014 -5.448,-2.367 -5.55,-3.242 -0.1,-0.871 4.373,-2.094 4.851,-2.182 0,0 0.312,-0.09 0.521,-0.127 0.206,-0.039 0.134,-0.004 0.327,-0.192 0.193,-0.191 0.21,-0.217 0.006,-0.228 -0.205,-0.006 -0.546,-0.024 -0.52,-0.274 0.026,-0.255 3.026,-0.76 3.135,-0.658 0.106,0.102 1.562,0.012 1.963,0.102 0.406,0.093 -0.06,0.27 -0.237,0.16 -0.18,-0.111 -1.08,-0.01 -1.176,0.096 -0.092,0.106 -0.261,0.183 -0.577,0.306 -0.309,0.12 -0.868,-0.15 -1.557,-0.076 -0.686,0.073 -0.268,0.582 -0.221,0.75 0.046,0.163 0.351,-0.047 0.351,-0.047 0.012,-0.006 0.021,-0.014 0.03,-0.019 0.401,-0.212 0.901,-0.045 1.533,-0.102 0.649,-0.054 1.197,-0.318 1.197,-0.318 0.924,0.038 -0.289,-0.366 2.056,-0.183 2.343,0.18 3.172,0.69 3.469,0.913 0.29,0.222 0.436,0.029 0.436,0.029 -1.806,-1.922 -5.571,-1.046 -4.491,-1.576 1.088,-0.526 5.556,1.444 5.454,1.301 -0.107,-0.145 -1.037,-0.278 -0.39,-0.282 0.645,-0.011 0.645,0.315 0.551,0.063 -0.099,-0.254 -0.827,-0.524 -2.703,-1.36 -1.869,-0.84 -5.252,-0.5 -5.488,-0.45 -0.238,0.05 -0.218,-0.092 -0.218,-0.092 0,0 -0.2,-0.369 2.064,-0.313 2.261,0.062 4.068,0.385 5.906,0.902 1.835,0.518 1.42,0.939 1.835,0.705 0.41,-0.238 -0.102,-0.451 -0.43,-0.596 -0.323,-0.146 -0.732,-0.445 -0.491,-0.425 0.242,0.021 0.647,0.079 0.572,-0.19 -0.071,-0.266 -1.737,-0.246 -2.441,-0.315 -0.703,-0.073 -2.42,-0.62 -2.764,-0.709 -0.342,-0.085 0.045,0.383 0.045,0.383 -1.066,0.174 -1.088,-0.237 -1.899,-0.321 -0.809,-0.077 -2.175,0.187 -2.417,0.171 -0.24,-0.017 0.029,-0.248 -0.904,0.049 -0.931,0.298 -1.747,0.191 -2.191,0.37 -0.444,0.175 0.056,0.276 -0.126,0.432 -0.18,0.155 -0.218,0.43 -0.649,0.224 -0.426,-0.207 -4.21,1.387 -4.21,1.387 -0.154,0.06 -0.042,0.174 -0.439,0.14 -0.401,-0.03 -0.205,0.082 -0.115,0.29 0.088,0.212 -0.361,0.181 -0.771,0.445 -0.408,0.267 -0.429,-0.147 -0.421,0.262 0.006,0.407 -0.327,0.3 -0.602,0.129 -0.273,-0.171 -0.355,0.141 -0.244,0.292 0.109,0.152 -0.165,0.057 -0.165,0.057 -0.222,-0.049 -0.177,-0.553 0.368,-0.547 0.539,0.006 0.546,-0.17 0.459,-0.175 -0.08,-0.004 -0.17,-0.133 -0.036,-0.184 0.129,-0.053 -0.199,-0.509 -0.813,-0.204 -0.552,0.279 -0.951,0.193 -1.029,0.174 0.076,-0.065 0.135,-0.087 0.2,-0.063 0.35,0.12 0.51,-0.433 0.244,-0.619 -0.073,-0.051 -0.508,0.154 -1.1,0.477 -3.943,-1.158 -6.577,0.139 -7.008,0.579 -0.449,0.468 -0.922,0.415 -1.088,0.533 -0.166,0.115 -0.022,0.095 -0.356,0.002 -0.331,-0.089 -1.2,0.512 -1.281,0.567 -0.08,0.057 -0.437,0.308 -0.146,0.263 0.291,-0.048 1.428,-0.391 1.899,-0.697 0.467,-0.306 1.235,-0.324 1.341,-0.363 0.105,-0.041 0.694,-0.234 0.734,-0.384 0.048,-0.152 1.324,-0.255 1.324,-0.255 0.3,-0.045 0.109,-0.352 0.2,-0.291 0.094,0.062 0.332,-0.045 0.332,-0.045 0.8,-0.338 1.789,0.166 2.222,0.171 0.432,0.001 0.259,0.088 0.273,0.23 0.015,0.135 -0.019,0.038 -0.019,0.038 -1.346,-0.694 -7.396,1.237 -7.398,1.469 0,0.049 0.008,0.065 0.016,0.076 -0.019,-0.011 -0.069,-0.009 -0.218,0.091 -0.358,0.243 -0.998,0.528 -1.004,0.66 -0.005,0.128 0.5,-0.132 0.865,-0.337 0.359,-0.206 -0.276,0.342 -0.507,0.529 -0.228,0.189 -0.306,0.419 -0.33,0.506 -0.022,0.09 0.643,-0.165 0.563,-0.347 -0.084,-0.184 0.33,-0.538 0.33,-0.538 2.755,-1.172 4.199,-1.373 4.816,-1.497 0.622,-0.123 0.434,0.048 0.434,0.048 -2.708,0.401 -5.992,2.726 -5.992,2.726 -0.403,0.099 -0.304,0.704 0.136,0.313 0.437,-0.391 0.863,-0.343 0.624,-0.258 -0.01,0.007 -0.025,0.012 -0.037,0.018 -0.197,0.089 -0.171,0.214 -0.171,0.214 0.18,0.403 0.529,-0.236 0.529,-0.236 1.026,-1.275 0.729,-0.75 1.208,-0.946 0.483,-0.19 1.282,-0.357 1.222,-0.52 -0.062,-0.16 -0.179,0.103 -0.201,-0.05 -0.019,-0.152 1.767,-0.56 1.767,-0.56 0.711,-0.211 1.676,-0.34 2.643,-0.367 -1.157,0.715 -2.187,1.394 -2.287,1.509 -0.233,0.268 1.407,-0.562 1.34,-0.263 -0.066,0.295 -2.543,1.707 -2.405,1.513 0.144,-0.192 1.578,-0.932 -0.009,-0.255 -1.593,0.681 -2.219,2.63 -2.833,2.615 -0.614,-0.014 -1.513,1.683 -1.808,1.996 -0.295,0.312 -0.788,0.868 -0.674,1.068 0.115,0.204 1.541,-0.903 0.106,0.438 -0.695,0.653 -1.469,1.932 -2.093,3.069 V -30.128 H 27.323 V 11.31 H 14.876 z"\n           id="path3145"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,306.01,1062.8)"\n         id="g3147">\n        <path\n           d="m 0,0 c -0.334,0.401 -1.045,1.07 -1.682,1.138 -0.843,0.094 -1.219,0.776 -1.573,0.71 -0.349,-0.065 -0.539,-0.32 -1,0.005 C -4.722,2.174 -5.292,1.724 -4.736,1.722 -4.179,1.719 -4.737,1.433 -3.407,1.312 -2.321,1.212 -1.794,0.592 -1.184,0 H 0 z"\n           id="path3149"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,314.12,1062.8)"\n         id="g3151">\n        <path\n           d="m 0,0 c -0.049,0.457 -0.165,1.003 -0.402,1.41 -0.458,0.793 -0.319,1.464 0.387,1.776 0,0 0.271,0.04 0.312,-0.295 0.04,-0.335 0.571,0.874 1.714,0.889 0,0 0.35,0.188 0.132,0.233 C 1.929,4.055 2.78,4.355 2.398,3.894 2.019,3.432 2.876,3.847 3.076,4.034 3.274,4.219 3.718,3.832 3.751,3.721 3.78,3.612 3.934,3.987 3.765,4.125 3.602,4.266 4.732,4.717 3.729,4.512 2.728,4.305 3.142,4.55 2.31,4.387 1.483,4.223 0.113,3.888 1.412,4.446 2.71,5.002 2.905,4.999 3.164,5.196 3.425,5.397 4.523,5.638 3.06,5.643 1.599,5.645 2.516,5.097 -0.438,4.055 c 0,0 -0.727,0.004 0.312,0.428 0,0 0.28,0.23 0.457,0.555 C 0.507,5.365 0.47,5.082 0.596,4.978 0.728,4.876 0.967,5.087 1.214,5.194 1.453,5.298 1.366,5.229 1.373,5.145 1.381,5.063 1.852,5.362 1.937,5.471 2.019,5.579 3.11,6.173 3.29,6.112 3.469,6.048 3.503,6.499 2.336,6.006 c 0,0 -0.196,-0.074 -0.208,-0.146 0,0 0.003,-0.038 0.039,-0.049 C 2.202,5.802 2.035,5.556 1.771,5.643 1.511,5.728 1.502,5.572 1.098,5.683 0.691,5.795 0.203,5.533 0.011,5.347 -0.181,5.168 -0.348,5.007 -0.476,5 -0.605,4.994 -0.503,4.516 -0.83,4.572 c -0.328,0.057 -0.204,0.27 -0.204,0.27 0,0 -0.443,1.636 -0.738,2.159 -0.231,0.404 -0.016,0.294 0.147,0.133 -0.233,0.326 -0.698,1.055 -0.654,1.364 0.057,0.433 -0.086,1.304 -0.469,1.075 0,0 -0.142,0 -0.013,-0.089 0.131,-0.089 0.125,-0.265 -0.009,-0.131 -0.134,0.131 -0.485,0.61 -0.646,0.344 0,0 -0.226,-0.055 -0.038,-0.184 0.192,-0.127 0.292,-0.183 0.537,-0.757 0,0 0.052,-0.135 0.2,-0.244 C -2.57,8.399 -2.564,8.285 -2.565,8.158 -2.57,8.034 -2.384,7.654 -2.27,7.612 -2.154,7.568 -1.663,6.017 -1.703,5.752 -1.744,5.491 -1.714,4.953 -1.601,4.734 -1.495,4.514 -1.642,4.512 -1.777,4.973 -1.91,5.434 -1.974,5.75 -2.281,6.354 -2.587,6.955 -2.54,7.522 -3.109,7.903 c -0.573,0.38 -0.461,0.778 -0.862,0.668 0,0 -0.104,-0.015 0.042,-0.152 0.151,-0.139 0.252,-0.003 0.428,-0.421 0,0 0.062,-0.294 -0.11,-0.304 -0.173,-0.009 0.373,-0.505 0.484,-0.756 0.112,-0.253 0.463,-0.801 0.402,-0.991 -0.063,-0.189 -0.411,0.464 -0.655,1.002 -0.244,0.537 -0.466,0.878 -0.862,0.925 0,0 -0.038,-0.09 0.072,-0.142 0.11,-0.05 0.138,-0.09 0.141,-0.27 0,-0.177 -0.055,-0.41 0.17,-0.477 0.223,-0.069 0.21,0.067 0.286,0.035 0.075,-0.033 0.36,-0.414 0.259,-0.919 -0.1,-0.505 0.035,-1.332 0.112,-1.51 0.084,-0.179 0.45,-0.765 0.351,-0.965 -0.098,-0.199 -0.03,-0.292 0.276,-0.186 0.309,0.105 0.501,-0.026 0.138,0.676 -0.364,0.7 -0.488,0.221 -0.245,0.515 0.252,0.294 -0.063,0.745 -0.123,0.955 -0.065,0.209 0.119,0.166 0.169,0.04 0.049,-0.124 0.199,-0.816 0.379,-0.892 0.184,-0.078 0.325,-0.901 0.199,-1.213 -0.088,-0.226 -0.013,-0.345 0.037,-0.397 -0.04,0.03 -0.124,0.058 -0.276,-0.041 -0.236,-0.15 -0.93,-0.565 -0.579,-0.888 0.352,-0.323 0.254,-0.347 0.194,-0.347 -0.054,0 -0.339,0.207 0,-0.199 0.341,-0.402 0.551,-0.47 0.609,-0.579 0.061,-0.112 -0.072,0.182 0.065,0.25 0.142,0.072 0.252,-0.484 0.149,-0.566 -0.046,-0.038 -0.071,-0.243 -0.049,-0.47 -0.013,0.006 -0.049,0.021 -0.058,0.025 -0.275,0.115 0.07,0.238 0,0.474 C -2.038,1.019 -3.175,1.419 -3.255,1.481 -3.336,1.542 -3.38,1.523 -3.306,1.612 -3.233,1.703 -3.713,2.113 -3.773,1.94 -3.83,1.764 -3.979,1.792 -3.979,1.792 -4.323,1.894 -5.947,3.078 -6.215,3.099 -6.48,3.118 -6.989,3.08 -6.933,3.316 c 0.058,0.233 0.556,-0.149 0.423,0.157 -0.134,0.305 -1.093,0.559 -1.524,0.639 -0.435,0.08 -0.562,0.253 -0.562,0.253 -0.458,0.671 -1.132,1.266 -1.132,1.266 l 0.039,0.012 C -10.35,5.51 -9.589,5.289 -9.724,5 -9.862,4.712 -10.175,5.152 -10.175,5.152 -11.658,4.601 -10.46,4.847 -8.559,3.66 c 1.901,-1.188 1.544,-0.2 3.288,-1.857 1.746,-1.657 0.127,-0.315 -0.878,-0.051 -1.008,0.262 -1.242,0.86 -2.15,1.013 -0.908,0.154 -3.161,0.806 -1.977,0.121 1.184,-0.684 1.688,-1.103 2.9,-1.42 C -6.728,1.294 -5.379,0.631 -4.329,0 H 0 z"\n           id="path3153"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,311.94,1052.7)"\n         id="g3155">\n        <path\n           d="M 0,0 C -0.026,0.046 -0.072,0.1 -0.121,0.149 -0.027,0.015 0.034,-0.059 0,0"\n           id="path3157"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,272.14,1096.7)"\n         id="g3159">\n        <path\n           d="m 0,0 c -0.66,1.206 -1.152,2.254 -1.195,2.226 -0.072,-0.054 -0.683,0.618 -0.414,0.698 0.259,0.08 0.732,0.178 0.351,0.527 -0.379,0.351 -0.985,1.095 -0.614,0.999 0.379,-0.099 0.401,-0.05 0.106,0.261 -0.295,0.311 -0.778,1.687 -0.393,1.501 0.383,-0.182 0.358,0.255 0.187,0.6 -0.174,0.347 -0.869,0.214 0.557,0.551 1.336,0.313 0.938,-0.346 0.882,-0.432 C -0.508,6.958 -0.405,7.009 0,6.998 V 0 z"\n           id="path3161"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n    </g>\n  </g>\n  <text\n     font-size="39.999px"\n     transform="scale(1.00001,0.99999)"\n     line-height="125%"\n     style="font-size:39.99860001px;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;font-family:sans-serif"\n     xml:space="preserve"\n     y="-71.984406"\n     x="117.04559"\n     id="text3163"\n     sodipodi:linespacing="125%"><tspan\n       y="-71.984406"\n       x="117.04559"\n       id="tspan3165" /></text>\n  <g\n     transform="matrix(1.2402,0,0,1,48.17,17.315002)"\n     id="g3167"\n     style="font-family:sans-serif">\n    <text\n       font-size="13.791px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:13.46952534px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="-0.54994416"\n       x="2.8649783"\n       xml:space="preserve"\n       id="text3169"\n       sodipodi:linespacing="125%"><tspan\n         y="-0.54994416"\n         x="2.8649783"\n         id="tspan3171"\n         style="font-size:13.46952534px">{{ legendInfo.title }}</tspan></text>\n    <text\n       font-size="11.225px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:10.77562046px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="12.774043"\n       x="3.1857841"\n       xml:space="preserve"\n       id="text3173"\n       sodipodi:linespacing="125%"><tspan\n         y="12.774043"\n         x="3.1857841"\n         id="tspan3175"\n         style="font-size:10.77562046px">{{ legendInfo.author }}</tspan></text>\n    <text\n       font-size="8.9796px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:8.97959995px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="26.193958"\n       x="3.4663973"\n       xml:space="preserve"\n       id="text3177"\n       sodipodi:linespacing="125%"><tspan\n         y="26.193958"\n         x="3.4663973"\n         id="tspan3179">{{ legendInfo.date }}</tspan></text>\n  </g>\n  <g\n     transform="translate(104,6.0000016)"\n     id="g3181">\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="287.22"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="287.22"\n       id="line3183" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="258.76712"\n       font-weight="bold"\n       id="text3185">0</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="322.38"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="322.38"\n       id="line3187" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="290.33426"\n       font-weight="bold"\n       id="text3189">1</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="357.54001"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="357.54001"\n       id="line3191" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="321.90137"\n       font-weight="bold"\n       id="text3193">2</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="392.67999"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="392.67999"\n       id="line3195" />\n    <text\n       style="font-size:13px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="353.46854"\n       font-weight="bold"\n       id="text3197">3</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="427.84"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="427.84"\n       id="line3199" />\n    <text\n       style="font-size:12px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="406.65717"\n       font-weight="bold"\n       id="text3201">4cm</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11399996;stroke-miterlimit:10"\n       y2="25.287001"\n       font-size="12"\n       x2="286.66"\n       stroke-miterlimit="10"\n       y1="25.287001"\n       x1="428.39999"\n       id="line3203" />\n    <text\n       style="font-size:12.00025729px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136,0.89795)"\n       font-size="7.7955px"\n       y="17.034184"\n       x="403.25516"\n       font-weight="bold"\n       id="text3205">{{ legendInfo.km }}km</text>\n    <g\n       style="font-size:12px;stroke:#000000;stroke-miterlimit:10"\n       mix-blend-mode="normal"\n       font-size="12"\n       transform="matrix(1.2402,0,0,1,287.22,25.397)"\n       stroke-miterlimit="10"\n       id="g3207">\n      <line\n         x2="14.173"\n         x1="14.173"\n         y2="11.339"\n         id="line3209"\n         y1="0" />\n      <line\n         x2="42.52"\n         x1="42.52"\n         y2="11.339"\n         id="line3211"\n         y1="0" />\n      <line\n         x2="70.865997"\n         x1="70.865997"\n         y2="11.339"\n         id="line3213"\n         y1="0" />\n      <line\n         x2="99.212997"\n         x1="99.212997"\n         y2="11.339"\n         id="line3215"\n         y1="0" />\n    </g>\n    <text\n       style="font-size:12px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="17.033819"\n       x="331.14337"\n       font-weight="bold"\n       id="text3217">{{ legendInfo.scale }}</text>\n  </g>\n  <g\n     transform="matrix(0.086033,0,0,0.086031,326.26,4.7060016)"\n     id="g3219"\n     style="stroke:#000000;stroke-width:1">\n    <g\n       transform="matrix(0.4431,0,0,0.4431,253.34,54.222)"\n       id="g3221"\n       style="stroke:#000000;stroke-width:1">\n      <path\n         d="m 373.75,91.496 c -0.95,-1.132 -74.87,153.23 -164.19,343.02 -160.8,341.68 -162.27,345.16 -156.49,350.27 3.203,2.83 6.954,4.79 8.319,4.34 1.365,-0.46 71.171,-73.88 155.14,-163.1 83.97,-89.22 153.66,-162.83 154.87,-163.56 1.2,-0.72 71.42,72.34 156.04,162.29 84.62,89.95 155.21,163.82 156.95,164.19 1.74,0.37 5.57,-1.19 8.5,-3.44 5.04,-3.86 -3.75,-23.46 -156.04,-348 -88.77,-189.18 -162.15,-344.88 -163.1,-346.01 z m -2.72,42.694 c 1.4,-1.53 2.45,63.91 2.45,148.36 V 433.62 L 231.18,584.96 C 106.57,717.42 87.38,737.82 86.08,738.47 c 0.143,-0.35 1.009,-1.57 1.361,-2.26 0.81,-1.59 64.409,-137.07 141.3,-301.05 76.89,-163.99 140.93,-299.45 142.29,-300.97 z m -99.77,642 V 1021 h 32.11 V 816.18 L 411.92,1021 h 44.6 V 776.19 h -32.11 v 204.8 L 315.85,776.19 h -44.59 z"\n         id="path3223"\n         inkscape:connector-curvature="0"\n         style="stroke:#000000;stroke-width:1" />\n    </g>\n  </g>\n  <flowRoot\n     xml:space="preserve"\n     id="flowRoot3029"\n     style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"><flowRegion\n       id="flowRegion3031"><rect\n         id="rect3033"\n         width="707.59393"\n         height="202.33392"\n         x="-16.669556"\n         y="-43.418858" /></flowRegion><flowPara\n       id="flowPara3035" /></flowRoot></svg>\n',
module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-2e088f04",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-2e088f04",module.exports))}()},{vue:6,"vue-hot-reload-api":5}],21:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#loading-status-overlay {\n    position: absolute;\n    top: 0%;\n    left: 0%;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0);\n    opacity: 1;\n    z-index:2147483647;\n}\n#loading-status {\n    position: absolute;\n    top: 50%;\n    left:50%;\n    width:600px;\n    border-style:solid;\n    padding:10px 10px 10px 10px;\n    -webkit-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);\n    background-color: rgba(0,0,0,0.3);\n    opacity: 1;\n}\n#loading-status .application{\n    font-size: 1.1em\n}\n#loading-status .component{\n    font-size: 1em;\n    font-style: italic;\n}\n#loading-status .component .name{\n    padding-left:20px\n}\n#loading-status .error {\n    color: #ec5840;\n    font-weight: bold;\n}\n#loading-status .close {\n    color: black;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={data:function(){return{app:null,components:[],appRevision:1,componentRevision:1,errors:[]}},computed:{hasError:function(){return this.errors.length>0},show:function(){return this.appRevision&&(!this.app||this.app.completedPercentage<100||this.errors.length>0)||this.components.find(function(component){return component.completedPercentage<100})},closable:function(){return this.appRevision&&this.app&&(this.app.completedPercentage>=100||this.app.completedPercentage<0)},appStatus:function(){return this.appRevision&&(this.app||{})}},props:["application"],methods:{close:function(){(0,_vendor.$)("#loading-status-overlay").remove(),(0,_vendor.$)("#loading-status").remove()},componentStatus:function(status){return this.componentRevision&&status},register:function(componentId,componentName,action){componentName=componentName||componentId;var vm=this;return vm.Status||(vm.Status=function(componentId,componentName,action){if("app"===componentId)vm.app=this,vm.appRevision+=1;else{for(var index=-1,i=0;i<vm.components.length;i++)if(componentId===vm.components[i].id){index=i;break}index>0?vm.componets[index]=this:vm.components.push(this),vm.componentRevision+=1}return this.id=componentId,this.name=componentName,this.completedPercentage=0,this.action=action||"Initialize",this.waiting=!1,this},vm.Status.prototype._change=function(action){if(vm.app===this)vm.appRevision+=1;else{vm.componentRevision+=1;for(var i=0;i<vm.components.length;i++)if(this.id===vm.components[i].id){_vendor.Vue.set(vm.components,i,vm.components[i]);break}}},vm.Status.prototype.progress=function(completedPercentage,action){this.completedPercentage=completedPercentage,this.action=action||"Initialize",this.waiting=!1,this._change()},vm.Status.prototype.wait=function(completedPercentage,action){this.completedPercentage=completedPercentage,this.action=action||"Initialize",this.waiting=!0,this._change()},vm.Status.prototype.end=function(action){action=action||(this===vm.app?"OK":"Initialized"),this.completedPercentage=100,this.action=action,this.waiting=!1,this._change()},vm.Status.prototype.failed=function(reason){this.completedPercentage=-1,this.reason=reason||"Failed",this.waiting=!1,this._change()}),new vm.Status(componentId,componentName,action)}},ready:function(){var vm=this;vm.register("app",this.application,"Initialize");var loadingStatus=vm.register("LoadingStatus","Loading Status Component");loadingStatus.progress(10,"Override console.error"),console.error=function(){var originFunc=console.error;return function(args){1==arguments.length?"string"==typeof arguments[0]?vm.errors.push({id:vm.errors.length+1,message:arguments[0]}):vm.errors.push({id:vm.errors.length+1,message:JSON.stringify(arguments[0])}):vm.errors.push({id:vm.errors.length+1,message:JSON.stringify(arguments)}),originFunc.apply(this,arguments)}}(),loadingStatus.progress(40,"Override console.assert"),console.assert=function(){var originFunc=console.assert;return function(args){arguments[0]||(2==arguments.length?"string"==typeof arguments[1]?vm.errors.push(arguments[1]):vm.errors.push(JSON.stringify(arguments[1])):vm.errors.push(JSON.stringify(arguments.slice(1)))),originFunc.apply(this,arguments)}}(),loadingStatus.progress(70,"Override vue error handler"),_vendor.Vue.config.errorHandler=function(){var originFunc=_vendor.Vue.config.errorHandler;return function(err,vm){return vm.errors.push(err),originFunc(err,vm)}}(),loadingStatus.end()}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div id="loading-status-overlay" v-if="show">\n<div id="loading-status" v-if="show">\n  <div class="row">\n    <div class="small-11">\n        <h4>Status</h4>\n    </div>\n    <div class="small-1">\n        <a @click="close" class="close" v-show="closable"><i class="fa fa-close" aria-hidden="true"></i></a>\n    </div>\n  </div>\n  <div class="row application">\n      <div class="small-7">\n          <a class="name">{{application}} </a>\n      </div>\n      <div class="small-5">\n          <a v-if="appStatus.completedPercentage >= 0 &amp;&amp; appStatus.completedPercentage < 100 &amp;&amp; !appStatus.waiting" class="float-right"><i class="fa fa-spinner" aria-hidden="true"></i></a>\n          <a v-if="appStatus.completedPercentage >= 0 &amp;&amp; appStatus.completedPercentage < 100 &amp;&amp; appStatus.waiting" class="float-right"><i class="fa fa-pause" aria-hidden="true"></i></a>\n          <a class="action">{{appStatus.action}}</a>\n          <a class="error" v-if="appStatus.completedPercentage < 0">({{appStatus.reason}})</a>\n      </div>\n  </div>\n  <div v-for="status in components" class="row component" track-by="id">\n    <div class="small-7">\n        <a class="name">{{status.name}} </a>\n    </div>\n    <div class="small-5">\n        <a v-if="componentStatus(status).completedPercentage >= 0 &amp;&amp; componentStatus(status).completedPercentage < 100 &amp;&amp; !componentStatus(status).waiting" class="float-right"><i class="fa fa-spinner" aria-hidden="true"></i></a>\n        <a v-if="componentStatus(status).completedPercentage >= 0 &amp;&amp; componentStatus(status).completedPercentage < 100 &amp;&amp; componentStatus(status).waiting" class="float-right"><i class="fa fa-pause" aria-hidden="true"></i></a>\n        <a class="action">{{componentStatus(status).action}}</a>\n        <a class="error" v-if="componentStatus(status).completedPercentage < 0">({{componentStatus(status).reason}})</a>\n    </div>\n  </div>\n  <div v-if="hasError">\n      <hr class="row" style="border-width:4px;">\n      <div v-for="error in errors" class="row" track_by="id">\n        <div class="small-12">\n            <a class="error">{{error.id}} : {{error.message}} </a>\n        </div>\n      </div>\n  </div>\n</div>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#loading-status-overlay {\n    position: absolute;\n    top: 0%;\n    left: 0%;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0);\n    opacity: 1;\n    z-index:2147483647;\n}\n#loading-status {\n    position: absolute;\n    top: 50%;\n    left:50%;\n    width:600px;\n    border-style:solid;\n    padding:10px 10px 10px 10px;\n    -webkit-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);\n    background-color: rgba(0,0,0,0.3);\n    opacity: 1;\n}\n#loading-status .application{\n    font-size: 1.1em\n}\n#loading-status .component{\n    font-size: 1em;\n    font-style: italic;\n}\n#loading-status .component .name{\n    padding-left:20px\n}\n#loading-status .error {\n    color: #ec5840;\n    font-weight: bold;\n}\n#loading-status .close {\n    color: black;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-621e6840",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-621e6840",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],22:[function(require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.ol-custom-overviewmap,\n.ol-custom-overviewmap.ol-uncollapsible {\n    bottom: 0;\n    left: auto;\n    right: 0;\n    top: auto;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed)  {\n   border: 1px solid black;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-map {\n    border: none;\n    width: 300px;\n    height:150px;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-box {\n    border: 2px solid red;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed) button{\n    bottom: auto;\n    left: auto;\n    right: 1px;\n    top: 1px;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_info=require("./info.vue"),_info2=_interopRequireDefault(_info),_scales=require("./scales.vue"),_scales2=_interopRequireDefault(_scales),_search=require("./search.vue"),_search2=_interopRequireDefault(_search),_measure=require("./measure.vue"),_measure2=_interopRequireDefault(_measure);exports.default={store:{defaultWMTSSrc:"defaultWMTSSrc",defaultWFSSrc:"defaultWFSSrc",gokartService:"gokartService",fixedScales:"fixedScales",resolutions:"resolutions",matrixSets:"matrixSets",dpmm:"dpmm",view:"view",displayGraticule:"settings.graticule",displayResolution:"displayResolution"},components:{gkInfo:_info2.default,gkScales:_scales2.default,gkSearch:_search2.default,gkMeasure:_measure2.default},data:function(){return{scale:0,mapControls:{},graticule:new _vendor.ol.LabelGraticule,dragPanInter:new _vendor.ol.interaction.DragPan({condition:function(mapBrowserEvent){return(!mapBrowserEvent.pointerEvent||1!==mapBrowserEvent.pointerEvent.button)&&_vendor.ol.events.condition.noModifierKeys(mapBrowserEvent)}}),doubleClickZoomInter:new _vendor.ol.interaction.DoubleClickZoom,keyboardPanInter:new _vendor.ol.interaction.KeyboardPan,keyboardZoomInter:new _vendor.ol.interaction.KeyboardZoom,middleDragPanInter:new _vendor.ol.interaction.DragPan({condition:function(mapBrowserEvent){return!(!mapBrowserEvent.pointerEvent||1!==mapBrowserEvent.pointerEvent.button)&&(mapBrowserEvent.preventDefault(),!0)}})}},computed:{loading:function(){return this.$root.loading},annotations:function(){return this.$root.annotations},active:function(){return this.$root.active},measure:function(){return this.$root.measure},width:{cache:!1,get:function(){return(0,_vendor.$)("#map").width()}},height:{cache:!1,get:function(){return(0,_vendor.$)("#map").height()}},extent:function(){return this.olmap.getView().calculateExtent(this.olmap.getSize())},resolution:function(){return this.olmap.getView().getResolution()}},watch:{displayGraticule:function(newValue,oldValue){this.showGraticule(newValue)}},methods:{clearFeatureProperties:function(feature){_vendor.$.each(feature.getKeys(),function(index,key){key!==feature.getGeometryName()&&feature.unset(key)})},cloneFeature:function(feat,cloneGeometry){if(cloneGeometry===!1){var feature=new _vendor.ol.Feature;return _vendor.$.each(feat.getProperties(),function(key,value){key!==feat.getGeometryName()&&feature.set(key,value,!0)}),feature}return feat.clone()},isGeometryEqual:function(geom1,geom2){if(!geom1&&!geom2)return!0;if((geom1&&1||0)+(geom2&&1||0)===1)return!1;if(geom1 instanceof _vendor.ol.geom.Point&&geom2 instanceof _vendor.ol.geom.Point)return geom1.getCoordinates()[0]===geom2.getCoordinates()[0]&&geom1.getCoordinates()[1]===geom2.getCoordinates()[1];if(geom1 instanceof _vendor.ol.geom.LineString&&geom2 instanceof _vendor.ol.geom.LineString){var coords1=geom1.getCoordinates(),coords2=geom2.getCoordinates();if(coords1.length!==coords2.length)return!1;var i2=coords2.findIndex(function(c){return c[0]===coords1[0][0]&&c[1]===coords1[0][1]});if(i2<0)return!1;for(i1=1,i2+=1;i1<coords1.length;i1++,i2=(i2+1)%coords2.length)if(coords1[i1][0]!==coords2[i2][0]||coords1[i1][1]!==coords2[i2][1])return!1;return!0}if(geom1 instanceof _vendor.ol.geom.LinearRing&&geom2 instanceof _vendor.ol.geom.LinearRing){var coords1=geom1.getCoordinates(),coords2=geom2.getCoordinates();if(coords1.length!==coords2.length)return!1;var i2=coords2.findIndex(function(c){return c[0]===coords1[0][0]&&c[1]===coords1[0][1]});if(i2<0)return!1;for(i1=1,i2+=1;i1<coords1.length-1;i1++,i2=(i2+1)%(coords2.length-1))if(coords1[i1][0]!==coords2[i2][0]||coords1[i1][1]!==coords2[i2][1])return!1;return!0}if(geom1 instanceof _vendor.ol.geom.Polygon&&geom2 instanceof _vendor.ol.geom.Polygon){var vm=this,rings1=geom1.getLinearRings(),rings2=geom2.getLinearRings();if(rings1.length!=rings2.length)return!1;var foundIndexes=[];for(i=0;i<rings1.length;i++)if(!rings2.find(function(r2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(r2,rings1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.MultiLineString&&geom2 instanceof _vendor.ol.geom.MultiLineString){var vm=this,lines1=geom1.getLineStrings(),lines2=geom2.getLineStrings();if(lines1.length!=lines2.length)return!1;var foundIndexes=[];for(i=0;i<lines1.length;i++)if(!lines2.find(function(l2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(l2,lines1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.MultiPolygon&&geom2 instanceof _vendor.ol.geom.MultiPolygon){var vm=this,polygons1=geom1.getPolygons(),polygons2=geom2.getPolygons();if(polygons1.length!=polygons2.length)return!1;var foundIndexes=[];for(i=0;i<polygons1.length;i++)if(!polygons2.find(function(p2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(p2,polygons1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.GeometryCollection&&geom2 instanceof _vendor.ol.geom.GeometryCollection){var vm=this,geometries1=geom1.getGeometriesArray(),geometries2=geom2.getGeometriesArray();if(geometries1.length!=geometries2.length)return!1;var foundIndexes=[];for(i=0;i<geometries1.length;i++)if(!geometries2.find(function(p2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(p2,geometries1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}return!1},showGraticule:function(show){this.graticule.setMap(show?this.olmap:null)},getControl:function(controlName){var control=this.mapControls[controlName];return control?control.controls:void 0},isControlEnabled:function(controlName){var control=this.mapControls[controlName];return control?control.enabled:void 0},enableControl:function(controlName,enable){var vm=this,control=this.mapControls[controlName];control&&control.enabled!==enable&&(control.controls&&(control.preenable&&control.preenable.call(control,enable),Array.isArray(control.controls)?_vendor.$.each(control.controls,function(index,c){enable?vm.olmap.addControl(c):vm.olmap.removeControl(c)}):enable?vm.olmap.addControl(control.controls):vm.olmap.removeControl(control.controls),control.postenable&&control.postenable.call(control,enable)),control.enabled=enable)},tintSVG:function(svgstring,tints){return tints.forEach(function(colour){svgstring=svgstring.split(colour[0]).join(colour[1])}),svgstring},getBlob:function(feature,keys,tintSettings,callback){var vm=this,tool=feature.get("toolName")?vm.annotations.getTool(feature.get("toolName")):{},key=keys.map(function(k){return vm.annotations.getStyleProperty(feature,k,"default",tool)}).join(";");if(this.svgBlobs[key])return this.svgBlobs[key];if(this.jobs[key])vm.jobs[key].then(function(){feature.changed(),callback&&callback()});else{var dimsKey=keys.length>=3?keys[2]:"dims",tintKey=keys.length>=2?keys[1]:"tint",dims=tool[dimsKey]||[48,48],tint=vm.annotations.getStyleProperty(feature,tintKey,"default",tool);Array.isArray(tint)||(tint=tintSettings&&tintSettings[tint]?tintSettings[tint]:[]);var url=vm.annotations.getStyleProperty(feature,keys[0],null,tool);"string"==typeof tint&&(url=tint,tint=[]),vm.jobs[key]=new Promise(function(resolve,reject){vm.addSVG(key,url,tint,dims,resolve)}).then(function(){feature.changed(),delete vm.jobs[key],callback&&callback()})}},addSVG:function(key,url,tint,dims,pResolve){var vm=this;tint=tint||[];var draw=function(){"undefined"!=typeof vm.svgBlobs[key]&&pResolve();new Promise(function(resolve,reject){vm.drawSVG(key,vm.svgTemplates[url],tint,dims,resolve,reject)}).then(function(){pResolve()})};vm.svgTemplates[url]?draw():vm.jobs[url]?vm.jobs[url].then(function(){draw()}):vm.jobs[url]=new Promise(function(resolve,reject){var req=new window.XMLHttpRequest;req.withCredentials=!0,req.onload=function(){this.responseText&&(vm.svgTemplates[url]=this.responseText,resolve())},req.onerror=function(){reject()},req.open("GET",url),req.send()}).then(function(){draw(),delete vm.jobs[url]})},drawSVG:function(key,svgstring,tints,dims,resolve,reject){var vm=this,canvas=(0,_vendor.$)("<canvas>");canvas.attr({width:dims[0],height:dims[1]}),canvas.drawImage({source:"data:image/svg+xml;utf8,"+encodeURIComponent(vm.tintSVG(svgstring,tints)),fromCenter:!1,x:0,y:0,width:dims[0],height:dims[1],load:function(){canvas.get(0).toBlob(function(blob){vm.svgBlobs[key]=window.URL.createObjectURL(blob),resolve()},"image/png")}})},cacheStyle:function(styleFunc,feature,keys,sufix){var vm=this;if(feature){var key=keys.map(function(k){return vm.annotations.getStyleProperty(feature,k,"default")}).join(";");key=sufix?key+";"+sufix:key;var style=this.cachedStyles[key];if(style)return style;if(style=styleFunc(feature))return style=Array.isArray(style)?style:[style],this.cachedStyles[key]=style,style}return(new _vendor.ol.layer.Vector).getStyleFunction()()},animate:function(args){this.olmap.getView().animate.apply(this.olmap.getView(),arguments)},setScale:function(scale){for(;Math.abs(this.getScale()-scale)>.001;)this.olmap.getView().setResolution(this.olmap.getView().getResolution()*scale/this.getScale());this.scale=scale},getScale:function(){var size=this.olmap.getSize(),center=this.getCenter(),extent=this.olmap.getView().calculateExtent(size),distance=2*this.$root.wgs84Sphere.haversineDistance([extent[0],center[1]],center);return distance*this.dpmm/size[0]},getFixedScale:function(scale){scale=scale||this.getScale();var closest=null;return _vendor.$.each(this.fixedScales,function(){(null===closest||Math.abs(this-scale)<Math.abs(closest-scale))&&(closest=this)}),closest},getScaleString:function(scale){return Math.round(100*scale)/100<10?"1:"+Math.round(1e3*scale).toLocaleString():Math.round(100*scale)/100>=1e3?"1:"+Math.round(scale/1e3).toLocaleString()+" M":"1:"+Math.round(scale).toLocaleString()+" K"},getDeg:function(coords){return coords[0].toFixed(5)+", "+coords[1].toFixed(5)},getDMS:function(coords){return _vendor.ol.coordinate.degreesToStringHDMS_(coords[0],"EW",1)+", "+_vendor.ol.coordinate.degreesToStringHDMS_(coords[1],"NS",1)},getMGA:function(coords){var mga=this.getMGARaw(coords);return mga?"MGA "+mga.mgaZone+" "+Math.round(mga.mgaEast)+"E "+Math.round(mga.mgaNorth)+"N":""},getMGARaw:function(coords){var results={};if(coords[0]>=108&&coords[0]<114)results.mgaZone=49;else if(coords[0]>=114&&coords[0]<120)results.mgaZone=50;else if(coords[0]>=120&&coords[0]<126)results.mgaZone=51;else if(coords[0]>=126&&coords[0]<132)results.mgaZone=52;else if(coords[0]>=132&&coords[0]<138)results.mgaZone=53;else if(coords[0]>=138&&coords[0]<144)results.mgaZone=54;else if(coords[0]>=144&&coords[0]<150)results.mgaZone=55;else{if(!(coords[0]>=150&&coords[0]<156))return null;results.mgaZone=56}var newCoords=(0,_vendor.proj4)("EPSG:4326","EPSG:283"+results.mgaZone).forward(coords);return results.mgaEast=newCoords[0],results.mgaNorth=newCoords[1],results},parseDMSString:function(dmsStr){var dmsRegex=/^\s*(-)?(\d+(?:\.\d+)?)[:d\s]?\s*(?:(\d+(?:\.\d+)?)[':m]\s*(?:(\d{1,2}(?:\.\d+)?)(?:"|||''|s)?)?)?\s*([NSEW])?[,:\s]+(-)?(\d+(?:\.\d+)?)[:d\s]?\s?(?:(\d+(?:\.\d+)?)[':m]\s*(?:(\d{1,2}(?:\.\d+)?)(?:"|||''|s)?)?)?\s*([NSEW])?$/gim,groups=dmsRegex.exec(dmsStr);if(!groups)return null;var dmsToDecimal=function(sign,deg,min,sec,dir){var sg=sign?-1:1;sg*="wWsS".indexOf(dir)>=0?-1:1;var d=Number(deg),m=min?Number(min):0,s=sec?Number(sec):0;return d>=0&&d<=180&&m>=0&&m<=60&&s>=0&&s<=60?sg*(d+m/60+s/3600):null},coords=[dmsToDecimal(groups[1],groups[2],groups[3],groups[4],groups[5]),dmsToDecimal(groups[6],groups[7],groups[8],groups[9],groups[10])];if(!coords[0]||!coords[1])return null;if(groups[5]||groups[10])if(groups[5]&&groups[10]){if("nNsS".indexOf(groups[5])>=0&&"nNsS".indexOf(groups[10])>=0)return null;if("wWeE".indexOf(groups[5])>=0&&"wWeE".indexOf(groups[10])>=0)return null;"nNsS".indexOf(groups[5])>=0&&"wWeE".indexOf(groups[10])>=0&&(coords=coords.reverse())}else groups[5]&&"nNsS".indexOf(groups[5])>=0?coords=coords.reverse():groups[10]&&"wWeE".indexOf(groups[10])>=0&&(coords=coords.reverse());else coords=coords.reverse();return coords},parseMGAString:function(mgaStr){var mgaRegex=/(?:MGA|mga)\s*(49|50|51|52|53|54|55|56)\s*(\d{3,7})\s*[mM]{0,1}\s*([nNeE]{0,1})\s*,*\s*(\d{4,7})\s*[mM]{0,1}\s*([nNeE]{0,1})/gi,groups=mgaRegex.exec(mgaStr);if(!groups)return null;var results={mgaZone:parseInt(groups[1]),mgaEast:groups[2],mgaNorth:groups[4]};if("E"===groups[5]&&"N"===groups[3]&&(results.mgaEast=groups[4],results.mgaNorth=groups[2]),3===results.mgaEast.length&&4===results.mgaNorth.length)results.mgaEast=results.mgaEast+"000",results.mgaNorth=results.mgaNorth+"000";else if(6!==results.mgaEast.length||7!==results.mgaNorth.length)return null;results.mgaEast=parseInt(results.mgaEast),results.mgaNorth=parseInt(results.mgaNorth);var coords=(0,_vendor.proj4)("EPSG:283"+groups[1],"EPSG:4326").forward([results.mgaEast,results.mgaNorth]);return results.coords=coords,results},parseGridString:function(fdStr){var fdRegex=/(FD|fd|PIL|pil)\s*([a-zA-Z]{1,2})\s*([0-9]{1,5})/gi,groups=fdRegex.exec(fdStr);if(!groups)return null;var results={gridType:groups[1].toUpperCase(),gridNorth:groups[2].toUpperCase(),gridEast:groups[3]};return results},getCenter:function(){return this.olmap.getView().getCenter()},tileLoaderHook:function(tileSource,tileLayer){var numLoadingTiles=0,badTiles=0,tileLoader=tileSource.getTileLoadFunction();return function(tile,src){0===numLoadingTiles&&(tileLayer.progress="loading",badTiles=0),numLoadingTiles++;var image=tile.getImage();image.crossOrigin="use-credentials",image.onload=function(){numLoadingTiles--,0===numLoadingTiles&&(badTiles>0?tileLayer.progress="error":tileLayer.progress="idle")},image.onerror=function(){badTiles++,image.onload()},tileLoader(tile,src)}},setUrlTimestamp:function(tileSource,time){tileSource.setUrlTimestamp||(tileSource.setUrlTimestamp=function(){var originFunc=tileSource.getTileUrlFunction();return function(time){tileSource.setTileUrlFunction(function(tileCoord,pixelRatio,projection){return originFunc(tileCoord,pixelRatio,projection)+"&time="+time},tileSource.getUrls()[0]+"?time="+time)}}()),tileSource.setUrlTimestamp(time)},refreshLayerTile:function(tileLayer){var vm=this;tileLayer.getSource().load||(tileLayer.getSource().load=function(){tileLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.setUrlTimestamp(tileLayer.getSource(),_vendor.moment.utc().unix()),tileLayer.getSource().tileCache.clear(),vm.$root.active.refreshRevision+=1}),tileLayer.getSource().load()},createTimelineLayer:function(options){var vm=this;options.params=_vendor.$.extend({FORMAT:"image/jpeg",SRS:"EPSG:4326"},options.params||{});var tileSource=new _vendor.ol.source.TileWMS({params:options.params,tileGrid:new _vendor.ol.tilegrid.TileGrid({extent:[-180,-90,180,90],resolutions:this.resolutions,tileSize:[1024,1024]})}),tileLayer=new _vendor.ol.layer.Tile({opacity:options.opacity||1,source:tileSource});return tileLayer.progress="",tileSource.setTileLoadFunction(this.tileLoaderHook(tileSource,tileLayer)),tileLayer.on("propertychange",function(event){"timeIndex"===event.key&&tileSource.updateParams({layers:options.timeline[event.target.get(event.key)][1]})}),options.updateTimeline=options.updateTimeline||function(layer,tileLayer){_vendor.$.getJSON(layer.source,function(data){tileLayer.set("updated",(0,_vendor.moment)().toLocaleString()),tileLayer.getSource().setUrls(data.servers),layer.timeline=data.layers.reverse(),tileLayer.set("timeIndex",layer.timeIndex||layer.timeline.length-1),vm.$root.active.update()})},options.updateTimeline(options,tileLayer),options.refresh&&(tileLayer.refresh=setInterval(function(){options.updateTimeline(options,tileLayer)},1e3*options.refresh)),tileLayer.set("name",options.name),tileLayer.set("id",options.id),tileLayer},createWFSLayer:function(options){var vm=this,url=this.defaultWFSSrc;options.params=_vendor.$.extend({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:options.id},options.params||{});var vectorSource=new _vendor.ol.source.Vector,vector=new _vendor.ol.layer.Vector({opacity:options.opacity||1,source:vectorSource,style:options.style});return vector.progress="",vectorSource.retrieveFeatures=function(filter,onSuccess,onError){var params=_vendor.$.extend({},options.params);filter?params.cql_filter=filter:params.cql_filter&&delete params.cql_filter,_vendor.$.ajax({url:url+"?"+_vendor.$.param(params),success:function(response,stat,xhr){var features=vm.$root.geojson.readFeatures(response);onSuccess(features)},error:function(){onError&&onError(status,message)},dataType:"json",xhrFields:{withCredentials:!0}})},vectorSource.loadSource=function(loadType,onSuccess){options.cql_filter?options.params.cql_filter=options.cql_filter:options.params.cql_filter&&delete options.params.cql_filter,vm.$root.active.refreshRevision+=1,vector.progress="loading",_vendor.$.ajax({url:url+"?"+_vendor.$.param(options.params),success:function(response,stat,xhr){var features=vm.$root.geojson.readFeatures(response),defaultOnload=function(loadType,source,features){source.clear(!0),source.addFeatures(features)};if(options.onload?options.onload(loadType,vectorSource,features,defaultOnload):defaultOnload(loadType,vectorSource,features),vm.$root.active.refreshRevision+=1,vector.progress="idle",options.getUpdatedTime){var time=options.getUpdatedTime(features);time?vector.set("updated",time.toLocaleString()):vector.set("updated","")}else vector.set("updated",(0,_vendor.moment)().toLocaleString());vectorSource.dispatchEvent("loadsource"),onSuccess&&onSuccess()},error:function(){vm.$root.active.refreshRevision+=1,vector.progress="error"},dataType:"json",xhrFields:{withCredentials:!0}})},options.onadd&&vectorSource.on("addfeature",function(event){options.onadd(event.feature)}),vector.postRemove=function(){this.autoRefresh&&(clearInterval(this.autoRefresh),delete this.autoRefresh)},options.refresh&&!vector.autoRefresh&&(vector.autoRefresh=setInterval(function(){vectorSource.loadSource("auto")},1e3*options.refresh)),void 0!==options.initialLoad&&options.initialLoad!==!0||vectorSource.loadSource("initial"),vector.set("name",options.name),vector.set("id",options.id),vector.stopAutoRefresh=function(){this.autoRefresh&&(clearInterval(this.autoRefresh),delete this.autoRefresh)},vector.startAutoRefresh=function(){options.refresh&&(this.autoRefresh||(this.autoRefresh=setInterval(function(){vectorSource.loadSource("auto")},1e3*options.refresh)))},vector},createAnnotations:function(layer){return this.annotations.featureOverlay},createTileLayer:function(options){var vm=this;options.base&&(options.format="image/jpeg");var layer=_vendor.$.extend({opacity:1,name:"Mapbox Outdoors",id:"dpaw:mapbox_outdoors",format:"image/png",tileSize:1024,style:"",projection:"EPSG:4326",wmts_url:this.defaultWMTSSrc},options),matrixSet=this.matrixSets[layer.projection][layer.tileSize],tileGrid=new _vendor.ol.tilegrid.WMTS({origin:_vendor.ol.extent.getTopLeft([-180,-90,180,90]),resolutions:this.resolutions,matrixIds:matrixSet.matrixIds,tileSize:layer.tileSize});tileGrid.origGetZForResolution=tileGrid.getZForResolution,tileGrid.getZForResolution=function(resolution,optDirection){return tileGrid.origGetZForResolution(1.4*resolution,-1)};var tileSource=new _vendor.ol.source.WMTS({url:layer.wmts_url,layer:layer.id,matrixSet:matrixSet.name,format:layer.format,style:layer.style,projection:layer.projection,wrapX:!0,tileGrid:tileGrid}),tileLayer=new _vendor.ol.layer.Tile({opacity:layer.opacity||1,source:tileSource});return tileLayer.progress="",tileLayer.postRemove=function(){this.autoRefresh&&(clearInterval(this.autoRefresh),delete this.autoRefresh),this.autoTimelineRefresh&&(clearTimeout(this.autoTimelineRefresh),this.autoTimelineRefresh=null)},tileLayer.set("name",layer.name,!1),tileLayer.set("id",layer.id,!1),options.lastUpdatetime&&tileLayer.set("updated",layer.lastUpdatetime),tileLayer.stopAutoRefresh=function(){this.autoRefresh&&(clearInterval(this.autoRefresh),delete this.autoRefresh)},tileLayer.startAutoRefresh=function(){options.refresh&&(this.autoRefresh||(this.autoRefresh=setInterval(function(){vm.refreshLayerTile(tileLayer)},1e3*options.refresh)))},tileLayer.on("propertychange",function(event){"timeIndex"===event.key&&options.timeline&&(options.timeline[event.target.get(event.key)][2]||(options.timeline[event.target.get(event.key)][2]=new _vendor.ol.source.WMTS({url:layer.wmts_url,layer:options.timeline[event.target.get(event.key)][1],matrixSet:matrixSet.name,format:layer.format,style:layer.style,projection:layer.projection,wrapX:!0,tileGrid:tileGrid}),options.timeline[event.target.get(event.key)][2].setTileLoadFunction(vm.tileLoaderHook(options.timeline[event.target.get(event.key)][2],tileLayer)),vm.setUrlTimestamp(options.timeline[event.target.get(event.key)][2],_vendor.moment.utc().unix())),tileLayer.setSource(options.timeline[event.target.get(event.key)][2]),options.refresh&&options.autoRefreshStopped!==!0&&(tileLayer.stopAutoRefresh(),tileLayer.startAutoRefresh()))}),!options.refreshTimeline&&options.timelineRefresh&&options.fetchTimelineUrl&&(options.refreshTimeline=function(){var _func2=null;return options.getCurrentRefreshTime=function(){return options.lastTimelineRefreshTime?_vendor.moment.tz("Australia/Perth")-options.lastTimelineRefreshTime>1e3*options.timelineRefresh?_vendor.moment.tz("Australia/Perth"):options.lastTimelineRefreshTime:_vendor.moment.tz("Australia/Perth")},options.getNextRefreshTime=function(){var nextTime=(0,_vendor.moment)(options.getCurrentRefreshTime());return nextTime.seconds(nextTime.seconds()+options.timelineRefresh),nextTime},options.getTimeIndexForTime=function(d){return options.timeline?(d=d||_vendor.moment.tz("Australia/Perth"),_vendor.$.each(options.timeline,function(index,timelineLayer){var timediff=d-_vendor.moment.fromLocaleString(timelineLayer[0]);return timediff<0?(timeIndex=0==index?0:index-1,!1):0===timediff?(timeIndex=index,!1):void 0}),timeIndex=null==timeIndex?options.timeline.length-1:timeIndex,timeIndex):null},_func2=function(layer,tileLayer,auto,taskId){var currentRefreshTime=layer.getCurrentRefreshTime();if(layer.lastTimelineRefreshTime&&currentRefreshTime-layer.lastTimelineRefreshTime===0){if(tileLayer.get("timeIndex")||tileLayer.set("timeIndex",layer.getTimeIndexForTime()),layer.previewLayer)return;if(!auto)return;var waitTimes=layer.getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(layer,tileLayer,!0)},waitTimes)}else{var choosedTimelineLayerTime=((0,_vendor.moment)(currentRefreshTime),null);layer.lastTimelineRefreshTime&&tileLayer.get("timeIndex")&&(choosedTimelineLayerTime=_vendor.moment.fromLocaleString(layer.timeline[tileLayer.get("timeIndex")][0]));
var fetchTimelineFailed=function(status,statusText){if((layer.previewLayer||vm.getMapLayer(layer)===tileLayer)&&(tileLayer.get("timeIndex")||tileLayer.set("timeIndex",layer.getTimeIndexForTime()),!layer.previewLayer&&(tileLayer.progress="error",tileLayer.set("updated",layer.lastUpdatetime+"\r\n"+status+" : "+statusText),vm.active.refreshRevision+=1,auto))){var waitTimes=layer.getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(layer,tileLayer,!0)},waitTimes)}},timelineNotChanged=function(){if((layer.previewLayer||vm.getMapLayer(layer)===tileLayer)&&(tileLayer.get("timeIndex")||tileLayer.set("timeIndex",layer.getTimeIndexForTime()),!layer.previewLayer&&(tileLayer.progress="",tileLayer.set("updated",layer.lastUpdatetime),vm.active.refreshRevision+=1,auto))){var waitTimes=layer.getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(layer,tileLayer,!0)},waitTimes)}},processTimeline=function(timeline){if(layer.previewLayer||vm.getMapLayer(layer)===tileLayer){tileLayer.progress="",layer.timeline&&_vendor.$.each(timeline,function(index,timelineLayer){layer.timeline.length>index&&layer.timeline[index][2]&&layer.timeline[index][1]===timelineLayer[1]&&(timelineLayer[2]=layer.timeline[index][2],vm.setUrlTimestamp(timelineLayer[2],_vendor.moment.utc().unix()),timelineLayer[2].tileCache.clear())}),layer.timeline=timeline;var timeIndex=layer.getTimeIndexForTime(choosedTimelineLayerTime);if(tileLayer.set("timeIndex",timeIndex),tileLayer.set("updated",layer.lastUpdatetime),vm.active.refreshRevision+=1,!layer.previewLayer&&auto){var waitTimes=layer.getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(layer,tileLayer,!0)},waitTimes)}}};layer.lastTimelineRefreshTime=currentRefreshTime,tileLayer.progress="loading",_vendor.$.ajax(layer.fetchTimelineUrl(layer.lastUpdatetime||""),{xhrFields:{withCredentials:!0},dataType:"json",success:function(data,status,jqXHR){return 290===jqXHR.status?void timelineNotChanged():(layer.lastUpdatetime=data.updatetime,void processTimeline(data.layers))},error:function(jqXHR){fetchTimelineFailed(jqXHR.status,jqXHR.statusText)}})}}}()),options.refreshTimeline?(tileLayer.autoTimelineRefresh=null,options.refreshTimeline(options,tileLayer,!0)):tileSource.setTileLoadFunction(this.tileLoaderHook(tileSource,tileLayer)),options.refresh&&(tileLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1,tileLayer.autoRefresh=setInterval(function(){vm.refreshLayerTile(tileLayer)},1e3*options.refresh)),tileLayer},getMapLayer:function(id){if(this.olmap)return id&&id.id&&(id=id.id),this.olmap.getLayers().getArray().find(function(layer){return layer.get("id")===id})},init:function(options){var vm=this;options=options||{},_vendor.proj4.defs("EPSG:28349","+proj=utm +zone=49 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28350","+proj=utm +zone=50 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28351","+proj=utm +zone=51 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28352","+proj=utm +zone=52 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28353","+proj=utm +zone=53 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28354","+proj=utm +zone=54 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28355","+proj=utm +zone=55 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28356","+proj=utm +zone=56 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.ol.control.FullScreen.isFullScreenSupported()||((0,_vendor.$)("#map-search").addClass("noFullScreen"),(0,_vendor.$)("#map-search-button").addClass("noFullScreen")),this.olmap=new _vendor.ol.Map({logo:!1,renderer:"canvas",target:"map",view:new _vendor.ol.View({projection:"EPSG:4326",center:vm.view.center,zoom:6,maxZoom:21,minZoom:5}),controls:[],interactions:_vendor.ol.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1,dragPan:!1,doubleClickZoom:!1,keyboard:!1})}),this.setScale(this.view.scale/1e3),this.olmap.addInteraction(this.dragPanInter),this.olmap.addInteraction(this.doubleClickZoomInter),this.olmap.addInteraction(this.keyboardPanInter),this.olmap.addInteraction(this.keyboardZoomInter),this.olmap.addInteraction(this.middleDragPanInter),this.graticule.setMap(this.olmap),this.olmap.on("postrender",function(){vm.scale=vm.getScale()})},initLayers:function(fixedLayers,activeLayers){var vm=this;_vendor.$.each(fixedLayers,function(index,fixedLayer){var catLayer=vm.$root.catalogue.getLayer(fixedLayer.id);catLayer?_vendor.$.extend(catLayer,fixedLayer,{name:catLayer.name||fixedLayer.name,title:catLayer.title||fixedLayer.title,abstract:catLayer.abstract||fixedLayer.abstract}):vm.$root.catalogue.catalogue.push(fixedLayer)}),activeLayers=activeLayers.filter(function(activeLayer){return vm.$root.catalogue.getLayer(activeLayer[0])&&!0});var initialLayers=activeLayers.reverse().map(function(activeLayer){var layer=_vendor.$.extend(vm.$root.catalogue.getLayer(activeLayer[0]),activeLayer[1]);return vm["create"+layer.type](layer)});_vendor.$.each(initialLayers,function(index,layer){vm.olmap.addLayer(layer)});var overviewLayer=vm.$root.catalogue.getLayer("dpaw:mapbox_outdoors");vm.mapControls={zoom:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.Zoom({target:(0,_vendor.$)("#external-controls").get(0)})},overviewMap:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",layers:[],collapseLabel:"",label:"",collapsed:!1,view:new _vendor.ol.View({projection:"EPSG:4326"})}),preenable:function(enable){if(enable)this.controls.getOverviewMap().addLayer(vm["create"+overviewLayer.type](overviewLayer));else{this._interact&&(this._interact.unset(),this._interact=null);try{this.controls.getOverviewMap().removeLayer(this.controls.getOverviewMap().getLayers().get(0))}catch(ex){}}},postenable:function(enable){if(enable){var overviewMapControl=this.controls,extentbox=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overlay-container"),overviewMap=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overviewmap-map");extentbox.length&&(this._interact=(0,_vendor.interact)(extentbox.get(0),{}).draggable({intertia:!0,restrict:{restriction:overviewMap.get(0),endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:function(event){extentbox.get(0).style.left&&(extentbox.get(0).style.left=parseInt(extentbox.get(0).style.left)+event.dx+"px"),extentbox.get(0).style.right&&(extentbox.get(0).style.right=parseInt(extentbox.get(0).style.right)+event.dx+"px"),extentbox.get(0).style.bottom&&(extentbox.get(0).style.bottom=parseInt(extentbox.get(0).style.bottom)-event.dy+"px"),extentbox.get(0).style.top&&(extentbox.get(0).style.top=parseInt(extentbox.get(0).style.top)-event.dy+"px")},onend:function(event){var centralPosition=[extentbox.get(0).style.left?parseInt(extentbox.get(0).style.left)+extentbox.width()/2:parseInt(extentbox.get(0).style.right)-extentbox.width()/2,extentbox.get(0).style.bottom?overviewMap.height()-parseInt(extentbox.get(0).style.bottom)-extentbox.height()/2:overviewMap.height()-parseInt(extentbox.get(0).style.top)+extentbox.height()/2];overviewMapControl.getMap().getView().setCenter(overviewMapControl.getOverviewMap().getCoordinateFromPixel(centralPosition))}}))}}},scaleLine:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.ScaleLine},mousePosition:{enabled:!1,controls:new _vendor.ol.control.MousePosition({coordinateFormat:function(coordinate){return vm.getDeg(coordinate)+"<br/>"+vm.getDMS(coordinate)+"<br/>"+vm.getMGA(coordinate)}})},fullScreen:{enabled:!1,controls:new _vendor.ol.control.FullScreen({source:(0,_vendor.$)("body").get(0),target:(0,_vendor.$)("#external-controls").get(0),label:(0,_vendor.$)("<i/>",{class:"fa fa-expand"})[0]})},scale:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.Control({element:(0,_vendor.$)("#menu-scale").get(0),target:(0,_vendor.$)("#external-controls").get(0)})},search:{enabled:!1,controls:[new _vendor.ol.control.Control({element:(0,_vendor.$)("#map-search").get(0),target:(0,_vendor.$)("#external-controls").get(0)}),new _vendor.ol.control.Control({element:(0,_vendor.$)("#map-search-button").get(0),target:(0,_vendor.$)("#external-controls").get(0)})]},attribution:{enabled:!1,controls:new _vendor.ol.control.Attribution},measure:{enabled:!1,autoenable:!1,controls:vm.measure.mapControl}},_vendor.$.each(vm.mapControls,function(key,control){(void 0===control.autoenable||control.autoenable)&&vm.enableControl(key,!0)})},zoomToSelected:function(){var selectedFeatures=this.annotations.selectedFeatures;if(0!==selectedFeatures.getLength()){var extent=null;1===selectedFeatures.getLength()?(extent=selectedFeatures.item(0).getGeometry().getExtent(),extent=_vendor.ol.extent.isEmpty(extent)?null:extent):selectedFeatures.forEach(function(f){_vendor.ol.extent.isEmpty(f.getGeometry().getExtent())||(extent=extent||_vendor.ol.extent.createEmpty(),_vendor.ol.extent.extend(extent,f.getGeometry().getExtent()))}),extent&&this.olmap.getView().fit(extent,this.olmap.getSize())}}},ready:function(){var vm=this,mapStatus=this.loading.register("olmap","Open layer map Component","Initialize");this.svgBlobs={},this.svgTemplates={},this.cachedStyles={},this.jobs={},_vendor.$.each(this.matrixSets,function(projection,innerMatrixSets){_vendor.$.each(innerMatrixSets,function(tileSize,matrixSet){for(var matrixIds=new Array(matrixSet.maxLevel-matrixSet.minLevel+1),z=matrixSet.minLevel;z<=matrixSet.maxLevel;++z)matrixIds[z]=matrixSet.name+":"+z;matrixSet.matrixIds=matrixIds})}),mapStatus.wait(30,"Listen 'gk-init' event"),this.$on("gk-init",function(){return mapStatus.progress(80,"Process 'gk-init' event"),(0,_vendor.$)("#map .ol-viewport canvas").attr("width")&&(vm.displayResolution[0]=Math.round((0,_vendor.$)("#map .ol-viewport canvas").attr("width")/(0,_vendor.$)("#map .ol-viewport canvas").width()*100)/100),(0,_vendor.$)("#map .ol-viewport canvas").attr("height")&&(vm.displayResolution[1]=Math.round((0,_vendor.$)("#map .ol-viewport canvas").attr("height")/(0,_vendor.$)("#map .ol-viewport canvas").height()*100)/100),vm.showGraticule(vm.displayGraticule),mapStatus.end(),!0})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="map" id="map" tabindex="0">\n  <gk-info v-ref:info=""></gk-info>\n</div>\n<gk-scales v-ref:scales=""></gk-scales>\n<gk-search v-ref:search=""></gk-search>\n<gk-measure v-ref:measure=""></gk-measure>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.ol-custom-overviewmap,\n.ol-custom-overviewmap.ol-uncollapsible {\n    bottom: 0;\n    left: auto;\n    right: 0;\n    top: auto;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed)  {\n   border: 1px solid black;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-map {\n    border: none;\n    width: 300px;\n    height:150px;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-box {\n    border: 2px solid red;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed) button{\n    bottom: auto;\n    left: auto;\n    right: 1px;\n    top: 1px;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-9fdb9b40",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-9fdb9b40",module.exports))}()},{"./info.vue":14,"./measure.vue":23,"./scales.vue":24,"./search.vue":25,"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],23:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["settings"],data:function(){return{}},computed:{loading:function(){return this.$root.loading},map:function(){return this.$root.map},active:function(){return this.$root.active},annotations:function(){return this.$root.$refs.app.$refs.annotations},measureType:function(){return["MeasureLength","MeasureArea","MeasureBearing"].indexOf(this.annotations.tool.name)>=0?this.annotations.tool.name:""},showClear:function(){return""!=this.measureType&&this.features.getLength()},isMeasureLength:function(){return"MeasureLength"===this.measureType},isMeasureArea:function(){return"MeasureArea"===this.measureType},isMeasureBearing:function(){return"MeasureBearing"===this.measureType},mapControl:function(){return this._controller||(this._controller=new _vendor.ol.control.Control({element:(0,_vendor.$)("#map-measure").get(0),target:(0,_vendor.$)("#external-controls").get(0)})),this._controller},lengthUnit:function(){return this.settings.lengthUnit},areaUnit:function(){return this.settings.areaUnit},measureFeature:function(){return this.settings.measureFeature}},watch:{lengthUnit:function(newValue,oldValue){var vm=this;this.features.forEach(function(feature){vm.measuring(feature,!0,!1,!1,"changeUnit")}),_vendor.$.each(vm._measureLayers,function(index,layer){layer[1].forEach(function(feature){vm.measuring(feature,!0,!1,!1,"changeUnit")})})},areaUnit:function(newValue,oldValue){var vm=this;this.features.forEach(function(feature){vm.measuring(feature,!1,!0,!1,"changeUnit")}),_vendor.$.each(vm._measureLayers,function(index,layer){layer[1].forEach(function(feature){vm.measuring(feature,!1,!0,!1,"changeUnit")})})},measureFeature:function(newValue,oldValue){var vm=this;_vendor.$.each(this._measureLayers,function(index,layer){var mapLayer=vm.map.getMapLayer(layer[0]);mapLayer&&!vm.active.isHidden(mapLayer)&&vm.enableFeatureMeasurement(layer,newValue)})},measureType:function(newVal,oldVal){""===newVal?(this.overlay&&this.overlay.setMap(null),this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null),this.showTooltip(this.features,!1)):""===oldVal?(this.overlay.setMap(this.map.olmap),this.showTooltip(this.features,!0)):this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null)}},methods:{register:function(layer,features,filter){this._measureLayers=this._measureLayers||[],this._measureLayers.push([layer.id||layer,features||null,filter||null,!1,{}])},enableFeatureMeasurement:function(layer,enable){var vm=this,layer=Array.isArray(layer)?layer:this._measureLayers.find(function(l){return l[0]===(layer.id||layer)});if(layer)if(enable){if(!layer[3]){layer[4].features_remove=layer[4].features_remove||layer[1].on("remove",function(ev){var feature=ev.element;feature.tooltip&&vm.removeTooltip(feature)}),layer[4].features_add=layer[4].features_add||layer[1].on("add",function(ev){if(vm.map.getMapLayer(layer[0])){var feature=ev.element;if(!layer[2]||layer[2](feature)){var tool=vm.annotations.getTool(feature.get("toolName"));if(!tool)return;(tool.measureLength||tool.measureArea)&&vm.measureFeature&&(vm.createTooltip(feature,tool.measureLength,tool.measureArea),vm.measuring(feature,tool.measureLength,tool.measureArea,!1,"show"))}}});var mapLayer=vm.map.getMapLayer(layer[0]);mapLayer&&!mapLayer._change_opacity&&(mapLayer._change_opacity=mapLayer._change_opacity||mapLayer.on("change:opacity",vm._changeOpacityHandler)),layer[3]=!0}_vendor.$.each(layer[1].getArray(),function(index,feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool&&(tool.measureLength||tool.measureArea)&&(feature.tooltip?(vm.showTooltip(feature,!0),feature.get("measurement")||vm.measuring(feature,tool.measureLength,tool.measureArea,!1,"show")):(vm.createTooltip(feature,tool.measureLength,tool.measureArea),vm.measuring(feature,tool.measureLength,tool.measureArea,!1,"show")))})}else this.showTooltip(layer[1],!1)},toggleMeasure:function(type){this.measureType===type?this.annotations.setTool("Pan"):this.annotations.setTool(type)},clearMeasure:function(){var vm=this;this.features&&this.features.clear(),this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null),this.measureType&&(_vendor.$.each(this.annotations.tool.interactions,function(index,interact){vm.map.olmap.removeInteraction(interact)}),_vendor.$.each(this.annotations.tool.interactions,function(index,interact){vm.map.olmap.addInteraction(interact)}))},startMeasureFunc:function(measureLength,measureArea,measureBearing){var vm=this;return function(evt){vm.drawingFeature=evt.feature,vm.createTooltip(vm.drawingFeature,measureLength,measureArea,measureBearing),vm.geometryChangeHandler=vm.drawingFeature.getGeometry().on("change",function(feature,measureLength,measureArea,measureBearing){return function(evg){vm.measuring(feature,measureLength,measureArea,measureBearing,"drawing")}}(vm.drawingFeature,measureLength,measureArea,measureBearing))}},measuring:function(feature,measureLength,measureArea,measureBearing,mode,indexes){var vm=this;if(this._measure=this._measure||function(feature,geom,tooltipElement,tooltip,measurement,measureLength,measureArea,measureBearing,mode){if(tooltipElement){if(geom instanceof _vendor.ol.geom.LineString||geom instanceof _vendor.ol.geom.Polygon){if(geom instanceof _vendor.ol.geom.LineString&&(measureLength||measureBearing)||geom instanceof _vendor.ol.geom.Polygon&&measureLength){measurement=measurement||{};var length=null;measurement.length&&"drawing"!==mode?length=measurement.length:(geom instanceof _vendor.ol.geom.LineString?length=vm.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.Polygon&&(length=vm.getLength(geom.getLinearRing(0).getCoordinates())),measurement.length=length),measureLength&&tooltipElement.find(".length").html(vm.formatLength(length))}if(measureArea&&geom instanceof _vendor.ol.geom.Polygon){measurement=measurement||{};var area=null;measurement.area&&"drawing"!==mode?area=measurement.area:(area=vm.getArea(geom),measurement.area=area),tooltipElement.find(".area").html(vm.formatArea(area))}if(measureBearing&&geom instanceof _vendor.ol.geom.LineString){measurement=measurement||{};var bearing=null;if(measurement.bearing&&"drawing"!==mode)bearing=measurement.bearing;else{var coordinates=geom.getCoordinates();bearing=Math.round(100*vm.getBearing(coordinates[0],coordinates[coordinates.length-1]))/100+"&deg;",bearing=vm.formatLength(measurement.length,"km")+"\n"+vm.formatLength(measurement.length,"nm")+"\n"+bearing,measurement.bearing=bearing}tooltipElement.find(".bearing").html(bearing)}if("drawing"===mode||"show"===mode){var tooltipCoord=null;geom instanceof _vendor.ol.geom.Polygon?tooltipCoord=geom.getInteriorPoint().getCoordinates():geom instanceof _vendor.ol.geom.LineString&&(tooltipCoord=measureBearing?geom.getCoordinateAt(.5):geom.getLastCoordinate()),tooltip.setPosition(tooltipCoord)}return"show"===mode&&(tooltipElement.get(0).className="tooltip-measure tooltip-measured",tooltip.setOffset([0,-7])),measurement}return geom instanceof _vendor.ol.geom.MultiPolygon&&(measureLength||measureArea)?(measurement=measurement||[],_vendor.$.each(geom.getPolygons(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):geom instanceof _vendor.ol.geom.MultiLineString&&(measureLength||measureBearing)?(measurement=measurement||[],_vendor.$.each(geom.getLineStrings(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):geom instanceof _vendor.ol.geom.GeometryCollection&&(measureLength||measureBearing||measureArea)?(measurement=measurement||[],_vendor.$.each(geom.getGeometriesArray(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):measurement}return measurement},indexes&&void 0!==feature.get("measurement")&&null!==feature.get("measurement")){var geom=this.annotations.getSelectedGeometry(feature,indexes),measurement=this.getMeasurementObject(feature.get("measurement"),indexes,!0,indexes.length-2);measurement.splice(indexes[indexes.length-1],0,geom instanceof _vendor.ol.geom.GeometryCollection||geom instanceof _vendor.ol.geom.MultiPoint||geom instanceof _vendor.ol.geom.MultiLineString||geom instanceof _vendor.ol.geom.MultiPolygon?[]:geom instanceof _vendor.ol.geom.Point?null:{}),vm.measureFeature&&(measurement=measurement[indexes[indexes.length-1]],this._measure(feature,geom,this.getMeasurementObject(feature.tooltipElement,indexes),this.getMeasurementObject(feature.tooltip,indexes),measurement,measureLength,measureArea,measureBearing,mode))}else if(vm.measureFeature||void 0!==feature.get("measurement")&&null!==feature.get("measurement")){var measurement=this._measure(feature,feature.getGeometry(),feature.tooltipElement,feature.tooltip,feature.get("measurement"),measureLength,measureArea,measureBearing,mode);measurement&&measurement!==feature.get("measurement")&&feature.set("measurement",measurement,!0)}},endMeasure:function(feature){var vm=this;this._endMeasure=this._endMeasure||function(tooltipElement,tooltip){tooltipElement&&(Array.isArray(tooltipElement)?_vendor.$.each(tooltipElement,function(index,t){vm._endMeasure(t,tooltip[index])}):(tooltipElement.get(0).className="tooltip-measure tooltip-measured",tooltip.setOffset([0,-7])))},this._endMeasure(feature.tooltipElement,feature.tooltip)},showTooltip:function(feature,show){var vm=this;vm._showTooltip=vm._showTooltip||function(tooltip,show){if(tooltip){if(Array.isArray(tooltip)){var process=!0;return _vendor.$.each(tooltip,function(index,t){if(process=vm._showTooltip(t,show),process===!1)return!1}),process}return show?!tooltip.getMap()&&(vm.map.olmap.addOverlay(tooltip),tooltip.setOffset([0,-7]),!0):!!tooltip.getMap()&&(vm.map.olmap.removeOverlay(tooltip),!0)}return!0},feature instanceof _vendor.ol.Collection?_vendor.$.each(feature.getArray(),function(index,f){if(vm._showTooltip(f.tooltip,show)===!1)return!1}):Array.isArray(feature)?_vendor.$.each(feature,function(index,f){if(vm._showTooltip(f.tooltip,show)===!1)return!1}):vm._showTooltip(feature.tooltip,show)},getMeasurementObject:function(obj,indexes,createIfEmpty,end){if(void 0===obj||null===obj)return null;if(end=null===end||void 0===end?indexes.length-1:end,end<0)return obj;for(i=0;i<=end;i++)!obj[indexes[i]]&&createIfEmpty&&(obj[indexes[i]]=[]),obj=obj[indexes[i]];return obj},removeMeasurementObject:function(feature,property,indexes,removeFunc,isProperty){var measurementObj=this.getMeasurementObject(isProperty?feature.get(property):feature[property],indexes,!1,indexes.length-2);if(measurementObj){for(measurementObj[indexes[indexes.length-1]]&&removeFunc&&removeFunc(measurementObj[indexes[indexes.length-1]]),measurementObj.splice(indexes[indexes.length-1],1),i=indexes.length-3;i>=-1&&0===measurementObj.length;i--)measurementObj=this.getMeasurementObject(isProperty?feature.get(property):feature[property],indexes,!1,i),measurementObj.splice(indexes[i+1],1);isProperty?feature.get(property)&&0===feature.get(property).length&&feature.unset(property,!0):feature[property]&&0===feature[property].length&&delete feature[property]}},createTooltip:function(feature,measureLength,measureArea,measureBearing,indexes){var vm=this;this._createTooltipElement=this._createTooltipElement||function(geom,measureLength,measureArea,measureBearing){if(geom instanceof _vendor.ol.geom.Point)return null;if(geom instanceof _vendor.ol.geom.LineString&&(measureLength||measureBearing)||geom instanceof _vendor.ol.geom.Polygon&&(measureLength||measureArea)){var measureTooltipElement=(0,_vendor.$)("<div></div>");return measureLength&&measureTooltipElement.append("<div class='length'></div>"),measureArea&&geom instanceof _vendor.ol.geom.Polygon&&measureTooltipElement.append("<div class='area'></div>"),measureBearing&&geom instanceof _vendor.ol.geom.LineString&&measureTooltipElement.append("<div class='bearing' style='white-space:pre;'></div>"),measureTooltipElement.addClass("tooltip-measure tooltip-measuring"),(0,_vendor.$)("#map-measure-tooltips").append(measureTooltipElement),measureTooltipElement}if(geom instanceof _vendor.ol.geom.MultiLineString&&(measureLength||measureBearing)){var elements=[];return _vendor.$.each(geom.getLineStrings(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}if(geom instanceof _vendor.ol.geom.MultiPolygon&&(measureLength||measureArea)){var elements=[];return _vendor.$.each(geom.getPolygons(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}if(geom instanceof _vendor.ol.geom.GeometryCollection&&(measureLength||measureArea||measureBearing)){var elements=[];return _vendor.$.each(geom.getGeometriesArray(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}return null},this._createTooltip=this._createTooltip||function(tooltipElement){if(tooltipElement){if(Array.isArray(tooltipElement)){var tooltips=[];return _vendor.$.each(tooltipElement,function(index,t){tooltips.push(vm._createTooltip(t))}),tooltips}var measureTooltip=new _vendor.ol.Overlay({element:tooltipElement.get(0),offset:[0,-15],stopEvent:!1,positioning:"bottom-center"});return vm.map.olmap.addOverlay(measureTooltip),measureTooltip}return null};var tooltipElement=null;if(void 0===feature.tooltipElement||null===feature.tooltipElement)vm.measureFeature&&(tooltipElement=this._createTooltipElement(feature.getGeometry(),measureLength,measureArea,measureBearing),tooltipElement&&(!Array.isArray(tooltipElement)||tooltipElement.length>0)&&(feature.tooltipElement=tooltipElement));else{if(!Array.isArray(indexes))return;tooltipElement=this.getMeasurementObject(feature.tooltipElement,indexes,!0,indexes.length-2);var geom=this.annotations.getSelectedGeometry(feature,indexes);tooltipElement.splice(indexes[indexes.length-1],0,this._createTooltipElement(geom,measureLength,measureArea,measureBearing)),tooltipElement=tooltipElement[indexes[indexes.length-1]]}if(void 0===feature.tooltip||null===feature.tooltip)vm.measureFeature&&feature.tooltipElement&&(feature.tooltip=this._createTooltip(feature.tooltipElement));else if(Array.isArray(indexes)){var tooltip=this.getMeasurementObject(feature.tooltip,indexes,!0,indexes.length-2);tooltip.splice(indexes[indexes.length-1],0,this._createTooltip(tooltipElement))}},removeTooltip:function(feature,removeTooltipElement,indexes){var vm=this;this._removeTooltip=this._removeTooltip||function(tooltip){tooltip&&(Array.isArray(tooltip)?_vendor.$.each(tooltip,function(index,t){vm._removeTooltip(t)}):tooltip.getMap()&&vm.map.olmap.removeOverlay(tooltip))},this._removeTooltipElement=this._removeTooltipElement||function(tooltipElement){tooltipElement&&(Array.isArray(tooltipElement)?_vendor.$.each(tooltipElement,function(index,t){vm._removeTooltipElement(t)}):tooltipElement.remove())},removeTooltipElement=void 0===removeTooltipElement||removeTooltipElement,feature.tooltip&&(indexes?this.removeMeasurementObject(feature,"tooltip",indexes,this._removeTooltip):(this._removeTooltip(feature.tooltip),delete feature.tooltip)),removeTooltipElement&&feature.tooltipElement&&(indexes?this.removeMeasurementObject(feature,"tooltipElement",indexes,this._removeTooltipElement):(this._removeTooltipElement(feature.tooltipElement),delete feature.tooltipElement))},getArea:function(polygon){var area=0,vm=this;return Array.isArray(polygon)?_vendor.$.each(polygon,function(index,linearRing){0===index?area=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing)):area-=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing))}):_vendor.$.each(polygon.getLinearRings(),function(index,linearRing){0===index?area=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing.getCoordinates())):area-=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing.getCoordinates()))}),area},getTotalArea:function(geom){var area=0,vm=this;return geom instanceof _vendor.ol.geom.Polygon?area=this.getArea(geom):geom instanceof _vendor.ol.geom.MultiPolygon?_vendor.$.each(geom.getPolygons(),function(index,p){area+=vm.getArea(p)}):geom instanceof _vendor.ol.geom.GeometryCollection&&_vendor.$.each(geom.getGeometriesArray(),function(index,g){area+=vm.getTotalArea(g)}),area},convertArea:function(area,unit){return unit=unit||"km","ha"===unit?area/1e4:"km2"===unit?area/1e6:area},getLength:function(coordinates){for(var length=0,sourceProj=this.$root.map.olmap.getView().getProjection(),i=0,ii=coordinates.length-1;i<ii;++i){var c1=_vendor.ol.proj.transform(coordinates[i],sourceProj,"EPSG:4326"),c2=_vendor.ol.proj.transform(coordinates[i+1],sourceProj,"EPSG:4326");length+=this.wgs84Sphere.haversineDistance(c1,c2)}return length},getTotalLength:function(geom){var length=0;return geom instanceof _vendor.ol.geom.Polygon?length=this.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.LineString?length=this.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.MultiPolygon?_vendor.$.each(geom.getPolygons(),function(index,p){length+=this.getLength(p.getCoordinates())}):geom instanceof _vendor.ol.geom.MultiLineString?_vendor.$.each(geom.getLineStrings(),function(index,l){length+=this.getLength(l.getCoordinates())}):geom instanceof _vendor.ol.geom.GeometryCollection&&_vendor.$.each(geom.getGeometriesArray(),function(index,g){length+=this.getTotalLength(g)}),length},convertLength:function(length,unit){return unit=unit||"m","nm"===unit?250*length/463e3:"mile"===unit?15625*length/25146e3:"km"===unit?length/1e3:length},getBearing:function(coordinates1,coordinates2){var lon1=this._degrees2radians*coordinates1[0],lon2=this._degrees2radians*coordinates2[0],lat1=this._degrees2radians*coordinates1[1],lat2=this._degrees2radians*coordinates2[1],a=Math.sin(lon2-lon1)*Math.cos(lat2),b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1),bearing=this._radians2degrees*Math.atan2(a,b);return bearing=bearing>=0?bearing:bearing+360},formatLength:function(length,unit){var output=null;return unit=unit||this.lengthUnit,"nm"===unit?output="nm":"mile"===unit?output="mile":length>100?(unit="km",output="km"):(unit="m",output="m"),output=Math.round(100*this.convertLength(length,unit))/100+" "+output},formatArea:function(area){var output=null;return output="ha"===this.areaUnit?area>1?Math.round(this.convertArea(area,"ha"))+" ha":Math.round(100*this.convertArea(area,"ha"))/100+" ha":area>1e4?Math.round(100*this.convertArea(area,"km2"))/100+" km<sup>2</sup>":Math.round(100*this.convertArea(area,"m2"))/100+" m<sup>2</sup>"}},ready:function(){var vm=this;this._degrees2radians=Math.PI/180,this._radians2degrees=180/Math.PI;var measureStatus=vm.loading.register("measure","Measurement Component","Initialize");this.$root.map;this.features=new _vendor.ol.Collection,this.features.on("remove",function(event){event.element.tooltipElement&&vm.removeTooltip(event.element)}),this.style=new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:"rgba(0,0,0, 0.25)"}),stroke:new _vendor.ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new _vendor.ol.style.Circle({
radius:5,fill:new _vendor.ol.style.Fill({color:"rgb(0, 153, 255)"})})}),this.source=new _vendor.ol.source.Vector({features:this.features}),this.overlay=new _vendor.ol.layer.Vector({source:this.source,style:this.style});var measureSnap=new _vendor.ol.interaction.Snap({features:vm.annotations.features}),measureLengthInter=new _vendor.ol.interaction.Draw({source:this.source,type:"LineString",style:this.style}),drawendHandler=function(ev){vm.endMeasure(ev.feature),vm.drawingFeature=null};measureLengthInter.on("drawstart",this.startMeasureFunc(!0,!1,!1),this),measureLengthInter.on("drawend",drawendHandler,this);var measureLength={name:"MeasureLength",interactions:[measureLengthInter,measureSnap]};this.annotations.tools.push(measureLength);var measureBearingInter=new _vendor.ol.interaction.Draw({source:this.source,type:"LineString",style:this.style,freehand:!1,maxPoints:2,minPoints:2});measureBearingInter.on("drawstart",this.startMeasureFunc(!1,!1,!0),this),measureBearingInter.on("drawend",drawendHandler,this);var measureBearing={name:"MeasureBearing",interactions:[measureBearingInter,measureSnap]};this.annotations.tools.push(measureBearing);var measureAreaInter=new _vendor.ol.interaction.Draw({source:this.source,type:"Polygon",style:this.style});measureAreaInter.on("drawstart",this.startMeasureFunc(!0,!0,!1),this),measureAreaInter.on("drawend",drawendHandler,this);var measureArea={name:"MeasureArea",interactions:[measureAreaInter,measureSnap]};vm._changeOpacityHandler=function(ev){vm.measureFeature&&(0===ev.target.get(ev.key)?vm.enableFeatureMeasurement(ev.target.get("id"),!1):0===ev.oldValue&&vm.enableFeatureMeasurement(ev.target.get("id"),!0))};var featureChanged=function(feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool&&(feature.unset("measurement",!0),feature.tooltip&&(vm.measureFeature?vm.measuring(feature,tool.measureLength,tool.measureArea,!1,"show"):feature.unset("measurement",!0)))};this.annotations.tools.push(measureArea);var featuresChangedListener=function(ev){ev.features.forEach(function(feature){featureChanged(feature)})},addFeatureGeometryListener=function(ev){var tool=ev.feature.get("toolName");tool=tool?vm.annotations.getTool(tool):null,tool&&(vm.createTooltip(ev.feature,tool.measureLength,tool.measureArea,!1,ev.indexes),vm.measuring(ev.feature,tool.measureLength,tool.measureArea,!1,"show",ev.indexes))},deleteFeatureGeometryListener=function(ev){var tool=ev.feature.get("toolName");tool=tool?vm.annotations.getTool(tool):null,tool&&(vm.removeTooltip(ev.feature,!0,ev.indexes),vm.removeMeasurementObject(ev.feature,"measurement",ev.indexes,null,!0))},deleteFeatureAllGeometriesListener=function(ev){var tool=ev.feature.get("toolName");tool=tool?vm.annotations.getTool(tool):null,tool&&(vm.removeTooltip(ev.feature,!0),ev.feature.unset("measurement",!0))};this.annotations.tools.push(measureArea),this.wgs84Sphere=new _vendor.ol.Sphere(6378137),measureStatus.wait(30,"Listen 'gk-init' event"),this.$on("gk-init",function(){measureStatus.progress(50,"Process 'gk-init' event"),vm.map.olmap.getLayers().on("add",function(ev){var layer=vm._measureLayers.find(function(l){return l[0]===ev.element.get("id")});layer&&(vm.measureFeature&&vm.enableFeatureMeasurement(layer,!0),ev.element._change_opacity=ev.element._change_opacity||ev.element.on("change:opacity",vm._changeOpacityHandler))}),vm.map.olmap.getLayers().on("remove",function(ev){var layer=vm._measureLayers.find(function(l){return l[0]===ev.element.get("id")});layer&&(ev.element._change_opacity&&(ev.element.unByKey(ev.element._change_opacity),delete ev.element._change_opacity),vm.measureFeature&&vm.enableFeatureMeasurement(layer,!1))}),measureStatus.wait(60,"Listen 'gk-postinit' event"),this.$on("gk-postinit",function(){measureStatus.progress(80,"Process 'gk-postinit' event");var processedInteractions=[];_vendor.$.each(vm.annotations.tools,function(index1,tool){_vendor.$.each(tool.interactions,function(index2,interaction){processedInteractions.find(function(o){return o===interaction})||(interaction instanceof _vendor.ol.interaction.Modify?interaction.on("featuresmodified",featuresChangedListener):interaction instanceof _vendor.ol.interaction.Translate?interaction.on("translateend",featuresChangedListener):interaction instanceof _vendor.ol.interaction.Draw&&interaction.events&&interaction.events.addfeaturegeometry&&interaction.on("addfeaturegeometry",addFeatureGeometryListener),interaction.events&&interaction.events.deletefeaturegeometry&&interaction.on("deletefeaturegeometry",deleteFeatureGeometryListener),interaction.events&&interaction.events.deletefeatureallgeometries&&interaction.on("deletefeatureallgeometries",deleteFeatureAllGeometriesListener),processedInteractions.push(interaction))})}),vm.measureFeature&&_vendor.$.each(vm._measureLayers,function(index,layer){vm.enableFeatureMeasurement(layer,!0)}),measureStatus.end()})})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div style="display:none">\n<div id="map-measure" class="ol-selectable ol-control">\n    <button type="button" title="Measure length" @click="toggleMeasure(\'MeasureLength\')" v-bind:class="{\'selected\':isMeasureLength}"><img src="dist/static/images/measure-length.svg"></button>\n    <button type="button" title="Measure area" @click="toggleMeasure(\'MeasureArea\')" v-bind:class="{\'selected\':isMeasureArea}"><img src="dist/static/images/measure-area.svg"></button>\n    <button type="button" title="Measure bearing" @click="toggleMeasure(\'MeasureBearing\')" v-bind:class="{\'selected\':isMeasureBearing}"><img src="dist/static/images/measure-bearing.svg"></button>\n    <button type="button" title="Clear measurements" v-show="showClear" @click="clearMeasure()"><i class="fa fa-trash"></i></button>\n</div>\n</div>\n<div id="map-measure-tooltips"></div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-03d84b62",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-03d84b62",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],24:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n\n");Object.defineProperty(exports,"__esModule",{value:!0});require("src/vendor.js");exports.default={store:["fixedScales"],data:function(){return{}},computed:{scaleString:function(){return this.$root.map.getScaleString(this.$root.map.scale)}},methods:{reset:function(){this.$els.scaleSelect.selectedIndex=0}},ready:function(){var vm=this;this.$on("gk-init",function(){this.$root.map.olmap.on("postrender",function(){vm.reset()})})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div style="display:none">\n<select class="map-control" v-el:scale-select="" @change="$root.map.setScale($event.target.value)" id="menu-scale" v-cloak="">\n    <option value="{{ $root.map.scale }}" selected="">{{ scaleString }}</option>\n    <option v-for="s in fixedScales" value="{{ s }}">{{ $root.map.getScaleString(s) }}</option>\n</select>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-1430a695",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-1430a695",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],25:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n\n#map-search.alert, #map-search-button.alert {\n    background-color: rgba(125, 47, 34, 0.7);\n}\n\n#map-search:hover.alert, #map-search-button:hover.alert {\n    background-color: rgba(125, 47, 34, 0.9);\n}\n\n#map-search.success, #map-search-button.success {\n    background-color: rgba(53, 94, 26, 0.7);\n}\n\n#map-search:hover.success, #map-search-button:hover.success {\n    background-color: rgba(53, 94, 26, 0.9);\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["defaultWFSSrc","gokartService","resolutions"],data:function(){return{}},methods:{searchKeyFix:function(ev){13==ev.keyCode&&this.runSearch()},clearSearchPoint:function(){this.features.clear()},setSearchPointFunc:function(func){this._setSearchPointFunc=func},runSearch:function(){var vm=this,map=this.$root.map;(0,_vendor.$)("#map-search, #map-search-button").removeClass("alert success");var query=(0,_vendor.$)("#map-search").get(0).value;if(!query)return void this.clearSearchPoint();var victory=function(searchMethod,coords,name,update_name){(0,_vendor.$)("#map-search, #map-search-button").addClass("success"),map.animate({center:coords},{resolution:vm.resolutions[10]}),update_name&&(0,_vendor.$)("#map-search").val(update_name),vm._setSearchPointFunc&&vm._setSearchPointFunc(searchMethod,coords,name)||(vm.features.clear(),vm.features.push(new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coords),name:name})))},failure=function(reason){(0,_vendor.$)("#map-search, #map-search-button").addClass("alert")},dms=map.parseDMSString(query);if(dms)return void victory("DMS",dms,name);var mga=map.parseMGAString(query);if(mga)return void victory("MGA",mga.coords,map.getMGA(mga.coords));var gd=map.parseGridString(query);return gd?void("FD"===gd.gridType?this.queryFD(gd.gridNorth+" "+gd.gridEast,victory,failure):this.queryPIL(gd.gridNorth+gd.gridEast,victory,failure)):void this.queryGeocode(query,victory,failure)},queryFD:function(fdStr,victory,failure){var vm=this;_vendor.$.ajax({url:vm.defaultWFSSrc+"?"+_vendor.$.param({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:"cddp:fd_grid_points_mapping",cql_filter:"(fdgrid = '"+fdStr+"')"}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){data.features.length?victory("FD",data.features[0].geometry.coordinates,"FD "+fdStr):failure("No Forest Department Grid reference found for "+fdStr)}})},queryPIL:function(pilStr,victory,failure){var vm=this;_vendor.$.ajax({url:vm.defaultWFSSrc+"?"+_vendor.$.param({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:"cddp:pilbara_grid_10km_mapping",cql_filter:"(grid = '"+pilStr+"')"}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){data.features.length?victory("PIL",data.features[0].geometry.coordinates,"PIL "+pilStr):failure("No Pilbara Grid reference found for "+pilStr)}})},queryGeocode:function(geoStr,victory,failure){var vm=this,center=this.$root.map.getCenter();_vendor.$.ajax({url:vm.gokartService+"/mapbox/geocoding/v5/mapbox.places/"+encodeURIComponent(geoStr)+".json?"+_vendor.$.param({country:"au",proximity:""+center[0]+","+center[1]}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){if(data.features.length){var feature=data.features[0];victory("GEOCODE",feature.center,feature.text,feature.place_name)}else failure("No location match found for "+geoStr)}})}},ready:function(){var map=this.$root.map;this.style=function(feature,resolution){return new _vendor.ol.style.Style({image:new _vendor.ol.style.Circle({radius:5,fill:new _vendor.ol.style.Fill({color:"rgb(255, 255, 255)"}),stroke:new _vendor.ol.style.Stroke({width:2,color:"rgb(114, 193, 0)"})}),text:new _vendor.ol.style.Text({offsetX:12,text:feature.get("name"),textAlign:"left",font:"12px Helvetica,Roboto,Arial,sans-serif",stroke:new _vendor.ol.style.Stroke({color:"#fff",width:4})})})},this.features=new _vendor.ol.Collection,this.source=new _vendor.ol.source.Vector({features:this.features}),this.overlay=new _vendor.ol.layer.Vector({source:this.source,style:this.style}),this.$on("gk-init",function(){this.overlay.setMap(map.olmap)})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n    <div style="display:none">\n    <input id="map-search" class="map-control" title="Search the map for any of the following. \n\nPlaces/Addresses, e.g.:\n- 17 Dick Perry Avenue, Kensington\n- Upper Swan, Western Australia\n\nCoordinates, e.g.:\n- 32.00858S 115.53978E\n- 115d 38m 58.0s E, 33d 20m 52.8s S\n- 115:38:58.0 E, 33:20:52.8 S\n- 115 38 58.0 E, 33 20 52.8 S\n\nMap Grid of Australia UTM coordinates, e.g.:\n- MGA 50 718776E 6190981N\n- MGA50 3816452\n\nForestry Department/Pilbara grid references, e.g.:\n- FD ET 79\n- PIL AF50" placeholder="Search (places, , MGA, FD)" @keyup="searchKeyFix($event)">\n    <button id="map-search-button" class="map-control" @click="runSearch"><i class="fa fa-search"></i></button>\n    </div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n\n#map-search.alert, #map-search-button.alert {\n    background-color: rgba(125, 47, 34, 0.7);\n}\n\n#map-search:hover.alert, #map-search-button:hover.alert {\n    background-color: rgba(125, 47, 34, 0.9);\n}\n\n#map-search.success, #map-search-button.success {\n    background-color: rgba(53, 94, 26, 0.7);\n}\n\n#map-search:hover.success, #map-search-button:hover.success {\n    background-color: rgba(53, 94, 26, 0.9);\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-761a3454",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-761a3454",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],26:[function(require,module,exports){(function(global){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.about-pane {\n    font-size: 12px;\n}\n\n#about{\n    position:absolute;\n    bottom:0;\n    right:0;\n    width:32px;\n    height:32px\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{settings:"settings",overviewMap:"settings.overviewMap",undoLimit:"settings.undoLimit",measureFeature:"settings.measureFeature",lengthUnit:"settings.lengthUnit",areaUnit:"settings.areaUnit",rightHandTools:"settings.rightHandTools",graticule:"settings.graticule",tourVersion:"settings.tourVersion"},data:function(){return{configuredUndoLimit:0}},computed:{loading:function(){return this.$root.loading},profile:function(){return this.$root.profile},measure:function(){return this.$root.measure},info:function(){return this.$root.info},annotations:function(){return this.$root.annotations},export:function(){return this.$root.export},drawinglogs:function(){return this.$root.annotations.drawinglogs},map:function(){return this.$root.map},undoLimitDesc:function(){return(this.configuredUndoLimit<0?"Off":0===this.configuredUndoLimit?"Unlimited":this.configuredUndoLimit)+"/"+(this.undoLimit<0?"Off":0===this.undoLimit?"Unlimited":this.undoLimit)},configuringUndoLimit:{get:function(){return this.configuredUndoLimit},set:function(val){var vm=this;val<0&&(val=-1),this.configuredUndoLimit=val,this._changeUndoLimit=vm._changeUndoLimit||global.debounce(function(){vm.drawinglogs.size=this.configuredUndoLimit},5e3),this._changeUndoLimit()}},undoEnabled:function(){return this.configuredUndoLimit>=0},hoverInfoSwitchable:function(){return this.$root.annotations.tool&&"Pan"===this.$root.annotations.tool.name},hoverInfo:function(){return!!this.map&&this.info.enabled}},watch:{rightHandTools:function(newValue,oldValue){this.showRightHandTools(newValue)},overviewMap:function(newValue,oldValue){this.showOverviewMap(newValue)}},methods:{setup:function(){this.annotations.setTool()},saveState:function(){this.export.saveState()},enableUndo:function(enable){enable?this.configuringUndoLimit=this.undoLimit<0?0:this.undoLimit:this.configuringUndoLimit=-1},toggleRightHandTools:function(ev){var vm=this;vm.rightHandTools=ev.target.checked,this.saveState()},showRightHandTools:function(show){var vm=this;_vendor.$.each(vm.map.mapControls,function(key,control){["overviewMap","fullScreen","search","mousePosition","attribution"].indexOf(key)<0&&vm.map.enableControl(key,show)})},toggleGraticule:function(ev){this.graticule=ev.target.checked,this.saveState()},toggleHoverInfo:function(ev){this.info.hoverInfo=ev.target.checked,this.saveState()},toggleMeasureFeature:function(ev){this.measureFeature=ev.target.checked,this.export.saveState()},toggleOverviewMap:function(ev){this.overviewMap=!this.overviewMap,this.export.saveState()},showOverviewMap:function(show){show&&this.map.getControl("overviewMap").setCollapsed(!1),this.map.enableControl("overviewMap",show)},reset:function(){window.confirm("This will clear all of your selected layers and drawings. Are you sure?")&&localforage.setItem("sssOfflineStore",{settings:this.$root.persistentData.settings}).then(function(v){document.location.reload()})},resetSettings:function(){window.confirm("This will clear all customized settings and reset to system default settings. Are you sure?")&&(this.$root.store.settings=_vendor.$.extend({},JSON.parse(JSON.stringify(this.$root.defaultSettings)),{tourVersion:this.tourVersion}),this.export.saveState())}},ready:function(){var vm=this,settingStatus=this.loading.register("setting","Setting Component","Initialize");this.configuredUndoLimit=this.undoLimit,settingStatus.wait(30,"Listen 'gk-init' event"),this.$on("gk-init",function(){settingStatus.progress(80,"Process 'gk-init' event"),vm.showOverviewMap(vm.overviewMap),vm.showRightHandTools(vm.rightHandTools),settingStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-setting" v-cloak="">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="setting-tabs">\n        <li class="tabs-title is-active"><a class="label" aria-selected="true">System Settings</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="setting-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="setting-tabs">\n        <div class="tabs-panel is-active" id="system-settings" v-cloak="">\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleGraticule" type="checkbox" v-bind:checked="graticule" @change="toggleGraticule">\n              <label class="switch-paddle" for="toggleGraticule">\n                  <span class="show-for-sr">Display graticule</span>\n              </label>\n            </div>\n            <label for="toggleGraticule" class="side-label">Display graticule</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleOverviewMap" type="checkbox" v-bind:checked="overviewMap" @change="toggleOverviewMap">\n              <label class="switch-paddle" for="toggleOverviewMap">\n                  <span class="show-for-sr">Show overview map</span>\n              </label>\n            </div>\n            <label for="toggleOverviewMap" class="side-label">Show overview map</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleHoverInfo" type="checkbox" v-bind:checked="hoverInfo" @change="toggleHoverInfo">\n              <label class="switch-paddle" for="toggleHoverInfo">\n                <span class="show-for-sr">Display hovering feature info</span>\n              </label>\n            </div>\n            <label for="toggleHoverInfo" class="side-label">Display hovering feature info</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleRightHandTools" type="checkbox" v-bind:checked="rightHandTools" @change="toggleRightHandTools">\n              <label class="switch-paddle" for="toggleRightHandTools">\n                <span class="show-for-sr">Show right hand tools</span>\n              </label>\n            </div>\n            <label for="toggleRightHandTools" class="side-label">Show right hand tools</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleMeasureFeature" type="checkbox" v-bind:checked="measureFeature" @change="toggleMeasureFeature">\n              <label class="switch-paddle" for="toggleMeasureFeature">\n                <span class="show-for-sr">Measure feature</span>\n              </label>\n            </div>\n            <label for="toggleMeasureFeature" class="side-label">Measure feature</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Distance unit:</label>\n              </div>\n              <div class="small-8">\n                  <select name="lengthUnit" v-model="lengthUnit" @change="saveState()">\n                      <option value="nm">Nautical Mile</option>      \n                      <option value="mile">Mile</option>      \n                      <option value="km">Kilometer</option>      \n                  </select>\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Area unit:</label>\n              </div>\n              <div class="small-8">\n                  <select name="areaUnit" v-model="areaUnit" @change="saveState()">\n                      <option value="ha">Hectare</option>      \n                      <option value="km2">km2</option>      \n                  </select>\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="columns small-4"><label class="tool-label">Undo limit:<br>{{ undoLimitDesc }}</label></div>\n            <div class="columns small-7"><input class="layer-opacity" type="range" min="0" max="1000" step="10" v-model="configuringUndoLimit" v-bind:disabled="!undoEnabled"></div>\n            <div class="columns small-1">\n              <a title="Disable undo feature" v-if="undoEnabled" class="button tiny secondary float-right" @click="enableUndo(false)"><i class="fa fa-stop"></i></a>\n              <a title="Enable undo feature" v-if="!undoEnabled" class="button tiny secondary float-right" @click="enableUndo(true)"><i class="fa fa-play"></i></a>\n            </div>\n          </div>\n\n         <div class="tool-slice row collapse">\n             <hr class="small-12">\n             <div class="small-3">\n                 <label class="tool-label">Reset:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="reset-sss" class="button alert" title="Clear the current drawing and layer selection (saved views will be retained)" @click="reset()"><i class="fa fa-refresh"></i> Reset SSS</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="reset-settings" class="button alert" title="Reset to system default settings" @click="resetSettings()"><i class="fa fa-refresh"></i> Reset Settings</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n                 <label class="tool-label">Tour:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="take-tour" class="button" title="Take a tour of the new SSS interface" @click="$root.takeTour()"><i class="fa fa-book"></i> Take Tour</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n                 <label class="tool-label">Version:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="take-tour" class="button" title="Check new version" @click="$root.utils.checkVersion($root.profile,true)"> Check New Version</a>\n                </div>\n             </div>\n\n          </div>\n          \n\n          <div class="about-pane row collapse about-pane">\n            <hr class="small-12">\n            <div class="small-12">\n              <p><b>DISCLAIMER:</b> The Department of Parks and Wildlife does not guarantee that this map is without flaw of any kind and disclaims all liability for any error, or loss or other consequence which may arise from relying on any information depicted. Apart from any use permitted under the Copyright Act, no part of this map may be reproduced by any process without the written permission of the authors. Crown copyright reserved.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <img src="dist/static/images/about.svg" id="about" data-open="aboutModal">\n\n  <div class="reveal" id="aboutModal" data-reveal="">\n      <div class="about-pane row collapse about-pane">\n        <h5 class="small-12">{{profile.description}}</h5>\n        <div class="small-4">Version:</div>\n        <span class="small-8">{{profile.version}}</span>\n        <div class="small-4">Branch:</div>\n        <span class="small-8">{{profile.repositoryBranch}}</span>\n        <div class="small-4">Last commit:</div>\n        <span class="small-8">{{profile.lastCommit}}</span>\n        <div class="small-4">Commit date:</div>\n        <span class="small-8">{{profile.commitDate}}</span>\n        <div class="small-12">\n          <p><br> 2016 Government of Western Australia<br>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a> (the "License"). Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>\n        </div>\n      </div>\n      <button class="close-button" data-close="" aria-label="Close Accessible Modal" type="button">\n          <span aria-hidden="true"></span>\n      </button>\n  </div>\n\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.about-pane {\n    font-size: 12px;\n}\n\n#about{\n    position:absolute;\n    bottom:0;\n    right:0;\n    width:32px;\n    height:32px\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-68a7eb54",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-68a7eb54",module.exports))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],27:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.actionicon {\n    width:9px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{bfrsService:"bfrsService",wfsService:"defaultWFSSrc",bushfireLabels:"settings.bfrs.bushfireLabels",viewportOnly:"settings.bfrs.viewportOnly",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",whoami:"whoami"},data:function(){return{selectedOnly:!1,search:"",statusFilter:"",region:"",district:"",tools:[],fields:["job_code","name"],drawings:new _vendor.ol.Collection,allFeatures:new _vendor.ol.Collection,editableFeatures:new _vendor.ol.Collection,extentFeatures:[],selectedBushfires:[],bushfiresfile:"",revision:1,profileRevision:1,tints:{new:[["#b43232","#1c6928"]],"new.text":"#1c6928","new.fillColour":[0,0,0,.25],"new.colour":"#1c6928",unknown:[["#b43232","#f90c25"]],"unknown.text":"#f90c25","unknown.fillColour":[0,0,0,.25],"unknown.colour":"#f90c25",initial:[["#b43232","#b08c9d"]],"initial.text":"#b08c9d","initial.fillColour":[0,0,0,.25],"initial.colour":"#b08c9d",submitted:[["#b43232","#3f1919"]],"submitted.text":"#3f1919","submitted.fillColour":[0,0,0,.25],"submitted.colour":"#3f1919",draft_final:[["#b43232","#b7d28d"]],"draft_final.text":"#b7d28d","draft_final.fillColour":[0,0,0,.25],"draft_final.colour":"#b7d28d",final:[["#b43232","#7ecca3"]],"final.text":"#7ecca3","final_authorised.fillColour":[0,0,0,.25],"final_authorised.colour":"#7ecca3",draft_review:[["#b43232","#7ecca3"]],"draft_review.text":"#7ecca3","draft_review.fillColour":[0,0,0,.25],"draft_review.colour":"#7ecca3",reviewed:[["#b43232","#7ecca3"]],"reviewed.text":"#7ecca3","reviewed_authorised.fillColour":[0,0,0,.25],"reviewed_authorised.colour":"#7ecca3",modified:[["#b43232","#f57900"]],"modified.text":"#f57900","modified_authorised.fillColour":[0,0,0,.25],"modified.colour":"#f57900",selected:[["#b43232","#2199e8"]],"selected.text":"#2199e8"}}},computed:{map:function(){return this.$root.$refs.app.$refs.map},annotations:function(){return this.$root.$refs.app.$refs.annotations},active:function(){return this.$root.active},measure:function(){return this.$root.measure},info:function(){return this.$root.info},setting:function(){return this.$root.setting},catalogue:function(){return this.$root.catalogue},export:function(){return this.$root.export},loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},features:function(){return this.viewportOnly?this.revision&&this.extentFeatures:this.revision&&this.allFeatures.getArray()},isReportMapLayerHidden:function(){return this.$root.active.isHidden(this.bfrsMapLayer)},selectedOnlyDisabled:function(){return 0===this.selectedBushfires.length&&!this.selectedOnly},selectedFeatures:function(){return this.annotations.selectedFeatures},stats:function(){return this.extentFeatures.length+"/"+this.allFeatures.getLength()},bfrsLayer:function(){return this.$root.catalogue.getLayer("bfrs:bushfire_dev")},bfrsMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.bfrsLayer):void 0},regionFilter:function(){return this.region?"region_id="+this.region:null},districtFilter:function(){return this.district?"district_id="+this.district:null},regions:function(){try{return this.profileRevision&&this.whoami.bushfire.regions}catch(ex){return[]}},districts:function(){var vm=this,r=null;return this.region&&(r=this.regions.find(function(o){return o.region_id===parseInt(vm.region)})),r?r.districts:[]},bushfireStyleFunc:function(){return this._bushfireStyleFunc||(this._bushfireStyleFunc=function(){var vm=this,pointStyleFunc=vm.annotations.getIconStyleFunction(vm.tints),boundaryStyleFunc=vm.annotations.getVectorStyleFunc(vm.tints),labelStyleFunc=vm.annotations.getLabelStyleFunc(vm.tints);
return function(res){var feat=this,geometries=feat.getGeometry().getGeometriesArray(),pointStyle=geometries.length>0||geometries[0]instanceof _vendor.ol.geom.Point?pointStyleFunc.call(feat,res):null,boundaryStyle=geometries.length>1||geometries[0]instanceof _vendor.ol.geom.MultiPolygon?boundaryStyleFunc.call(feat,res):null,labelStyle=null;res<.003&&geometries.length>0&&feat.get("label")&&vm.bushfireLabels&&!vm.$root.active.isHidden(vm.map.getMapLayer("bfrs:bushfire_dev"))&&(labelStyle=labelStyleFunc.call(feat,res),labelStyle.setGeometry(geometries[0]));return(pointStyle&&1)+(boundaryStyle&&1)+(labelStyle&&1)===1?pointStyle||boundaryStyle||labelStyle:(vm._bushfireStyle?vm._bushfireStyle.length=0:vm._bushfireStyle=[],pointStyle&&vm._bushfireStyle.push.apply(vm._bushfireStyle,pointStyle),boundaryStyle&&vm._bushfireStyle.push.apply(vm._bushfireStyle,boundaryStyle),labelStyle&&vm._bushfireStyle.push(labelStyle),vm._bushfireStyle)}}.call(this)),this._bushfireStyleFunc}},watch:{isReportMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.bfrsMapLayer.changed())},bushfireLabels:function(newValue,oldValue){this.showBushfireLabels()},screenHeight:function(newValue,oldvalue){this.adjustHeight()}},methods:{isModifiable:function(bushfire){return this.whoami.bushfire.permission[bushfire.get("status")+".modify"]},isEditable:function(bushfire){return this.whoami.bushfire.permission[bushfire.get("status")+".edit"]},isViewable:function(bushfire){return this.whoami.bushfire.permission[bushfire.get("status")+".view"]},isDeletable:function(bushfire){return"new"===bushfire.get("status")},isCreatable:function(){try{return this.revision&&this.whoami.bushfire.permission.create}catch(ex){return!1}},isAuthorizable:function(bushfire){return this.whoami.bushfire.permission[bushfire.get("status")+".authorise"]},canEdit:function(bushfire){return this.revision&&"new"!==bushfire.get("status")&&this.isEditable(bushfire)&&"modified"!==bushfire.get("tint")},canReset:function(bushfire){return this.revision&&"new"!==bushfire.get("status")},canSave:function(bushfire){return this.revision&&"new"!==bushfire.get("status")&&this.isModifiable(bushfire)&&"modified"===bushfire.get("tint")},canCreate:function(bushfire){return this.revision&&"new"===bushfire.get("status")},canDelete:function(bushfire){return this.revision&&this.isDeletable(bushfire)},canAuthorise:function(bushfire){return this.revision&&this.isAuthorizable(bushfire)&&"modified"!==bushfire.get("tint")},createUrl:function(){return this.bfrsService+"/bfrs/create/"},editUrl:function(feat){var status=feat.get("report_status");return[1,2].indexOf(status)>=0?this.bfrsService+"/bfrs/initial/"+feat.get("id")+"/":[3,4].indexOf(status)>=0?this.bfrsService+"/bfrs/final/"+feat.get("id")+"/":[5,6].indexOf(status)>=0?this.bfrsService+"/bfrs/review/"+feat.get("id")+"/":null},saveUrl:function(feat){return this.bfrsService+"/api/v1/bushfire/"+feat.get("id")+"/?format=json"},deleteUrl:function(feat){return this.bfrsService+"/delete/"+feat.get("id")},authoriseUrl:function(feat){return this.bfrsService+"/authorise/"+feat.get("id")},validateFireBoundary:function(feat,polygon){var geometries=feat.getGeometry().getGeometries(),indexes=geometries.length>1?[1]:1===geometries.length&&geometries[0]instanceof _vendor.ol.geom.MultiPolygon?[0]:null;if(!indexes)return!0;var fireBoundary=geometries[indexes[0]],polygonIndex=polygon?fireBoundary.find(function(o){return o===polygon}):-1;fireBoundary=fireBoundary.getCoordinates();var invalid=!1;if(polygon)polygon=_vendor.turf.polygon(polygon.getCoordinates()),_vendor.turf.kinks(polygon).features.length>0?(alert("The polygon is self intersection, please fix it."),polygonIndex!==-1?indexes.push(polygonIndex):indexes=null,invalid=!0):$.each(fireBoundary,function(index,p){try{if(_vendor.turf.intersect(polygon,_vendor.turf.polygon(p)))return indexes.push(index),alert("Some fire boundaries are intersect, please fix it."),invalid=!0,!1}catch(ex){_vendor.turf.kinks(p).features.length>0?alert("Some fire boundary are self intersection, please fix it."):alert("Some fire boundary are invalid, please fix it."),indexes.push(index),invalid=!0}});else for(index=0;index<fireBoundary.length;index++){for(0===index&&(fireBoundary[index]=_vendor.turf.polygon(fireBoundary[index])),index2=index+1;index2<fireBoundary.length;index2++){0===index&&(fireBoundary[index2]=_vendor.turf.polygon(fireBoundary[index2]));try{if(_vendor.turf.intersect(fireBoundary[index],fireBoundary[index2])){alert("Some fire boundaries are intersect, please fix it."),indexes.push(index),invalid=!0;break}}catch(ex){0===index&&1===index2&&_vendor.turf.kinks(fireBoundary[index]).features.length>0?(indexes.push(index),alert("Some fire boundary are self intersection, please fix it.")):0===index&&_vendor.turf.kinks(fireBoundary[index2]).features.length>0?(indexes.push(index2),alert("Some fire boundary are self intersection, please fix it.")):(indexes.push(index),alert("Some fire boundary are invalid, please fix it.")),invalid=!0}}if(invalid)break}return invalid&&(indexes&&(feat.selectedIndex=indexes),this.annotations.tool!==this.ui.modifyTool&&this.annotations.setTool(this.ui.modifyTool),1===this.annotations.selectedFeatures.length&&this.annotations.selectedFeatures.item(0)===feat||(this.annotations.selectedFeatures.clear(),this.annotations.selectedFeatures.push(feat))),!invalid},getSSSId:function(feat,create){create=void 0!==create&&null!==create&&create;var sssId=feat.get("sss_id");if(!sssId&&create){var geometries=feat.getGeometry().getGeometriesArray(),originPoint=geometries.length>0&&geometries[0]instanceof _vendor.ol.geom.Point?geometries[0].getCoordinates():null,fireBoundary=geometries.length>1?geometries[1]:1===geometries.length&&geometries[0]instanceof _vendor.ol.geom.MultiPolygon?geometries[0]:null;fireBoundary=fireBoundary?fireBoundary.getCoordinates():null,sssId=_vendor.hash.MD5({origin_point:JSON.stringify(originPoint),fire_boundary:JSON.stringify(fireBoundary),author:this.whoami.email,time:Date.now()}),feat.set("sss_id",sssId,!0)}return sssId},getSpatialData:function(feat,callback){var geometries=feat.getGeometry().getGeometriesArray(),originPoint=geometries.length>0&&geometries[0]instanceof _vendor.ol.geom.Point?geometries[0].getCoordinates():null,fireBoundary=geometries.length>1?geometries[1]:1===geometries.length&&geometries[0]instanceof _vendor.ol.geom.MultiPolygon?geometries[0]:null,area=fireBoundary?this.measure.convertArea(this.measure.getTotalArea(fireBoundary),"ha"):null;feat.set("area",area,!0);var bbox=fireBoundary&&fireBoundary.getPolygons().length>0?fireBoundary.getExtent():null;if(fireBoundary=fireBoundary&&fireBoundary.getPolygons().length>0?fireBoundary.getCoordinates():null){var vm=this;$.ajax({url:vm.wfsService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames=cddp:dpaw_tenure&outputFormat=json&bbox="+bbox[1]+","+bbox[0]+","+bbox[3]+","+bbox[2],dataType:"json",success:function(response,stat,xhr){var requestData={origin_point:originPoint,fire_boundary:fireBoundary,area:area,tenures:{}};if(0===response.totalFeatures)requestData.tenures[-1]=area;else{var tenureArea=0,totalTenureArea=0,intersect=null,intersectPolygons=[],failed=!1,tenurePolygon=null,fireBoundaryPolygon=[];if($.each(response.features,function(index,tenure){return intersectPolygons.length=0,$.each(tenure.geometry.coordinates,function(index2,p){if(tenurePolygon=_vendor.turf.polygon(p),$.each(fireBoundary,function(index3,f){0===index&&0===index2&&fireBoundaryPolygon.push(_vendor.turf.polygon(f));try{intersect=_vendor.turf.intersect(fireBoundaryPolygon[index3],tenurePolygon)}catch(ex){return alert("Calculate the area of the fire boundary in tenure failed."+ex),failed=!0,!1}intersect&&("Polygon"===intersect.geometry.type?intersectPolygons.push(intersect.geometry.coordinates):"MultiPolygon"===intersect.geometry.type&&intersectPolygons.push.call(intersectPolygons,intersect.geometry.coordinates))}),failed)return!1}),!failed&&void(intersectPolygons.length>0&&(requestData.tenures[tenure.properties.ogc_fid]=0,tenureArea=0,$.each(intersectPolygons,function(index,p){tenureArea+=vm.measure.getArea(p)}),requestData.tenures[tenure.properties.ogc_fid.toString()]=tenureArea,tenureArea=0,totalTenureArea+=tenureArea))}),totalTenureArea<area?requestData.tenures[-1]=area-totalTenureArea:requestData.area=totalTenureArea,failed)return}console.log(JSON.stringify(requestData)),delete requestData.tenures,callback(requestData)},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}})}else{var requestData={origin_point:originPoint,fire_boundary:fireBoundary,area:area};console.log(JSON.stringify(requestData)),callback(requestData)}},saveFeature:function(feat){if(this.canSave(feat)){var vm=this;if(!this.validateFireBoundary(feat))return;vm.getSpatialData(feat,function(spatialData){$.ajax({url:vm.saveUrl(feat),method:"PATCH",data:JSON.stringify(spatialData),contentType:"application/json",success:function(response,stat,xhr){feat.set("tint",feat.get("originalTint"),!0),feat.set("fillColour",vm.tints[feat.get("tint")+".fillColour"]),feat.set("colour",vm.tints[feat.get("tint")+".colour"]),vm.revision+=1},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}})})}},newFeature:function(feat){var autoSelect=!0;this._bushfireSequence=this._bushfireSequence||0;var featId=0;feat&&feat.get("id")?(Math.abs(feat.get("id"))>this._bushfireSequence&&(this._bushfireSequence=Math.abs(feat.get("id"))),autoSelect=!1,featId=Math.abs(feat.get("id"))):(this._bushfireSequence+=1,featId=this._bushfireSequence);var label="New bushfire "+(featId<10?"00":featId<100?"0":"")+featId;feat?(feat.set("status","new",!0),feat.set("tint","new",!0),feat.set("id",featId*-1,!0),feat.set("originalTint","new",!0),feat.set("label",label,!0),feat.set("name","",!0),feat.set("toolName","Bfrs Origin Point",!0),feat.set("fillColour",this.tints["new.fillColour"],!0),feat.set("colour",this.tints["new.colour"],!0)):feat=new _vendor.ol.Feature({geometry:new _vendor.ol.geom.GeometryCollection([]),status:"new",tint:"new",id:this._bushfireSequence*-1,originalTint:"new",label:label,name:"",toolName:"Bfrs Origin Point",fillColour:this.tints["new.fillColour"],colour:this.tints["new.colour"]}),feat.setStyle(this.bushfireStyleFunc),this.bfrsMapLayer.getSource().addFeature(feat);var insertIndex=null;$.each(this.allFeatures.getArray(),function(index,f){return"new"!==f.get("status")?(insertIndex=index,!1):featId<Math.abs(f.get("id"))?(insertIndex=index,!1):void 0}),null!=insertIndex?this.allFeatures.insertAt(insertIndex,feat):this.allFeatures.push(feat),this.isModifiable(feat)&&this.editableFeatures.push(feat),this.revision+=1,autoSelect&&(this.selectedFeatures.clear(),this.selectedFeatures.push(feat),this.annotations.setTool(this.ui.originPointTool))},createFeature:function(feat){if(this.canCreate(feat)){if(!this.validateFireBoundary(feat))return;var vm=this;this.getSpatialData(feat,function(spatialData){spatialData.sss_id=vm.getSSSId(feat,!0),$("#sss_create").val(JSON.stringify(spatialData)),$("#bushfire_create").submit()})}},authoriseFeature:function(feat){if(this.canAuthorise(feat)){var vm=this;$.ajax({url:vm.authoriseUrl(feat),method:"GET",success:function(response,stat,xhr){vm.resetFeature(feat)},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}})}},deleteFeature:function(feat){var vm=this;this.canDelete(feat)&&(vm._deleteFeature=vm._deleteFeature||function(feat){vm.bfrsMapLayer.getSource().removeFeature(feat),vm.allFeatures.remove(feat),vm.editableFeatures&&vm.editableFeatures.remove(feat),vm.selectedFeatures.remove(feat);var index=vm.extentFeatures.findIndex(function(f){return f==feat});index>=0&&vm.extentFeatures.splice(index,1),vm.revision+=1},"new"===feat.get("status")?vm._deleteFeature(feat):window.confirm("The bushfire ("+feat.get("label")+" will be deleted. Are you sure?")&&$.ajax({url:vm.deleteUrl(feat),success:function(response,stat,xhr){vm._deleteFeature(feat)},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}}))},resetFeature:function(feat){var vm=this,filter="id="+feat.get("id");this.bfrsMapLayer.getSource().retrieveFeatures(filter,function(features){if(features&&features.length){vm.initBushfire(features[0]),vm.bfrsMapLayer.getSource().removeFeature(feat),vm.bfrsMapLayer.getSource().addFeature(features[0]);var index=vm.allFeatures.getArray().findIndex(function(f){return f.get("id")===feat.get("id")});index>=0&&(vm.allFeatures.setAt(index,features[0]),vm.revision+=1),vm.extentFeatures&&(index=vm.extentFeatures.findIndex(function(f){return f.get("id")===feat.get("id")}),index>=0&&(vm.extentFeatures[index]=features[0])),vm.editableFeatures&&(index=vm.editableFeatures.getArray().findIndex(function(f){return f.get("id")===feat.get("id")}),index>=0&&vm.editableFeatures.setAt(index,features[0])),index=vm.selectedFeatures.getArray().findIndex(function(f){return f.get("id")===feat.get("id")}),index>=0&&vm.selectedFeatures.setAt(index,features[0])}})},adjustHeight:function(){"bfrs"===this.activeMenu&&$("#bfrs-list").height(this.screenHeight-this.leftPanelHeadHeight-10-$("#bfrs-list-controller-container").height())},postModified:function(bushfires){var vm=this,sortRequired=!1;this._bushfirePostModified=this._bushfirePostModified||function(bushfire){"modified"!==bushfire.get("tint")&&"new"!==bushfire.get("tint")&&(bushfire.set("tint","modified",!0),bushfire.set("fillColour",vm.tints[bushfire.get("tint")+".fillColour"]),bushfire.set("colour",vm.tints[bushfire.get("tint")+".colour"]));var index=vm.extentFeatures?vm.extentFeatures.findIndex(function(f){return f===bushfire}):-1;index>=0?0===bushfire.getGeometry().getGeometriesArray().length&&vm.extentFeatures.splice(index,1):bushfire.getGeometry().getGeometriesArray().length>0&&(vm.extentFeatures.push(bushfire),sortRequired=!0)},Array.isArray(bushfires)?$.each(bushfires,function(index,bushfire){vm._bushfirePostModified(bushfire)}):vm._bushfirePostModified(bushfires),sortRequired&&vm.extentFeatures.sort(vm.featureOrder),vm.revision+=1},isModified:function(feat){return"modified"===feat.get("tint")},toggleSelect:function(f){this.selected(f)?this.selectedFeatures.remove(f):(["Bfrs Origin Point","Bfrs Edit Geometry","Bfrs Fire Boundary"].indexOf(this.annotations.tool.name)>=0&&this.selectedFeatures.clear(),this.selectedFeatures.push(f))},toggleViewportOnly:function(){this.viewportOnly=!this.viewportOnly,this.export.saveState()},toggleBushfireLabels:function(){this.bushfireLabels=!this.bushfireLabels,this.export.saveState()},initBushfire:function(feature){var geometries=feature.getGeometry()?[feature.getGeometry()]:[];feature.get("fire_boundary")&&feature.get("fire_boundary").coordinates&&(geometries.push(new _vendor.ol.geom.MultiPolygon(feature.get("fire_boundary").coordinates)),feature.unset("fire_boundary",!0)),feature.setGeometry(new _vendor.ol.geom.GeometryCollection(geometries),!0);(0,_vendor.moment)(),(0,_vendor.moment)(feature.get("created"));feature.set("status",this._reportStatus[feature.get("report_status")||99999],!0),feature.set("label",feature.get("name"),!0),feature.set("toolName","Bfrs Origin Point",!0),feature.set("tint",feature.get("status"),!0),feature.set("originalTint",feature.get("tint"),!0),feature.set("fillColour",this.tints[feature.get("tint")+".fillColour"]),feature.set("colour",this.tints[feature.get("tint")+".colour"]),feature.setStyle(this.bushfireStyleFunc)},showBushfireLabels:function(){this.bfrsMapLayer&&!this.$root.active.isHidden(this.bfrsMapLayer)&&this.bfrsMapLayer.changed()},featureIconSrc:function(f){var vm=this;vm.selectedBushfires;return this.map.getBlob(f,["icon","originalTint"],this.tints,function(){$("#bushfire-icon-"+f.get("id")).attr("src",vm.featureIconSrc(f))})},selected:function(f){return f.get("id")&&this.selectedBushfires.indexOf(f.get("id"))>-1},downloadList:function(fmt){var downloadFeatures=[],vm=this,feature=null,geometries=null;$.each(this.features,function(index,f){geometries=f.getGeometry().getGeometriesArray(),0===geometries.length?(feature=vm.map.cloneFeature(f,!1),feature.setGeometry(new _vendor.ol.geom.MultiPolygon),downloadFeatures.push(feature)):$.each(geometries,function(index,geometry){feature=vm.map.cloneFeature(f,!1),feature.setGeometry(geometry),downloadFeatures.push(feature)})}),this.$root.export.exportVector(downloadFeatures,"bfrs",fmt)},importList:function(){if(0!==this.$els.bushfiresfile.files.length){var vm=this;this.export.importVector(this.$els.bushfiresfile.files[0],function(features,fileFormat){var ignoredFeatures=[];if(".geojson"===fileFormat||".json"===fileFormat){for(var i=features.length-1;i>=0;i--)if(feature=features[i],"Bfrs Origin Point"!==feature.get("toolName"))if(feature.getGeometry()instanceof _vendor.ol.geom.Point)vm.map.clearFeatureProperties(feature),feature.setGeometry(new _vendor.ol.geom.GeometryCollction([feature.getGeometry()]));else if(feature.getGeometry()instanceof _vendor.ol.geom.Polygon)vm.map.clearFeatureProperties(feature),feature.setGeometry(new _vendor.ol.geom.GeometryCollction([new _vendor.ol.geom.MultiPloygon([feature.getGeometry().getCoordinates()])]));else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon)vm.map.clearFeatureProperties(feature),feature.setGeometry(new _vendor.ol.geom.GeometryCollction([feature.getGeometry()]));else if(feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection){vm.map.clearFeatureProperties(feature);var geometries=feature.getGeometry().getGeometriesArray().find(function(g,i){return g instanceof _vendor.ol.geom.Point});geometries=geometries?[geometries]:[];var fireBoundary=null;$.each(feature.getGeometry().getGeometriesArra().filter(function(g,i){return g instanceof _vendor.ol.geom.MultiPolygon}),function(index,mp){fireBoundary?$.each(mp.getPolygons(),function(index,p){fireBoundary.appendPolygon(p)}):fireBoundary=mp}),$.each(feature.getGeometry().getGeometriesArra().filter(function(g,i){return g instanceof _vendor.ol.geom.Polygon}),function(index,p){fireBoundary=fireBoundary||new _vendor.ol.geom.MultiPolygon,fireBoundary.appendPolygon(p)}),fireBoundary&&geometries.push(fireBoundary),feature.setGeometry(new _vendor.ol.geom.GeometryCollction(geometries))}else ignoredFeatures.push(feature),features.splice(i,1)}else if(".gpx"===fileFormat)for(var i=features.length-1;i>=0;i--)if(feature=features[i],feature.getGeometry()instanceof _vendor.ol.geom.Point)ignoredFeatures.push(feature),features.splice(i,1);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString){vm.map.clearFeatureProperties(feature);var coordinates=feature.getGeometry().getCoordinates();coordinates.push(coordinates[0]),feature.setGeometry(new _vendor.ol.geom.GeometryCollection([new _vendor.ol.geom.MultiPolygon([[coordinates]])]))}else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString){var geom=feature.getGeometry(),coordinates=null,mp=null;$.each(geom.getLineStrings(),function(index,linestring){coordinates=linestring.getCoordinates(),coordinates.push(coordinates[0]),mp=mp||new _vendor.ol.geom.MultiPolygon,mp.appendPolygon(new _vendor.ol.geom.Polygon([coordinates]))}),feature.setGeometry(new _vendor.ol.geom.GeometryCollection(mp?[mp]:[]))}else ignoredFeatures.push(feature),features.splice(i,1);else fileFormat===file.name?alert("Unknown file format ("+file.name+")"):alert("File format("+fileFormat+") not support");if(ignoredFeatures.length&&console.warn("The following features are ignored.\r\n"+vm.$root.geojson.writeFeatures(features)),features&&features.length>0){var notFoundBushfires=null;$.each(features,function(index,feature){if(void 0!==feature.get("id")){var feat=vm.allFeatures.getArray().find(function(f){return f.get("id")===feature.get("id")});feat?vm.map.isGeometryEqual(feat.getGeometry(),feature.getGeometry())||(feat.setGeometry(feature.getGeometry()),vm.postModified(feat)):feature.get("id")<0?vm.newFeature(feature):(notFoundBushfires=notFoundBushfires||[],notFoundBushfires.push(feature))}}),$.each(features,function(index,feature){void 0===feature.get("id")&&vm.newFeature(feature)}),notFoundBushfires&&alert("Some bushfires are not found."+JSON.stringify(notFoundBushfires.map(function(o){return{id:o.get("id"),name:o.get("name")}})))}})}},downloadSelectedCSV:function(){var bushfireFilter="";return this.selectedBushfires.length>0&&(bushfireFilter="id__in="+this.selectedBushfires.join(",")),bushfireFilter},updateCQLFilter:function(updateType,wait){var vm=this;return"region"===updateType&&(this.district=""),"selectedBushfire"===updateType&&0===this.selectedBushfires.length&&vm.selectedOnly===!0?void(vm.selectedOnly=!1):(vm._updateCQLFilterFunc||(vm._updateCQLFilterFunc=function(updateType){if(vm.bfrsMapLayer){var bushfireFilter="";vm.selectedBushfires.length>0&&vm.selectedOnly&&(bushfireFilter="id in ("+vm.selectedBushfires.join(",")+")");var filters=[vm.statusFilter,bushfireFilter,vm.regionFilter,vm.districtFilter].filter(function(f){return(f||!1)&&!0});if(0===filters.length?vm.bfrsLayer.cql_filter="":1===filters.length?vm.bfrsLayer.cql_filter=filters[0]:vm.bfrsLayer.cql_filter="("+filters.join(") and (")+")",!bushfireFilter&&vm.selectedOnly&&(vm.selectedOnly=!1),"selectedBushfire"===updateType&&bushfireFilter){var filteredFeatures=vm.bfrsMapLayer.getSource().getFeatures().filter(function(f){return vm.selectedBushfires.indexOf(f.get("id"))>=0});vm.bfrsMapLayer.getSource().clear(),vm.bfrsMapLayer.getSource().addFeatures(filteredFeatures),$.each(filteredFeatures,function(index,feature){vm.annotations.tintSelectedFeature(feature)}),vm.updateFeatureFilter(!0)}else vm.bfrsMapLayer.getSource().loadSource("query")}}),vm._updateCQLFilter||(vm._updateCQLFilter=debounce(function(updateType){vm._updateCQLFilterFunc(updateType)},2e3)),void(0===wait?vm._updateCQLFilterFunc(updateType):void 0===wait||null===wait?vm._updateCQLFilter(updateType):(console.log("wait = "+wait),vm._updateCQLFilter.call({wait:wait},updateType))))},featureFilter:function(f){var search=(""+this.search).toLowerCase(),found=!search||this.fields.some(function(key){return(""+f.get(key)).toLowerCase().indexOf(search)>-1});return this.selectedOnly&&this.selectedFeatures.length?this.selected(f)&&found:found},featureOrder:function(a,b){return"new"===a.get("status")?"new"===b.get("status")?a.get("label")<b.get("label")?-1:1:-1:"new"===b.get("status")?1:a.get("label")<b.get("label")?-1:1},updateFeatureFilter:function(runNow){var vm=this,updateFeatureFilterFunc=function(){var mapLayer=vm.bfrsMapLayer;if(mapLayer){vm.extentFeatures=mapLayer.getSource().getFeaturesInExtent(vm.$root.map.extent).filter(vm.featureFilter),vm.extentFeatures.sort(vm.featureOrder);var allFeatures=mapLayer.getSource().getFeatures().filter(vm.featureFilter);allFeatures.sort(vm.featureOrder),vm.allFeatures.clear(),vm.allFeatures.extend(allFeatures),vm.editableFeatures.clear(),vm.editableFeatures.extend(allFeatures)}};runNow?updateFeatureFilterFunc():(vm._updateFeatureFilter||(vm._updateFeatureFilter=debounce(function(){updateFeatureFilterFunc()},700)),vm._updateFeatureFilter())},updateViewport:function(runNow){var vm=this,updateViewportFunc=function(){var mapLayer=vm.bfrsMapLayer;if(mapLayer){mapLayer.getSource().getFeatures();vm.extentFeatures=mapLayer.getSource().getFeaturesInExtent(vm.$root.map.extent).filter(vm.featureFilter),vm.extentFeatures.sort(vm.featureOrder)}};runNow?updateViewportFunc():(vm._updateViewport||(vm._updateViewport=debounce(function(){updateViewportFunc()},100)),vm._updateViewport())},selectDefaultGeometry:function(feature){var geometries=feature.getGeometry().getGeometriesArray();geometries.length>1?0===geometries[1].getPolygons().length?feature.selectedIndex=[0]:feature.selectedIndex=[1,0]:0===geometries.length?delete feature.selectedIndex:geometries[0]instanceof _vendor.ol.geom.Point?feature.selectedIndex=[0]:0===geometries[0].getPolygons().length?delete feature.selectedIndex:feature.selectedIndex=[0,0]},loadUserProfile:function(){var vm=this;$.ajax({url:vm.bfrsService+"/api/v1/profile/?format=json",method:"GET",dataType:"json",success:function(response,stat,xhr){vm.whoami.bushfire.profile=response,vm.profileRevision+=1,vm.whoami.bushfire.regions&&(vm.region=vm.whoami.bushfire.profile.region_id||"",vm.district=vm.whoami.bushfire.profile.district_id||"",vm.updateCQLFilter("district",0),vm.bfrsLayer.initialLoad=!0)},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}})},loadRegions:function(){var vm=this;$.ajax({url:vm.bfrsService+"/api/v1/region/?format=json",method:"GET",dataType:"json",success:function(response,stat,xhr){vm.whoami.bushfire.regions=response,vm.profileRevision+=1,vm.whoami.bushfire.profile&&(vm.region=vm.whoami.bushfire.profile.region_id||"",vm.district=vm.whoami.bushfire.profile.district_id||"",vm.updateCQLFilter("district",0),vm.bfrsLayer.initialLoad=!0)},error:function(xhr,status,message){alert(status+" : "+message)},xhrFields:{withCredentials:!0}})},setup:function(){var vm=this,catalogue=this.$root.catalogue;this.bfrsMapLayer||catalogue.onLayerChange(this.bfrsLayer,!0),this.$root.annotations.selectable=[this.bfrsMapLayer],this.annotations.setTool(),this.$root.search.setSearchPointFunc(function(searchMethod,coords,name){var feat=1===vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;if(!feat)return!1;var hasPoint=feat.getGeometry().getGeometriesArray().length>0&&feat.getGeometry().getGeometriesArray()[0]instanceof _vendor.ol.geom.Point;return vm.annotations.tool&&["DMS","MGA"].indexOf(searchMethod)>=0&&("Bfrs Edit Geometry"===vm.annotations.tool.name||"Bfrs Origin Point"===vm.annotations.tool.name&&!hasPoint)?(hasPoint?feat.getGeometry().getGeometriesArray()[0]=new _vendor.ol.geom.Point(coords):feat.getGeometry().getGeometriesArray().splice(0,0,new _vendor.ol.geom.Point(coords)),feat.getGeometry().setGeometriesArray(feat.getGeometry().getGeometriesArray()),vm.postModified(feat),feat.getGeometry().changed(),!0):void 0}),this.$nextTick(this.adjustHeight)},tearDown:function(){this.selectable=null}},ready:function(){var vm=this,bfrsStatus=this.loading.register("bfrs","Bush Fire Report Component","Initialize"),map=this.$root.map;vm._reportStatus={99999:"unknown",1:"initial",2:"submitted",3:"draft_final",4:"final_authorised",5:"draft_review",6:"reviewed"},vm.whoami.bushfire=vm.whoami.bushfire||{},vm.whoami.bushfire.permission=vm.whoami.bushfire.permission||{create:null,"new.edit":!1,"new.modify":!0,"new.delete":!0,"new.authorise":!1,"unknown.edit":!1,"unknown.delete":!1,"unknown.authorise":!1,"initial.edit":!0,"initial.modify":!0,"initial.delete":!1,"initial.authorise":null,"submitted.edit":!0,"submitted.modify":!1,"submitted.delete":!1,"submitted.authorise":!1,"draft_final.edit":!0,"draft_final.modify":!0,"draft_final.delete":!1,"draft_final.authorise":null,"final_authorised.edit":!0,"final_authorised.modify":!1,"final_authorised.delete":!1,"final_authorised.authorise":!1,"draft_review.edit":!0,"draft_review.modify":null,"draft_review.delete":!1,"draft_review.authorise":null,"reviewed.edit":!0,"reviewed.modify":!1,"reviewed.delete":!1,"reviewed.authorise":!1},vm.loadRegions(),vm.ui={};var toolConfig={features:vm.allFeatures,mapLayers:function(layer){return"bfrs:bushfire_dev"===layer.get("id")}};vm.ui.translateInter=vm.annotations.translateInterFactory()(toolConfig),vm.ui.translateInter.on("translateend",function(ev){vm.postModified(ev.features.getArray())}),vm.ui.dragSelectInter=vm.annotations.dragSelectInterFactory()(toolConfig),vm.ui.selectInter=vm.annotations.selectInterFactory()(toolConfig),vm.ui.geometrySelectInter=vm.annotations.selectInterFactory()($.extend({selectMode:"geometry"},toolConfig)),vm.ui.modifyInter=vm.annotations.modifyInterFactory()({features:vm.editableFeatures,mapLayers:function(layer){return"bfrs:bushfire_dev"===layer.get("id")}}),vm.ui.modifyInter.on("featuresmodified",function(ev){vm.postModified(ev.features.getArray())}),vm.ui.originPointDraw=vm.annotations.pointDrawFactory({events:{addfeaturegeometry:!0},drawOptions:{condition:function(ev){var feat=1==vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;if(feat){feat.getGeometry();return!(!vm.isModifiable(feat)||0!=feat.getGeometry().getGeometriesArray().length&&feat.getGeometry().getGeometriesArray()[0]instanceof _vendor.ol.geom.Point)&&_vendor.ol.events.condition.noModifierKeys(ev)}return!1}}})({features:vm.drawings}),vm.ui.fireboundaryDraw=vm.annotations.polygonDrawFactory({events:{addfeaturegeometry:!0},drawOptions:{condition:function(ev){var feat=1==vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;if(feat){feat.getGeometry();return!!vm.isModifiable(feat)&&_vendor.ol.events.condition.noModifierKeys(ev)}return!1}}})({features:vm.drawings}),vm.drawings.on("add",function(ev){if(1===vm.selectedFeatures.getLength()){var f=vm.selectedFeatures.item(0);if("Bfrs Fire Boundary"===vm.annotations.tool.name){var indexes=null,index=f.getGeometry().getGeometriesArray().findIndex(function(g){return g instanceof _vendor.ol.geom.MultiPolygon});index>=0?(indexes=[index,f.getGeometry().getGeometriesArray()[index].getPolygons().length],f.getGeometry().getGeometriesArray()[index].appendPolygon(new _vendor.ol.geom.Polygon(ev.element.getGeometry().getCoordinates()))):(indexes=[f.getGeometry().getGeometriesArray().length,0],f.getGeometry().getGeometriesArray().push(new _vendor.ol.geom.MultiPolygon([ev.element.getGeometry().getCoordinates()]))),vm.ui.fireboundaryDraw.dispatchEvent(vm.annotations.createEvent(vm.ui.fireboundaryDraw,"addfeaturegeometry",{feature:f,indexes:indexes}))}else f.getGeometry().getGeometriesArray().length>0&&f.getGeometry().getGeometriesArray()[0]instanceof _vendor.ol.geom.Point?(f.getGeometry().getGeometriesArray()[0]=ev.element.getGeometry(),vm.ui.originPointDraw.dispatchEvent(vm.annotations.createEvent(vm.ui.originPointDraw,"addfeaturegeometry",{feature:f,indexes:[0]}))):(f.getGeometry().getGeometriesArray().splice(0,0,ev.element.getGeometry()),vm.ui.originPointDraw.dispatchEvent(vm.annotations.createEvent(vm.ui.originPointDraw,"addfeaturegeometry",{feature:f,indexes:[0]})));f.getGeometry().setGeometriesArray(f.getGeometry().getGeometriesArray()),vm.postModified(f),f.getGeometry().changed(),vm.drawings.clear()}});var tools=[{name:"Bfrs Select",label:"Select",icon:"fa-mouse-pointer",scope:["bfrs"],interactions:[vm.ui.dragSelectInter,vm.ui.selectInter,vm.ui.translateInter,vm.annotations.keyboardInterFactory({selectEnabled:!1,events:{deletefeatureallgeometries:!0},deleteSelected:function(features,selectedFeatures){var feature=null;for(i=selectedFeatures.getLength()-1;i>=0;i--)feature=selectedFeatures.item(i),vm.isDeletable(feature)?vm.deleteFeature(feature):vm.isModifiable(feature)&&(feature.getGeometry().getGeometriesArray().length=0,this.dispatchEvent(vm.annotations.createEvent(this,"deletefeatureallgeometries",{feature:feature})),void 0!==feature.selectedIndex&&delete feature.selectedIndex,vm.postModified(feature),feature.changed())}})],keepSelection:!0,onSet:function(){vm.ui.dragSelectInter.setMulti(!0),vm.ui.selectInter.setMulti(!0)}},{name:"Bfrs Edit Geometry",label:"Edit Geometry",icon:"fa-pencil",scope:["bfrs"],interactions:[vm.ui.geometrySelectInter,vm.annotations.keyboardInterFactory({selectEnabled:!1,events:{deletefeaturegeometry:!0},deleteSelected:function(features,selectedFeatures){selectedFeatures.forEach(function(feature){vm.isModifiable(feature)&&void 0!==feature.selectedIndex&&(vm.annotations.deleteSelectedGeometry(feature,this),vm.selectDefaultGeometry(feature),vm.postModified(feature))},this)}}),vm.ui.modifyInter],selectMode:"geometry",keepSelection:!0,onSet:function(){if(vm.ui.dragSelectInter.setMulti(!1),vm.ui.geometrySelectInter.setMulti(!1),vm.selectedFeatures.getLength()>1)vm.selectedFeatures.clear();else if(1==vm.selectedFeatures.getLength()){var selectedFeature=vm.selectedFeatures.item(0);void 0===selectedFeature.selectedIndex&&vm.selectDefaultGeometry(selectedFeature);
}}},{name:"Bfrs Origin Point",label:"Origin Point",icon:"dist/static/symbols/fire/origin.svg",tints:vm.tints,selectedFillColour:[0,0,0,.25],fillColour:[0,0,0,.25],size:2,interactions:[vm.ui.originPointDraw],sketchStyle:vm.annotations.getIconStyleFunction(vm.tints),features:vm.allFeatures,scope:["bfrs"],measureLength:!0,measureArea:!0,keepSelection:!0,showName:!0,onSet:function(){vm.selectedFeatures.getLength()>1&&vm.selectedFeatures.clear()}},{name:"Bfrs Fire Boundary",label:"Fire Boundary",icon:"dist/static/images/iD-sprite.svg#icon-area",style:vm.annotations.getVectorStyleFunc(vm.tints),selectedFillColour:[0,0,0,.25],fillColour:[0,0,0,.25],size:2,interactions:[this.ui.fireboundaryDraw],scope:["bfrs"],showName:!0,keepSelection:!0,onSet:function(){vm.selectedFeatures.getLength()>1&&vm.selectedFeatures.clear()}}];tools.forEach(function(tool){vm.annotations.tools.push(tool)}),vm.ui.modifyTool=vm.annotations.tools.find(function(tool){return"Bfrs Edit Geometry"===tool.name}),vm.ui.originPointTool=vm.annotations.tools.find(function(tool){return"Bfrs Origin Point"===tool.name}),this.$root.fixedLayers.push({type:"WFSLayer",name:"Bush Fire Report",id:"bfrs:bushfire_dev",getFeatureInfo:function(f){return{name:f.get("name"),img:map.getBlob(f,["icon","tint"]),comments:"TBD"}},initialLoad:!1,refresh:60,getUpdatedTime:function(features){var updatedTime=null;return $.each(features,function(index,f){if("new"!==f.get("status")){var featureModifiedDate=(0,_vendor.moment)(new Date(f.get("modified")));null===updatedTime?updatedTime=featureModifiedDate:updatedTime<featureModifiedDate&&(updatedTime=featureModifiedDate)}}),updatedTime},onload:function(loadType,vectorSource,features,defaultOnload){function processResources(){var insertPosition=0;if($.each(vm.allFeatures.getArray().filter(function(f){return["new","modified"].indexOf(f.get("tint"))>=0}),function(index,f){"new"===f.get("tint")?f.get("sss_id")?(loadedFeature=features.find(function(f2){return f.get("sss_id")===f2.get("sss_id")}),loadedFeature||(features.splice(insertPosition,0,f),insertPosition+=1)):(features.splice(insertPosition,0,f),insertPosition+=1):(loadedFeature=features.find(function(f2){return f.get("id")===f2.get("id")}),loadedFeature&&(loadedFeature.setGeometry(f.getGeometry()),loadedFeature.set("tint","modified",!0),loadedFeature.set("fillColour",vm.tints[loadedFeature.get("tint")+".fillColour"]),loadedFeature.set("colour",vm.tints[loadedFeature.get("tint")+".colour"])))}),defaultOnload(loadType,vectorSource,features),vm.selectedBushfires.length>0){var bushfireIds=vm.selectedBushfires.slice();vm.selectedFeatures.clear(),features.filter(function(el,index,arr){var id=el.get("id");return!!id&&!(bushfireIds.indexOf(id)<0)}).forEach(function(el){vm.selectedFeatures.push(el)})}vm.updateFeatureFilter(!0),vm.whoami.bushfire.permission.changed&&(delete vm.whoami.bushfire.permission.changed,vm.revision+=1)}$.each(features,function(index,feature){vm.initBushfire(feature)});var permissionConfig=[["create",null,null],["initial.edit",null,function(f){return"initial"===f.get("status")}],["draft_final.edit",null,function(f){return"final"===f.get("status")}],["final_authorised.edit",null,function(f){return"final_authorised"===f.get("status")}]],checkPermission=function checkPermission(index){var p=permissionConfig[index],url=null;if(null===vm.whoami.bushfire.permission[p[0]]||void 0===vm.whoami.bushfire.permission[p[0]])if(null===p[1])vm.whoami.bushfire.permission[p[0]]=!0,vm.whoami.bushfire.permission.changed=!0;else if("string"==typeof p[1])url=p[1];else{var f=features.find(p[2]);f?url=p[1](f):(url=null,vm.whoami.bushfire.permission[p[0]]=null,vm.whoami.bushfire.permission.changed=!0)}url?vm.utils.checkPermission(url,function(allowed){vm.whoami.bushfire.permission[p[0]]=allowed,vm.whoami.bushfire.permission.changed=!0,index<permissionConfig.length-1?checkPermission(index+1):processResources()}):index<permissionConfig.length-1?checkPermission(index+1):processResources()};checkPermission(0)}}),this.measure.register("bfrs:bushfire_dev",this.allFeatures),bfrsStatus.wait(40,"Listen 'gk-init' event"),this.$on("gk-init",function(){bfrsStatus.progress(80,"Process 'gk-init' event"),map.olmap.getView().on("propertychange",vm.updateViewport),vm.selectedFeatures.on("add",function(event){"Bfrs Origin Point"===event.element.get("toolName")&&(vm.selectedBushfires.push(event.element.get("id")),"geometry"===vm.annotations.tool.selectMode&&void 0===event.element.selectedIndex&&vm.selectDefaultGeometry(event.element))}),vm.selectedFeatures.on("remove",function(event){"Bfrs Origin Point"===event.element.get("toolName")&&vm.selectedBushfires.$remove(event.element.get("id"))}),vm.loadUserProfile(),vm.tools=vm.annotations.tools.filter(function(t){return t.scope&&t.scope.indexOf("bfrs")>=0}),vm.map.olmap.getLayers().on("remove",function(ev){"bfrs:bushfire_dev"===ev.element.get("id")&&(vm.allFeatures.clear(),vm.editableFeatures.clear(),vm.extentFeatures=[])}),bfrsStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-bfrs">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="bfrs-tabs">\n        <li class="tabs-title is-active">\n          <a class="label" aria-selected="true">Bush Fire Report\n            <small v-if="active.layerRefreshStatus(bfrsMapLayer)" style="white-space:pre-wrap"><br>Updated: {{ active.layerRefreshStatus(bfrsMapLayer) }}</small>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="bfrs-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="bfrs-tabs">\n        <div id="bfrs-list-tab" class="tabs-panel is-active" v-cloak="">\n          <div id="bfrs-list-controller-container">\n              <div class="tool-slice row collapse">\n                <div class="small-12">\n                  <div class="expanded button-group">\n                    <a v-for="t in tools | filterIf \'showName\' undefined" class="button button-tool" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}}</a>\n                  </div>\n                  <div class="row resetmargin">\n                    <div v-for="t in tools | filterIf \'showName\' true" class="small-6" v-bind:class="{\'rightmargin\': $index % 2 === 0}">\n                      <a class="expanded secondary button" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}} {{ t.label }}</a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="switch tiny">\n                  <input class="switch-input" id="bushfiresInViewport" type="checkbox" v-bind:checked="viewportOnly" @change="toggleViewportOnly">\n                  <label class="switch-paddle" for="bushfiresInViewport">\n                    <span class="show-for-sr">Viewport bushfires only</span>\n                  </label>\n                </div>\n                <label for="bushfiresInViewport" class="side-label">Restrict to viewport ({{ stats }})</label>\n              </div>\n              <div class="row">\n                <div class="switch tiny">\n                  <input class="switch-input" id="toggleBushfireLabels" type="checkbox" v-bind:checked="bushfireLabels" @change="toggleBushfireLabels">\n                  <label class="switch-paddle" for="toggleBushfireLabels">\n                    <span class="show-for-sr">Display bushfire labels</span>\n                  </label>\n                </div>\n                <label for="toggleBushfireLabels" class="side-label">Display bushfire labels</label>\n              </div>\n              <div class="row">\n                <div class="switch tiny">\n                  <input class="switch-input" id="toggleReportInfo" type="checkbox" v-bind:disabled="!setting.hoverInfoSwitchable" v-bind:checked="setting.hoverInfo" @change="setting.toggleHoverInfo">\n                  <label class="switch-paddle" for="toggleReportInfo">\n                    <span class="show-for-sr">Display hovering bushfire info</span>\n                  </label>\n                </div>\n                <label for="toggleReportInfo" class="side-label">Display hovering bushfire info</label>\n              </div>\n  \n              <div class="row collapse">\n                <div class="small-6 columns">\n                  <select name="select" v-model="region" @change="updateCQLFilter(\'region\',2000)">\n                    <option value="" selected="">All regions</option> \n                    <option v-for="r in regions" value="{{r.region_id}}" track-by="region_id">\n                      {{r.region}}\n                    </option>\n                  </select>\n                </div>\n                <div class="small-6 columns">\n                  <select name="select" v-model="district" @change="updateCQLFilter(\'district\',500)">\n                    <option value="" selected="">All districts</option> \n                    <option v-for="d in districts" value="{{d.id}}" track-by="id">\n                      {{d.district}}\n                    </option>\n                  </select>\n                </div>\n              </div>\n  \n              <div class="row collapse">\n                <div class="small-6 columns">\n                  <select name="select" v-model="statusFilter" @change="updateCQLFilter(\'bushfireStatus\',500)">\n                    <option value="" selected="">All bushfires</option> \n                    <option value="report_status = 1">Initial Bushfires</option>\n                    <option value="report_status = 2">Submitted Bushfires</option>\n                    <option value="report_status = 3">Draft Final Bushfires</option>\n                    <option value="report_status >= 4">Authroised Final Bushfires</option>\n                  </select>\n                </div>\n                <div class="small-6 columns">\n                  <input type="search" v-model="search" placeholder="Find a bushfire" @keyup="updateFeatureFilter">\n                </div>\n              </div>\n  \n              <div class="tool-slice row collapse">\n                <div class="small-12 expanded button-group">\n                  <a title="Zoom to selected" class="button button-tool" @click="map.zoomToSelected()"><i class="fa fa-search"></i></a>\n                  <a v-if="isCreatable()" title="Create bushfire" class="button" @click="newFeature()"><i class="fa fa-plus"></i></a>\n  \n                  <a class="button" @click="importList()" title="Support GeoJSON(.geojson .json), GPS data(.gpx)"><i class="fa fa-upload" aria-hidden="true"></i></a>\n                  <a class="button" @click="downloadList(\'geojson\')" title="Export Bushfire as GeoJSON"><i class="fa fa-download" aria-hidden="true"></i><br> geojson </a>\n                  <a class="button" @click="downloadList(\'gpkg\')" title="Export Bushfire as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i><br> gpkg</a>\n                </div>\n              </div>\n  \n              <div class="row">\n                <div class="small-12">\n                  <div class="columns">\n                    <div class="row">\n                      <div class="switch tiny">\n                        <input class="switch-input" id="selectedBushfiresOnly" type="checkbox" v-bind:disabled="selectedOnlyDisabled" v-model="selectedOnly" @change="updateCQLFilter(\'selectedBushfire\',500)">\n                        <label class="switch-paddle" for="selectedBushfiresOnly">\n                          <span class="show-for-sr">Show selected only</span>\n                       </label>\n                      </div>\n                      <label for="selectedBushfiresOnly" style="margin-left:3px" class="side-label">Show selected only</label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          </div>\n\n          <div id="bfrs-list" class="layers-flexibleframe scroller" style="margin-left:-15px; margin-right:-15px;">\n            <div v-for="f in features" class="row feature-row" v-bind:class="{\'feature-selected\': selected(f) }" @click="toggleSelect(f)" track-by="get(\'id\')">\n              <div class="columns">\n                <a v-if="canReset(f)" @click.stop.prevent="resetFeature(f)" title="Reset" class="button tiny secondary float-right acion" style="margin-left:2px"><i class="fa fa-undo actionicon"></i></a>\n                <a v-if="canDelete(f)" @click.stop.prevent="deleteFeature(f)" title="Delete" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-trash actionicon"></i></a>\n                <a v-if="canCreate(f)" @click.stop.prevent="createFeature(f)" title="Create" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-save actionicon"></i></a>\n                <a v-if="canEdit(f) " @click.stop.prevent="utils.editResource($event)" title="Edit" href="{{editUrl(f)}}" target="_blank" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-pencil actionicon"></i></a>\n                <a v-if="canSave(f)" @click.stop.prevent="saveFeature(f)" title="Save" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-save actionicon"></i></a>\n                <div class="feature-title"><img class="feature-icon" id="bushfire-icon-{{f.get(\'id\')}}" v-bind:src="featureIconSrc(f)"> {{ f.get(\'label\') }} <i><small></small></i></div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n  <form id="bushfire_create" name="bushfire_create" action="{{createUrl()}}" method="post" target="{{utils.getAddressTarget(" _blank")}}"="">\n      <input type="hidden" name="sss_create" id="sss_create">\n  </form>\n</div>\n',module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.actionicon {\n    width:9px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-7e32c52d",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-7e32c52d",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5,"vueify/lib/insert-css":7}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{sssService:"sssService",resourceLabels:"settings.resourceLabels",resourceDirections:"settings.resourceDirections",viewportOnly:"settings.viewportOnly",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",whoami:"whoami"},data:function(){var fill="#ff6600",stroke="#7c3100";return{toggleHistory:!1,selectedOnly:!1,search:"",cql:"",tools:[],history:"",fields:["id","registration","rin_display","deviceid","symbol","district","usual_driver","usual_callsign","usual_location","current_driver","current_callsign","contractor_details","source_device_type"],allFeatures:[],extentFeatures:[],selectedDevices:[],historyFromDate:"",historyFromTime:"",historyToDate:"",historyToTime:"",historyRangeMilliseconds:0,tints:{red:[[fill,"#ed2727"],[stroke,"#480000"]],orange:[[fill,"#ff6600"],[stroke,"#562200"]],yellow:[[fill,"#ffd700"],[stroke,"#413104"]],green:[[fill,"#71c837"],[stroke,"#1b310d"]],selected:[["#000000","#2199e8"],[stroke,"#2199e8"],[fill,"#ffffff"]]}}},computed:{map:function(){return this.$root.$refs.app.$refs.map},annotations:function(){return this.$root.$refs.app.$refs.annotations},info:function(){return this.$root.info},setting:function(){return this.$root.setting},catalogue:function(){return this.$root.catalogue},export:function(){return this.$root.export},loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},features:function(){return this.viewportOnly?this.extentFeatures:this.allFeatures},selectedOnlyDisabled:function(){return 0===this.selectedDevices.length&&!this.selectedOnly},isTrackingMapLayerHidden:function(){return this.$root.active.isHidden(this.trackingMapLayer)},isHistoryMapLayerHidden:function(){return this.$root.active.isHidden(this.historyMapLayer)},selectedFeatures:function(){return this.annotations.selectedFeatures},stats:function(){return Object.keys(this.extentFeatures).length+"/"+Object.keys(this.allFeatures).length},queryHistoryDisabled:function(){return!(this.selectedFeatures&&this.selectedFeatures.getLength()&&this.historyFromDate&&this.historyFromTime&&this.historyToDate&&this.historyToTime)},historyRange:{get:function(){return this.historyRangeMilliseconds},set:function(val){this.historyRangeMilliseconds=val;var currentDate=(0,_vendor.moment)();this.historyToDate=currentDate.format("YYYY-MM-DD"),this.historyToTime=currentDate.format("HH:mm");var fromDate=currentDate.subtract(val,"milliseconds");this.historyFromDate=fromDate.format("YYYY-MM-DD"),this.historyFromTime=fromDate.format("HH:mm")}},trackingLayer:function(){return this.$root.catalogue.getLayer("dpaw:resource_tracking_live")},trackingMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.trackingLayer):void 0},historyLayer:function(){return this.$root.catalogue.getLayer("dpaw:resource_tracking_history")},historyMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.historyLayer):void 0}},watch:{isTrackingMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.trackingMapLayer.changed())},isHistoryMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.historyMapLayer.changed())},resourceLabels:function(newValue,oldValue){this.showResourceLabelsOrDirections()},resourceDirections:function(newValue,oldValue){this.showResourceLabelsOrDirections()},screenHeight:function(newValue,oldvalue){this.adjustHeight()},toggleHistory:function(){this.adjustHeight()}},methods:{adjustHeight:function(){"tracking"===this.activeMenu&&$("#tracking-list").height(this.screenHeight-this.leftPanelHeadHeight-$("#tracking-list-controller-container").height())},verifyDate:function(event,inputPattern,pattern){var element=event.target;if(element.value=element.value.trim(),element.value.length>0){var m=(0,_vendor.moment)(element.value,inputPattern,!0);m.isValid()?element.value=m.format(pattern):setTimeout(function(){element.focus()},10)}},ago:function(time){var now=(0,_vendor.moment)();return 1==now.diff((0,_vendor.moment)(time),"days")?now.diff((0,_vendor.moment)(time),"days")+" day":now.diff((0,_vendor.moment)(time),"days")>1?now.diff((0,_vendor.moment)(time),"days")+" days":1==now.diff((0,_vendor.moment)(time),"hours")?now.diff((0,_vendor.moment)(time),"hours")+" hr":now.diff((0,_vendor.moment)(time),"hours")>1?now.diff((0,_vendor.moment)(time),"hours")+" hrs":1==now.diff((0,_vendor.moment)(time),"minutes")?now.diff((0,_vendor.moment)(time),"minutes")+" min":now.diff((0,_vendor.moment)(time),"minutes")<1?"<1 min":now.diff((0,_vendor.moment)(time),"minutes")+" mins"},toggleSelect:function(f){this.selected(f)?this.selectedFeatures.remove(f):this.selectedFeatures.push(f)},toggleViewportOnly:function(){this.viewportOnly=!this.viewportOnly,this.export.saveState()},toggleResourceLabels:function(){this.resourceLabels=!this.resourceLabels,this.export.saveState()},showResourceLabelsOrDirections:function(){var vm=this;$.each([this.trackingMapLayer,this.historyMapLayer],function(index,mapLayer){mapLayer&&!vm.$root.active.isHidden(mapLayer)&&mapLayer.changed()})},toggleResourceDirections:function(){this.resourceDirections=!this.resourceDirections,this.export.saveState()},featureIconSrc:function(f){var vm=this;vm.selectedDevices;return this.map.getBlob(f,["icon","originalTint"],this.tints,function(){$("#device-icon-"+f.get("id")).attr("src",vm.featureIconSrc(f))})},selected:function(f){return f.get("deviceid")&&this.selectedDevices.indexOf(f.get("deviceid"))>-1},downloadList:function(){this.$root.export.exportVector(this.features.filter(this.featureFilter).sort(this.featureOrder),"trackingdata")},downloadSelectedCSV:function(){var deviceFilter="";return this.selectedDevices.length>0&&(deviceFilter="deviceid__in="+this.selectedDevices.join(",")),deviceFilter},clearHistory:function(){var historyLayer=this.historyLayer;this.toggleHistory||(historyLayer.cql_filter="clearhistorylayer",this.$root.catalogue.onLayerChange(historyLayer,!1))},updateCQLFilter:function(updateType){var vm=this;return"selectedDevice"===updateType&&0===this.selectedDevices&&vm.selectedOnly===!0?void(vm.selectedOnly=!1):(vm._updateCQLFilter||(vm._updateCQLFilter=debounce(function(updateType){var groupFilter=vm.cql,deviceFilter="";if(vm.selectedDevices.length>0&&vm.selectedOnly&&(deviceFilter="deviceid in ("+vm.selectedDevices.join(",")+")"),groupFilter&&deviceFilter?vm.trackingLayer.cql_filter="("+groupFilter+") and ("+deviceFilter+")":deviceFilter?vm.trackingLayer.cql_filter=deviceFilter:vm.trackingLayer.cql_filter=groupFilter,!deviceFilter&&vm.selectedOnly&&(vm.selectedOnly=!1),"selectedDevice"===updateType&&deviceFilter){var filteredFeatures=vm.trackingMapLayer.getSource().getFeatures().filter(function(f){return vm.selectedDevices.indexOf(f.get("deviceid"))>=0});vm.trackingMapLayer.getSource().clear(),vm.trackingMapLayer.getSource().addFeatures(filteredFeatures),$.each(filteredFeatures,function(index,feature){vm.annotations.tintSelectedFeature(feature)}),vm.updateFeatureFilter(!0)}else vm.trackingMapLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.trackingMapLayer.getSource().loadSource("query")},500)),void vm._updateCQLFilter(updateType))},historyCQLFilter:function(){var historyLayer=this.historyLayer,deviceFilter="deviceid in ("+this.selectedDevices.join(",")+")";if(historyLayer.cql_filter=deviceFilter+"and seen between '"+this.historyFromDate+" "+this.historyFromTime+":00' and '"+this.historyToDate+" "+this.historyToTime+":00'",!this.$root.catalogue.onLayerChange(historyLayer,!0)){var source=this.$root.map.getMapLayer(historyLayer).getSource();source.loadSource("query")}},featureFilter:function(f){var search=(""+this.search).toLowerCase(),found=!search||this.fields.some(function(key){return(""+f.get(key)).toLowerCase().indexOf(search)>-1});return this.selectedOnly&&this.selectedFeatures.getLength()?this.selected(f)&&found:found},featureOrder:function(a,b){var as=a.get("seen"),bs=b.get("seen");return as<bs?1:as>bs?-1:0},updateFeatureFilter:function(runNow){var vm=this,updateFeatureFilterFunc=function(){var mapLayer=vm.trackingMapLayer;mapLayer&&(vm.extentFeatures=mapLayer.getSource().getFeaturesInExtent(vm.$root.map.extent).filter(vm.featureFilter),vm.extentFeatures.sort(vm.featureOrder),vm.allFeatures=mapLayer.getSource().getFeatures().filter(vm.featureFilter),vm.allFeatures.sort(vm.featureOrder))};runNow?updateFeatureFilterFunc():(vm._updateFeatureFilter||(vm._updateFeatureFilter=debounce(function(){updateFeatureFilterFunc()},700)),vm._updateFeatureFilter())},updateViewport:function(runNow){var vm=this,updateViewportFunc=function(){var mapLayer=vm.trackingMapLayer;if(mapLayer){mapLayer.getSource().getFeatures();vm.extentFeatures=mapLayer.getSource().getFeaturesInExtent(vm.$root.map.extent).filter(vm.featureFilter),vm.extentFeatures.sort(vm.featureOrder)}};runNow?updateViewportFunc():(vm._updateViewport||(vm._updateViewport=debounce(function(){updateViewportFunc()},100)),vm._updateViewport())},setup:function(){var catalogue=this.$root.catalogue;this.trackingMapLayer||catalogue.onLayerChange(this.trackingLayer,!0),this.$root.annotations.selectable=[this.trackingMapLayer],this.annotations.setTool(),this.$nextTick(this.adjustHeight)},tearDown:function(){this.selectable=null}},ready:function(){var vm=this,trackingStatus=this.loading.register("tracking","Resource Tracking Component","Initialize"),map=this.$root.map,resourceTrackingStyleFunc=function(layerId){return function(res){var feat=this,style=vm.map.cacheStyle(function(feat){var src=vm.map.getBlob(feat,["icon","tint"],vm.tints);return!!src&&new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,snapToPixel:!0}),text:new _vendor.ol.style.Text({offsetX:12,textAlign:"left",font:"12px Helvetica,Roboto,Arial,sans-serif",stroke:new _vendor.ol.style.Stroke({color:"#fff",width:4})}),stroke:new _vendor.ol.style.Stroke({color:[52,101,164,.6],width:4})})},feat,["icon","tint"]);if(style[0].getText&&style[0].getText()&&(res<.003&&vm.resourceLabels&&!vm.$root.active.isHidden(vm.map.getMapLayer(layerId))?style[0].getText().setText(feat.get("label")):style[0].getText().setText("")),res<.003&&vm.resourceDirections){var heading=feat.get("heading"),speed=feat.get("velocity");if(void 0!==heading&&(0!==heading||0!==speed))return vm.styleWithDirection?vm.styleWithDirection[0]=style[0]:vm.styleWithDirection=style.concat([new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:"/dist/static/symbols/device/direction.svg",scale:1,snapToPixel:!0})})]),vm.styleWithDirection[1].getImage().setRotation(heading/180*Math.PI),vm.styleWithDirection}return style}},deviceLabel=function(device){var name="",district=device.get("district"),rin_display=device.get("rin_display"),registration=device.get("registration");return name=district&&"AV"!=district&&"OTH"!=district?rin_display?district+" "+rin_display+" "+registration:district+" "+registration:rin_display?rin_display+" "+registration:registration},addResourceFunc=function(styleFunc){return function(f){var now=(0,_vendor.moment)(),timestamp=(0,_vendor.moment)(f.get("seen")),tint="red";now.diff(timestamp,"hours")<24&&(tint="orange"),now.diff(timestamp,"hours")<3&&(tint="yellow"),now.diff(timestamp,"hours")<1&&(tint="green"),f.set("icon","dist/static/symbols/device/"+f.get("symbolid")+".svg",!0),f.set("tint",tint,!0),f.set("originalTint",tint,!0),f.set("label",deviceLabel(f),!0),f.set("time",timestamp.toLocaleString(),!0),f.set("partialId","resourceInfo",!0),f.set("selectId",f.get("deviceid"),!0),f.setStyle(styleFunc,!0)}},deviceExtraHoverLabel=function(device){var return_label="",c_label="",u_label="",c_driver=" "+(device.get("current_driver")||""),c_callsign=" "+(device.get("current_callsign")||""),u_driver=" "+(device.get("usual_driver")||""),u_callsign=" "+(device.get("usual_callsign")||""),u_location=" "+(device.get("usual_location")||""),contractor_label="Contractor: "+(device.get("contractor_details")||"");return" "!=u_driver||" "!=u_callsign?(u_label+="Usual:"+u_driver+u_callsign," "!=u_location&&(u_label+=", Location:"+u_location)):" "!=u_location&&(u_label+="Usual location:"+u_location)," "==c_driver&&" "==c_callsign||(c_label+="Current:"+c_driver+c_callsign),""!=c_label&&(return_label+=c_label),""!=c_label&&""!=u_label?return_label+="<br>"+u_label:""!=u_label&&(return_label+=u_label),""==c_label&&""==u_label||"Contractor: "==contractor_label?"Contractor: "!=contractor_label&&(return_label+=contractor_label):return_label+="<br>"+contractor_label,return_label};this.$root.fixedLayers.push({type:"WFSLayer",name:"Resource Tracking",id:"dpaw:resource_tracking_live",onadd:addResourceFunc(resourceTrackingStyleFunc("dpaw:resource_tracking_live")),getFeatureInfo:function(f){var extra_device_label=deviceExtraHoverLabel(f);return{name:f.get("label"),img:map.getBlob(f,["icon","tint"]),comments:"("+vm.ago(f.get("seen"))+" ago, Heading:"+f.get("heading")+"&deg;)<br>"+extra_device_label}},refresh:60,onload:function(loadType,vectorSource,features,defaultOnload){function processResources(){if(defaultOnload(loadType,vectorSource,features),vm.selectedDevices.length>0){var deviceIds=vm.selectedDevices.slice();vm.selectedFeatures.clear(),features.filter(function(el,index,arr){var id=el.get("deviceid");return!!id&&!(deviceIds.indexOf(id)<0)}).forEach(function(el){vm.selectedFeatures.push(el)})}vm.updateFeatureFilter(!0)}if((null===vm.whoami.editVehicle||void 0===vm.whoami.editVehicle)&&features.length>0){var f=features.find(function(f){return"tracplus"!=f.get("source_device_type")});f?_vendor.utils.checkPermission(vm.sssService+"/sss_admin/tracking/device/"+f.get("id")+"/change/",function(allowed){vm.whoami.editVehicle=allowed,processResources()}):processResources()}else processResources()}},{type:"WFSLayer",name:"Resource Tracking History",id:"dpaw:resource_tracking_history",onadd:function(addResource){return function(f){f.getGeometry()instanceof _vendor.ol.geom.Point&&addResource(f)}}(addResourceFunc(resourceTrackingStyleFunc("dpaw:resource_tracking_history"))),cql_filter:!1,getFeatureInfo:function(f){if(f.getGeometry()instanceof _vendor.ol.geom.Point){var name=deviceLabel(f),extra_device_label=deviceExtraHoverLabel(f);return{name:name,img:map.getBlob(f,["icon","tint"]),comments:"("+f.get("label")+", Heading:"+f.get("heading")+"&deg;)<br>"+extra_device_label}}return{name:f.get("name"),img:map.getBlob(f,["icon","tint"]),comments:"("+f.get("startTime")+" - "+f.get("endTime")+")"}},onload:function(loadType,vectorSource,features,defaultOnload){defaultOnload(loadType,vectorSource,features);var devices={};features.forEach(function(feature){var props=feature.getProperties();props.name in devices||(devices[props.name]=[]),devices[props.name].push(feature)}),Object.keys(devices).forEach(function(device){devices[device].sort(vm.featureOrder);var coords=devices[device].map(function(point){return point.set("label",(0,_vendor.moment)(point.get("seen")).format("MMM DD HH:mm")),point.getGeometry().getCoordinates()}),f=devices[device][0],name=deviceLabel(f),feature=new _vendor.ol.Feature({name:name+" path",icon:f.get("icon"),tint:f.get("tint"),endTime:(0,_vendor.moment)(f.get("seen")).format("MMM DD HH:mm"),startTime:(0,_vendor.moment)(devices[device][devices[device].length-1].get("seen")).format("MMM DD HH:mm"),geometry:new _vendor.ol.geom.LineString(coords)});vectorSource.addFeature(feature)})}}),trackingStatus.wait(40,"Listen 'gk-init' event"),this.$on("gk-init",function(){trackingStatus.progress(80,"Process 'gk-init' event"),map.olmap.getView().on("propertychange",vm.updateViewport),vm.selectedFeatures.on("add",function(event){event.element.get("deviceid")&&vm.selectedDevices.push(event.element.get("deviceid"))}),vm.selectedFeatures.on("remove",function(event){event.element.get("deviceid")&&vm.selectedDevices.$remove(event.element.get("deviceid"))}),vm.tools=vm.annotations.tools.filter(function(t){return t.scope&&t.scope.indexOf("resourcetracking")>=0}),trackingStatus.end()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-tracking">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="tracking-tabs">\n        <li class="tabs-title is-active"><a class="label" aria-selected="true">Resource Tracking</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="tracking-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="tracking-tabs">\n        <div id="tracking-list-tab" class="tabs-panel is-active" v-cloak="">\n          <div id="tracking-list-controller-container">\n          <div class="tool-slice row collapse">\n            <div class="small-12">\n              <div class="expanded button-group">\n                <a v-for="t in tools | filterIf \'showName\' undefined" class="button button-tool" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}}</a>\n              </div>\n              <div class="row resetmargin">\n                <div v-for="t in tools | filterIf \'showName\' true" class="small-6" v-bind:class="{\'rightmargin\': $index % 2 === 0}">\n                  <a class="expanded secondary button" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}} {{ t.label }}</a>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="row">\n            <div class="switch tiny">\n              <input class="switch-input" id="resourcesInViewport" type="checkbox" v-bind:checked="viewportOnly" @change="toggleViewportOnly">\n              <label class="switch-paddle" for="resourcesInViewport">\n                <span class="show-for-sr">Viewport resources only</span>\n              </label>\n            </div>\n            <label for="resourcesInViewport" class="side-label">Restrict to viewport ({{ stats }})</label>\n          </div>\n          <div class="row">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleResourceLabels" type="checkbox" v-bind:checked="resourceLabels" @change="toggleResourceLabels">\n              <label class="switch-paddle" for="toggleResourceLabels">\n                <span class="show-for-sr">Display resource labels</span>\n              </label>\n            </div>\n            <label for="toggleResourceLabels" class="side-label">Display resource labels</label>\n          </div>\n          <div class="row">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleResourceDirections" type="checkbox" v-bind:checked="resourceDirections" @change="toggleResourceDirections">\n              <label class="switch-paddle" for="toggleResourceDirections">\n                <span class="show-for-sr">Display resource directions</span>\n              </label>\n            </div>\n            <label for="toggleResourceDirections" class="side-label">Display resource directions</label>\n          </div>\n          <div class="row">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleResourceInfo" type="checkbox" v-bind:disabled="!setting.hoverInfoSwitchable" v-bind:checked="setting.hoverInfo" @change="setting.toggleHoverInfo">\n              <label class="switch-paddle" for="toggleResourceInfo">\n                <span class="show-for-sr">Display hovering resource info</span>\n              </label>\n            </div>\n            <label for="toggleResourceInfo" class="side-label">Display hovering resource info</label>\n          </div>\n          <div class="row collapse">\n            <div class="small-6 columns">\n              <select name="select" v-model="cql" @change="updateCQLFilter">\n                <option value="" selected="">All resources</option> \n                <option value="symbolid LIKE \'%aircraft\'">Aircraft</option>\n                <option value="symbolid LIKE \'%comms_bus\'">Communications Bus</option>\n                <option value="symbolid LIKE \'%gang_truck\'">Gang Truck</option>\n                <option value="symbolid LIKE \'%heavy_duty\'">Heavy Duty</option>\n                <option value="(symbolid LIKE \'%heavy_duty\' OR symbolid LIKE \'%gang_truck\')">Gang Truck and Heavy Duty</option>\n                <option value="symbolid LIKE \'%light_unit\'">Light Unit</option>\n                <option value="(symbolid LIKE \'%dozer\' OR symbolid LIKE \'%grader\' OR symbolid LIKE \'%loader\')">Machinery</option>\n                <option value="(symbolid LIKE \'%2_wheel_drive\' OR symbolid LIKE \'%4_wheel_drive_passenger\' OR symbolid LIKE \'%4_wheel_drive_ute\')">Other Light Fleet</option>\n              </select>\n            </div>\n            <div class="small-6 columns">\n              <input type="search" v-model="search" placeholder="Find a resource" @keyup="updateFeatureFilter">\n            </div>\n          </div>\n          <div class="row">\n            <div class="small-7">\n              <div class="columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="selectedResourcesOnly" type="checkbox" v-bind:disabled="selectedOnlyDisabled" v-model="selectedOnly" @change="updateCQLFilter(\'selectedDevice\')">\n                    <label class="switch-paddle" for="selectedResourcesOnly">\n                  <span class="show-for-sr">Show selected only</span>\n               </label>\n                  </div>\n                  <label for="selectedResourcesOnly" class="side-label">Show selected only</label>\n                </div>\n              </div>\n              <div class="columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="resourceHistory" type="checkbox" v-model="toggleHistory" @change="clearHistory">\n                    <label class="switch-paddle" for="resourceHistory">\n                  <span class="show-for-sr">Query history</span>\n                </label>\n                  </div>\n                  <label for="resourceHistory" class="side-label">Query history</label>\n                </div>\n              </div>\n            </div>\n            <div class="small-5">\n              <a title="Zoom to selected" class="button" @click="map.zoomToSelected()"><i class="fa fa-search"></i></a>\n              <a title="Download list as geoJSON" class="button" @click="downloadList()"><i class="fa fa-download"></i></a>\n              <a title="Download all or selected as CSV" class="button" href="{{sssService}}/devices.csv?{{downloadSelectedCSV()}}" target="_blank"><i class="fa fa-table"></i></a>\n            </div>\n          </div>\n          <div id="history-panel" v-if="toggleHistory">\n            <div class="row collapse tool-slice">\n              <div class="small-2">\n                <label for="historyFrom">From:</label>\n              </div>\n              <div class="small-4">\n                <input type="text" v-on:blur="verifyDate($event,[\'YY-M-D\',\'YYYY-M-D\'],\'YYYY-MM-DD\')" v-model="historyFromDate" placeholder="yyyy-mm-dd">\n              </div>\n              <div class="small-2">\n                <input type="text" v-on:blur="verifyDate($event,\'H:m\',\'HH:mm\')" v-model="historyFromTime" placeholder="24:00">\n              </div>\n              <div class="small-4">\n                <select name="select" v-model="history" @change="historyRange = history">\n                <option value="" selected="">Date range</option> \n                <!-- values in milliseconds -->\n                <option value="3600000">Last hour</option> \n                <option value="10800000">Last 3 hours</option> \n                <option value="86400000">Last day</option> \n                <option value="604800000">Last week</option> \n                <option value="2678400000">Last month</option> \n              </select>\n              </div>\n            </div>\n            <div class="row collapse tool-slice">\n              <div class="small-2">\n                <label for="historyTo">To:</label>\n              </div>\n              <div class="small-4">\n                <input type="text" v-on:blur="verifyDate($event,[\'YY-M-D\',\'YYYY-M-D\'],\'YYYY-MM-DD\')" v-model="historyToDate" placeholder="yyyy-mm-dd">\n              </div>\n              <div class="small-2">\n                <input type="text" v-on:blur="verifyDate($event,\'H:m\',\'HH:mm\')" v-model="historyToTime" placeholder="24:00">\n              </div>\n              <div class="small-2"></div>\n              <div class="small-2">\n                <button v-bind:disabled="queryHistoryDisabled" class="button" style="float: right" @click="historyCQLFilter">Go</button>\n              </div>\n            </div>\n          </div>\n          </div>\n\n\n          <div id="tracking-list" class="layers-flexibleframe scroller" style="margin-left:-15px; margin-right:-15px;">\n            <div v-for="f in features" class="row feature-row" v-bind:class="{\'feature-selected\': selected(f) }" @click="toggleSelect(f)" track-by="get(\'id\')">\n              <div class="columns">\n                <a v-if="whoami.editVehicle &amp;&amp; f.get(\'source_device_type\') != \'tracplus\'" @click.stop.prevent="utils.editResource($event)" title="Edit resource" href="{{sssService}}/sss_admin/tracking/device/{{ f.get(\'id\') }}/change/" target="_blank" class="button tiny secondary float-right"><i class="fa fa-pencil"></i></a>\n                <div class="feature-title"><img class="feature-icon" id="device-icon-{{f.get(\'id\')}}" v-bind:src="featureIconSrc(f)"> {{ f.get(\'label\') }} <i><small>({{ ago(f.get(\'seen\')) }})</small></i></div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',
module.hot&&!function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-05eecd42",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-05eecd42",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:6,"vue-hot-reload-api":5}]},{},[10]);
